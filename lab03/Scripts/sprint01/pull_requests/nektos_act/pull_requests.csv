number,created_at,merged_at,closed_at,files,additions,deletions,body_text,participants,comments
8,2019-01-16T12:59:46Z,2019-01-16T17:53:50Z,2019-01-16T17:53:50Z,1,1,1,There is no /tmp on windows. Go will use the OS specific temporary directory if we pass no specific directory to ioutil.TempDir,2,3
15,2019-01-21T08:35:52Z,2019-01-22T15:33:55Z,2019-01-22T15:33:55Z,1,1,1,"mention you need DOcker 18.09 - #14 (this is probably something that can change, but its true atm)
also suggest go 1.11.4 - with 1.11.3 and 1.11.1 I got version missmatch errors from go mod - see moby/moby#38507 (comment)
Signed-off-by: Sven Dowideit SvenDowideit@home.org.au",3,0
30,2019-02-10T02:40:38Z,2019-02-13T04:30:03Z,2019-02-13T04:30:03Z,19,1076,18,"This PR adds support for a --watch or -w flag to act. When provided, act doesn't exit after the first run, but instead runs a goroutine that watches the local directory for changes (ignoring files in .gitignore). When changes are detected, the workflow file is parsed and run again.
A redux of #29, this time without conflicts.",2,2
34,2019-02-14T20:50:27Z,2019-02-15T00:47:00Z,2019-02-15T00:47:00Z,2,14,10,"Made a few small changes to the git slug parsing:

Moved (and properly renamed) regular expressions into vars
Fixed failing test where github http regex was not matching http://github.com/user/repo without .git extension.",2,0
35,2019-02-15T16:38:07Z,2019-02-17T01:01:37Z,2019-02-17T01:01:37Z,4,25,12,"So this is implementation for my latest comment in #32.
Act will detect the event type from the workflow file only if there's a single workflow in the file.
workflow ""test"" {
  on = ""pull_request""
  resolves = [""task""]
}

task ""foo"" {
  // ... details
}

When running act it will run all the tasks for the pull_request event. Will add tests as well.",2,0
38,2019-02-18T05:44:27Z,2019-02-19T14:29:27Z,2019-02-19T14:29:27Z,5,96,4,"One way to close #37.
Adds a flag to skip pulling when an action uses is a docker image. This allows local docker images to be used that aren't pushed to a registry, but not built during act execution.
I'm open to different approaches, or a discussion about if this is even a good idea to add. Alternative approaches?",2,0
46,2019-03-02T03:45:57Z,2019-03-02T15:53:25Z,2019-03-02T15:53:25Z,6,45,19,"This is related to #33 and #42.
I initially thought that after i updated to latest act version my issue went away. Just confirmed that
that's not the case, and i was able to reproduce the error locally.
When running act without -v flag and when the action's docker image fails to build, users see a cryptic message ""docker image ... not found"". The run should have been aborted but it's not, this has to do with the build process error handling. I added a conditional to logDockerResponse function to catch error message details if it's present.
So now users will actually see the reason why the docker image build had failed. This change also fixed the issue when act runs the older docker image if the most recent one has failed to build.",2,0
48,2019-03-10T02:41:21Z,2019-03-10T15:13:15Z,2019-03-10T15:13:15Z,1,1,1,"This doesn't change the functional behavior of act, but it resolves an error that was erroring when running vet.
Adding the _ = before this line will resolve the following error on make build:
container/docker_pull.go:37:26: Error return value of `input.logDockerResponse` is not checked (errcheck)
                input.logDockerResponse(reader, err != nil)
                                       ^
Error: exit with `FAILURE`: 1
exit status 1
make[2]: *** [check] Error 1
make[1]: *** [act] Error 2
make: *** [build] Error 2",2,0
55,2019-04-02T18:12:26Z,2019-04-02T21:26:26Z,2019-04-02T21:26:26Z,1,1,1,I ran into this when trying to test an event: pull-request isn't an event type but pull_request is!,3,0
56,2019-04-08T11:03:53Z,2019-04-08T15:16:04Z,2019-04-08T15:16:04Z,3,40,2,"(Thanks for the amazing project)
I noticed when running act -l for a workflow file that had multiple workflows, it would show the actions for push under each event.
I've submitted a fix for this as well as a test to prove correct output. Feel free to butcher this PR or replace it with your own work - just happy to try help :)",2,0
57,2019-04-09T11:03:32Z,2019-05-23T06:10:06Z,2019-05-23T06:10:06Z,2,60,6,"As per the ContainerAttach() docs, a container not using a TTY has stderr and stdout multiplexed into a single stream in a Docker-specific format.
When running act and its stdout is not a terminal (e.g. when it's redirected to a file), DockerExecutorInput.logDockerOutput() is invoked -- I've changed this to use github.com/docker/docker/pkg/stdcopy.StdCopy as per Docker's suggestion.
Right now the issue is the tests pass when output is redirected to a file and fail when run directly in a terminal! ❗️ This is because of the following two conflicting pieces:

  
    
      act/container/docker_run.go
    
    
        Lines 89 to 97
      in
      f2cb9e3
    
  
  
    

        
          
           isTerminal := terminal.IsTerminal(int(os.Stdout.Fd())) 
        

        
          
            
        

        
          
           config := &container.Config{ 
        

        
          
           	Image:      input.Image, 
        

        
          
           	Cmd:        input.Cmd, 
        

        
          
           	Entrypoint: input.Entrypoint, 
        

        
          
           	WorkingDir: input.WorkingDir, 
        

        
          
           	Env:        input.Env, 
        

        
          
           	Tty:        isTerminal, 
        
    
  



  
    
      act/container/docker_run.go
    
    
        Lines 170 to 171
      in
      f2cb9e3
    
  
  
    

        
          
           isTerminal := terminal.IsTerminal(int(os.Stdout.Fd())) 
        

        
          
           if !isTerminal || os.Getenv(""NORAW"") != """" { 
        
    
  


Honestly, I'm not sure what the purpose of the NORAW env var is. If NORAW is passed in, the tests will fail in even more spectacular ways. I would like to do the following, but wanted to run it by you first before submitting this PR:

Instead of terminal.IsTerminal() in attachContainer(), we use the Docker API client to introspect the container and see if it is in TTY mode or not.
Additionally, add Tty *bool to NewDockerRunExecutorInput and only fall back to terminal.IsTerminal() if it is nil.

What are your thoughts?",2,0
65,2019-05-20T17:49:24Z,2019-05-23T06:11:25Z,2019-05-23T06:11:25Z,1,15,0,I just figured this out; might be helpful for other users.,2,0
68,2019-05-23T03:06:43Z,2019-05-23T06:15:58Z,2019-05-23T06:15:59Z,5,149,61,"closes #67

If you think this is a good addition, I'll work into fixing/adding tests and making the code cleaner :) done.
tested it locally, it works!",2,4
77,2019-09-04T12:46:59Z,2019-09-05T01:51:31Z,2019-09-05T01:51:31Z,1,4,0,I've created an AUR package for act :),3,7
78,2019-09-09T15:06:01Z,2019-09-16T21:35:52Z,2019-09-16T21:35:52Z,1,1,1,,2,0
118,2020-03-02T11:54:06Z,2020-03-02T16:11:47Z,2020-03-02T16:11:47Z,2,3,2,"Fixes #117
Currently whitespaces in secrets provided via .actrc lead to problems, because strings.Fields splits on all spaces. Now, only the first space is used for splitting. Same for = in the secret handling method.",2,0
147,2020-03-12T13:58:17Z,2020-03-12T16:54:05Z,2020-03-12T16:54:06Z,1,1,0,,2,0
152,2020-03-13T11:53:36Z,2020-03-13T14:55:21Z,2020-03-13T14:55:21Z,1,8,0,act is apparently also packaged in nix. I included installation guides in the readme.,2,0
154,2020-03-13T23:36:53Z,2020-03-14T07:00:37Z,2020-03-14T07:00:37Z,4,24,0,"Let me know if you're unhappy with this approach and I'd be happy to change it. The main alternative I could think of was threading it through to docker exec itself, but that would be a substantial change to:

  
    
      act/pkg/runner/step_context.go
    
    
         Line 42
      in
      25e1ad6
    
  
  
    

        
          
           sc.execJobContainer(), 
        
    
  



  
    
      act/pkg/runner/step_context.go
    
    
         Line 29
      in
      25e1ad6
    
  
  
    

        
          
           return sc.RunContext.execJobContainer(sc.Cmd, sc.Env)(ctx) 
        
    
  



  
    
      act/pkg/runner/run_context.go
    
    
         Line 143
      in
      25e1ad6
    
  
  
    

        
          
           return rc.JobContainer.Exec(cmd, env)(ctx) 
        
    
  



  
    
      act/pkg/container/docker_run.go
    
    
         Line 119
      in
      25e1ad6
    
  
  
    

        
          
           cr.exec(command, env), 
        
    
  



  
    
      act/pkg/container/docker_run.go
    
    
         Line 254
      in
      25e1ad6
    
  
  
    

        
          
           WorkingDir:   cr.input.WorkingDir, 
        
    
  


And of course all associated interfaces and structs.",2,2
155,2020-03-14T07:45:58Z,2020-03-16T21:58:11Z,2020-03-16T21:58:11Z,3,60,14,"Implemented as per discussion in #146. I guess the ""interesting"" thing here is the tests. It was easy enough to see that the parser no longer crashes on the array form. I wasn't able to think of a test for the ""no matching labels"" case - right now it just logs a message and skips over it silently. This was the existing behaviour, so I guess that's not a problem?",2,1
157,2020-03-15T23:30:13Z,2020-03-16T05:29:13Z,2020-03-16T05:29:13Z,1,2,0,See #156,2,0
163,2020-03-18T05:36:06Z,2020-03-18T13:55:40Z,2020-03-18T13:55:40Z,2,16,7,"I noticed that the tar file created and copied to the build container by act was taking a long time. I took a look and it was much bigger than I expected - it was including a whole lot of node_modules that should have been excluded.
It appeared that my gitignore config wasn't being respected - I have .gitignore files that aren't at the root of the repo. I switched to a different library, which happened to already be part of act. This reduced the size of the tar by a few hundred MB and sped up operations a fair bit.
I'd be happy to add a test for this, but that would be easier if I factored out the actual copy-to-container functionality into a different method. If you'd like that, let me know and I'll submit a second PR.

  
    
      act/pkg/container/docker_run.go
    
    
        Lines 392 to 395
      in
      4a4bd36
    
  
  
    

        
          
           err = cr.cli.CopyToContainer(ctx, cr.id, dstPath, tarFile, types.CopyToContainerOptions{}) 
        

        
          
           if err != nil { 
        

        
          
           	return errors.WithStack(err) 
        

        
          
           }",2,0
164,2020-03-18T11:25:18Z,,2020-07-24T00:17:31Z,5,55,119,"What was changed?
This PR replaces all custom logic used to fetch Git metadata with go-git library.
Why do we need the changes?
While working on a project I noticed act is setting an incorrect repository name & reference in the event.
This is happening due to the repositories layout I'm using: a single repo containing a number of submodules, each of those define their own workflows. Since git submodules reside in .git folder of the parent repo, act's logic of parsing .git/config wasn't working as it should.",4,5
180,2020-04-01T09:02:53Z,,2020-06-29T22:50:00Z,5,32,25,"Updates path concatenation/usage to leverage filepath.Separator (often through filepath.Join) when referencing the host OS, but explicitly using / (often through path.Join) when referencing paths in docker containers/mounts.
Update: In addition to the above, there is also a healthy amount of path normalization so that Windows paths can be compared to their Docker counterparts. This should still be cross-os friendly as well.
In theory, this should work bi-directional including when using Windows containers, as Windows is very lax with this, but I don't really have the time to test it.
Addresses #145 and possibly a chain of others related to it.

Additionally adds a go-install to make as /usr/local/bin not available, or accessible in Git Bash. There's plenty of other ways of doing this, but this met my needs.

Please let me know if I need to update anything to meet contribution guidelines I didn't follow, or changes you'd like before merging.",6,7
183,2020-04-02T07:06:15Z,2020-04-16T23:22:48Z,2020-04-16T23:22:48Z,1,5,2,This would save the trip to scoops listings to see that it isn't called act-cli there,2,0
184,2020-04-03T11:37:23Z,2020-04-17T17:04:40Z,2020-04-17T17:04:40Z,10,47,30,"As mentioned in #124 and #179, users are confused about the flag --env-file behavior.
So i think it is better to make it easier for user to use the .env file to set up some environments they want to use in the further workflow.",2,7
190,2020-04-13T17:52:28Z,2020-04-16T23:05:01Z,2020-04-16T23:05:01Z,1,1,1,"There is a 30 length hardcoded limit for containers name, which makes matrix builds with long job names unable to run due to conflicting container names (see #174)
Apparently docker does not imposes a constraint in the length of the container name, as seen in the engine code: https://github.com/docker/engine/blob/master/daemon/names.go#L59
Tested with Docker version 19.03.8, build afacb8b
Not sure if in previous versions of Docker this is a problem or not.",2,0
194,2020-04-16T09:59:12Z,2020-04-16T23:24:31Z,2020-04-16T23:24:31Z,4,45,71,"Replaces the deprecated go-git import path with the new one.
go-git has recently moved to its own organization due to the reasons mentioned in: https://github.com/go-git/go-git/wiki/go-git-has-a-new-home!-v5-and-some-explanations.
Even if it's v5 in the URL it's completely backward compatible (the reason to change the major version was the import path change itself), so everything should work exactly as it did with v4.",2,0
198,2020-04-17T07:21:41Z,,2021-01-15T00:58:31Z,3,15,12,fixes #193,4,7
201,2020-04-19T04:09:03Z,2020-04-19T18:29:35Z,2020-04-19T18:29:35Z,1,2,0,Close #200,2,0
207,2020-04-24T07:31:21Z,2020-05-04T04:15:43Z,2020-05-04T04:15:43Z,7,42,15,"DOCKER_HOST=ssh://tower-sl ../act/act works so long as you can ssh tower-sl without needing any user action.
Thanks to the re-write, it was truely trivial this time :)",2,1
221,2020-05-03T20:35:12Z,2020-05-04T03:55:21Z,2020-05-04T03:55:21Z,1,5,1,"The string comparison in step_context.go is currently case sensitive. This commit adds an error that returns the valid options and tells the user what value they passed
This will be useful if values other than docker or node12 are passed",2,0
222,2020-05-03T20:38:22Z,2020-05-04T03:59:14Z,2020-05-04T03:59:14Z,1,5,0,"Currently, providing using: Docker is an error as the switch statement in step_context.go is case sensitive.
Actions run successfully on GitHub with using: Docker leading me to believe that they're case insensitive. This commit updates act to match",2,0
223,2020-05-04T09:36:23Z,2020-05-04T12:40:12Z,2020-05-04T12:40:12Z,2,22,5,"In #222 I added case normalisation to ReadAction() to ensure that Docker and docker are interpreted the same way.
I realised that this was being done at the wrong level and required multiple type conversions. By implementing func (a ActionRunsUsing) UnmarshalYAML we can lowercase the string as it's being unserialized
This has an added benefit that any time this type is hydrated the runs.using key will be lowercased, rather than relying on ReadAction()",2,2
225,2020-05-04T13:15:08Z,2020-05-04T19:18:14Z,2020-05-04T19:18:14Z,5,155,18,"This PR adds the possibility to use envs in if conditionals like this:
- name: Some step
  if: env.SOMETHING   
  run: echo ""GREAT!""
or like this:
- name: Some step
  if: ${{ env.RUNNING_LOCALLY != 'true' }}
  run: echo ""GREAT!""
This is supported when the action runs on github, and I need it to avoid some slack messaging and deployment status updates when I test my actions locally with act.
fixes #224",2,5
229,2020-05-09T12:15:58Z,2020-05-12T07:14:57Z,2020-05-12T07:14:57Z,4,11,1,This adds the -a flag when running act to change the username of the GITHUB_ACTOR environment variable,3,3
231,2020-05-11T12:33:01Z,2020-05-13T22:22:32Z,2020-05-13T22:22:32Z,2,10,3,"Previously secrets would be shown in log output as provided. This
commit updates the stepLogFormatter to replace any instance of the secret
string with ""***"", as GitHub Actions would
Known issues: If the secret is a generic string (such as ""docker""), all
occurances of that string will be replaced in the output",2,0
238,2020-05-15T13:52:22Z,2020-05-15T19:30:50Z,2020-05-15T19:30:50Z,1,5,5,,2,0
240,2020-05-17T10:25:52Z,2020-05-18T16:53:43Z,2020-05-18T16:53:43Z,3,3,3,"Misspellings identified by the check-spelling action -- note: the spell checker is not included in this PR.
It reported: jsoref@7c7b5af#commitcomment-39231984
And it validated that the changes in this PR made it happy: jsoref@577abb3",2,0
241,2020-05-17T11:40:16Z,2020-05-18T16:55:00Z,2020-05-18T16:55:00Z,1,7,2,Add anchors for runner sections (and ⚠️ 🐘 ),2,0
243,2020-05-17T12:45:57Z,2020-05-18T21:31:10Z,2020-05-18T21:31:10Z,1,2,1,"This probably fixes #220
When I use 2f3187e (or act version 0.2.8 from brew) with:
check-spelling/check-spelling@5f7f35b
I get:
$ act -b -v 2>&1 |grep -A10 'About to run action'
time=""2020-05-17T08:12:32-04:00"" level=debug msg=""About to run action &{Check spelling jsoref Spell check commits map[bucket:{Container for spelling configuration true } debug:{Debug false } project:{Folder/Branch within bucket containing spelling configuration true } repo-token:{The GITHUB_TOKEN secret false }] map[] {node12 map[] trampoline.js  [] []} {red edit-3}}""
time=""2020-05-17T08:12:32-04:00"" level=debug msg=""type=2 actionDir=/Users/jsoref/code/spelling-org/check-spelling.git Workdir=/Users/jsoref/code/spelling-org/check-spelling.git ActionCacheDir=/Users/jsoref/.cache/act actionName=check-spelling.git containerActionDir=/github/workspace""
[Spell checking/Spell checker] Exec command '[node /github/workspace/check-spelling.git/trampoline.js]'
[Spell checking/Spell checker]   | internal/modules/cjs/loader.js:628
[Spell checking/Spell checker]   |     throw err;
[Spell checking/Spell checker]   |     ^
[Spell checking/Spell checker]   |
[Spell checking/Spell checker]   | Error: Cannot find module '/github/workspace/check-spelling.git/trampoline.js'
[Spell checking/Spell checker]   |     at Function.Module._resolveFilename (internal/modules/cjs/loader.js:625:15)
[Spell checking/Spell checker]   |     at Function.Module._load (internal/modules/cjs/loader.js:527:27)
[Spell checking/Spell checker]   |     at Function.Module.runMain (internal/modules/cjs/loader.js:839:10)
With this change, I get:
$ ~/code/nektos/act/dist/local/act -v -b 2>&1|grep -A10 'About to run action'
time=""2020-05-17T08:14:12-04:00"" level=debug msg=""About to run action &{Check spelling jsoref Spell check commits map[bucket:{Container for spelling configuration true } debug:{Debug false } project:{Folder/Branch within bucket containing spelling configuration true } repo-token:{The GITHUB_TOKEN secret false }] map[] {node12 map[] trampoline.js  [] []} {red edit-3}}""
time=""2020-05-17T08:14:12-04:00"" level=debug msg=""type=2 actionDir=/Users/jsoref/code/spelling-org/check-spelling.git Workdir=/Users/jsoref/code/spelling-org/check-spelling.git ActionCacheDir=/Users/jsoref/.cache/act actionName=check-spelling.git containerActionDir=/github/workspace""
[Spell checking/Spell checker] Exec command '[node /github/workspace/trampoline.js]'
[Spell checking/Spell checker]   | cwd: /github/workspace
[Spell checking/Spell checker]   | spellchecker: /github/workspace
[Spell checking/Spell checker]   ❓  ::add-matcher::.git/reporter.json
[Spell checking/Spell checker]   | Retrieving expect from .github/actions/spelling/expect/Dockerfile.txt
[Spell checking/Spell checker]   | .github/actions/spelling/expect/README.md.txt
[Spell checking/Spell checker]   | .github/actions/spelling/expect/action.yml.txt
[Spell checking/Spell checker]   | .github/actions/spelling/expect/check-pull-requests.sh.txt
[Spell checking/Spell checker]   | .github/actions/spelling/expect/common.sh.txt",2,0
252,2020-05-20T14:27:39Z,2020-05-20T15:37:30Z,2020-05-20T15:37:30Z,1,2,2,See macOS,2,0
256,2020-05-25T04:20:00Z,2020-05-26T16:12:18Z,2020-05-26T16:12:18Z,1,57,35,I added a Known Issues section in the readme file to document the issues that have been resolved so developers encountering those issues will find the solution quickly.,2,0
259,2020-05-27T03:37:02Z,2020-05-27T14:36:00Z,2020-05-27T14:36:00Z,3,21,6,"Currently setting workflows with the -W (--workflows) flag only accepts
a folder. It is not possible to run a single workflow.yml file.
This PR allows either a single file or a directory to be passed into
the workflows flag.
The change is quick and dirty and doesn't include support for a list (via globbing) or wildcard/globbing support.
Fixes #227",2,0
267,2020-06-06T17:07:10Z,2020-06-09T14:43:27Z,2020-06-09T14:43:27Z,1,81,30,"Act switched from checking out a branch to checking out a hash in order to resolve #24 - see bc5c23e
This had a side effect of preventing w.Pull() from updating to the latest commit if a ref was a branch/tag and the repo already exists on disk.
This commit checks if input.Ref is equivalent to the resolved hash, and runs r.Fetch() and checks out the branch for input.Ref if it is different. w.Pull() can then pull the latest changes before we checkout *hash again like normal",2,4
274,2020-06-12T10:13:59Z,2020-06-12T22:31:38Z,2020-06-12T22:31:38Z,1,1,1,https://github.com/nektos/act/blob/master/Makefile#L14,2,0
283,2020-06-18T13:50:54Z,2020-06-18T15:21:56Z,2020-06-18T15:21:56Z,4,33,10,"This can occur even without the -r flag, but it's easier to reproduce like this.
.github/workflows/workflow.yaml:
name: Example workflow

on: push

jobs:
  example:
    name: Example job
    runs-on: ubuntu-latest

    steps:
      - run: echo ""Hello"" >> file.txt
      - run: echo ""World!"" >> file.txt
      - run: cat file.txt
Now we run:
$ act -j example -r
...
| Hello
| World!
...
This is expected.
$ act -j example -r
...
| Hello
| World!
| Hello
| World!
...
This is also expected, as the -r flag means that the containers should be re-used; in other words, file.txt contains the original content from the last run, plus the new content from this run.
$ act -j example
...
| Hello
| World!
| Hello
| World!
| Hello
| World!
...
This is unexpected; the -r flag is no longer used, but the file system wasn't reset.
$ act -j example
...
| Hello
| World!
...
This is expected; after the run without -r, the volume was deleted from disk and this time we have a clean file system.
The same thing happens even when not using -r if the container clean-up doesn't run (eg. when act is terminated in the middle of a build); the file system will persist. In the code, there's a safeguard which performs an additional clean-up before every build, but this safeguard only removes the container itself, not the volume associated with it (which is not anonymous). This PR fixes that by calling runContext.stopJobContainer(...) instead of container.Remove() before the build, which removes both the container and the volume.",2,1
287,2020-06-21T18:52:49Z,2020-06-24T14:08:45Z,2020-06-24T14:08:46Z,2,101,14,"Description
This PR aims to fix #104. In a nutshell, act uses a javascript virtual machine to interpret and evaluate expressions in github actions. It works pretty well, except for expressions like object.property-with-hyphens which are correctly handled by github action runners, but not by the javascript vm.
This solution is heavily inspired by #104 (comment) written by @Shadowfiend, although the implementation diverged a little bit from the initial proposal. The idea is to tweak just a little bit the expression and transform it into object['property-with-hyphens'] which is both github actions and javascript compliant.
To do so, we introduce the Rewrite method which job is exactly the one described above, and we call it just before evaluating the expression in the javascript vm.
Explanations
⚠️ The current implementation relies on a regex hackery ( see here to test it online ), which is fairly ugly and hard to maintain. In the future, we should invest some time to implement a proper lexer/parser and a proper term rewriter. But in the short-term, this regex works.
That being said, using regex for this rewriting is really hard to get right !


Here is a snapshot of what I tried...


^[a-zA-Z][a-zA-Z0-9_]*(\.[a-zA-Z][a-zA-Z0-9_-]*|\[.+\])*$
^\w+(?:\[.+\])*(\.[\w-]+)?
^(\w+(\[.+\])*)(\.[\w-]+)?
^(\w+(?:\[.+\])*)(\.[\w-]+)?
^(\w+(?:\[.+\])*)(?:\.([\w-]+))?
^(\w+(?:\[.+\])*)(?:\.([\w-]+))?(.*)$
^(?P<object>\w+(\[.+\])*)(\.(?P<property>[\w-]+))?(?P<trailing>.*)$


One thing to keep in mind is that not all . nor not all - are bad. For instance we do not want to rewrite filenames with extension.
But also, we would need to identify strings, escaped characters, already-bracketed expressions, recursive expressions, etc.
So let's keep it simple for now. We choose to only rewrite contexts, which is a subset of expressions
https://help.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#contexts
The pattern defines three groups, as described below :
^(\w+(?:\[.+\])*)(?:\.([\w-]+))?(.*)$
  \            /       \    /    \/
   '-----.----'         \  /      Remaining characters
         |               \/
         |                First level of property using dots
         |
         Current object
         Potentially nested object, but using the bracket notation
Here is the execution of the method step by step with in := ""ecole.centrale.paris"". See also https://play.golang.org/p/bu2rO817ycU


Before entering the loop



Variable
Value




re
""ecole.centrale.paris""





First iteration



Variable
Value




matches[0]
""ecole.centrale.paris""


matches[1]
""ecole""


matches[2]
""centrale""


matches[3]
"".paris""


re
""ecole['centrale'].paris""





Second iteration



Variable
Value




matches[0]
""ecole['centrale'].paris""


matches[1]
""ecole['centrale']""


matches[2]
""paris""


matches[3]
""""


re
""ecole['centrale']['paris']""





Third iteration



Variable
Value




matches[0]
""ecole['centrale']['paris']""


matches[1]
""ecole['centrale']['paris']""


matches[2]
""""


matches[3]
""""


re
""ecole['centrale']['paris']""



Here we trigger the break condition and the function returns


Testing
Before the fix :
$ act --version
act version 0.2.9

$ act -P ubuntu-latest=node:12.6-buster-slim -W pkg/runner/testdata/issue-104
[Test stuff/Testing Testing] 🚀  Start image=node:12.6-buster-slim
[Test stuff/Testing Testing]   🐳  docker run image=node:12.6-buster-slim entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[Test stuff/Testing Testing] ⭐  Run hello
[Test stuff/Testing Testing]   ☁  git clone 'https://github.com/actions/hello-world-docker-action' # ref=master
ERRO[0001] Unable to interpolate string '${{ inputs.who-to-greet }}' - [ReferenceError: 'to' is not defined]
[Test stuff/Testing Testing]   🐳  docker build -t act-actions-hello-world-docker-action-master:latest /Users/ayaz.badouraly/.cache/act/actions-hello-world-docker-action@master
[Test stuff/Testing Testing]   🐳  docker run image=act-actions-hello-world-docker-action-master:latest entrypoint=[] cmd=[""""]
| Hello
[Test stuff/Testing Testing]   ⚙  ::set-output:: time=Sun Jun 21 17:15:37 UTC 2020
[Test stuff/Testing Testing]   ✅  Success - hello
After the fix :
$ go run . -P ubuntu-latest=node:12.6-buster-slim -W pkg/runner/testdata/issue-104
[Test stuff/Testing Testing] 🚀  Start image=node:12.6-buster-slim
[Test stuff/Testing Testing]   🐳  docker run image=node:12.6-buster-slim entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[Test stuff/Testing Testing] ⭐  Run hello
[Test stuff/Testing Testing]   ☁  git clone 'https://github.com/actions/hello-world-docker-action' # ref=master
[Test stuff/Testing Testing]   🐳  docker build -t act-actions-hello-world-docker-action-master:latest /Users/ayaz.badouraly/.cache/act/actions-hello-world-docker-action@master
[Test stuff/Testing Testing]   🐳  docker run image=act-actions-hello-world-docker-action-master:latest entrypoint=[] cmd=[""World""]
| Hello World
[Test stuff/Testing Testing]   ⚙  ::set-output:: time=Sun Jun 21 17:16:33 UTC 2020
[Test stuff/Testing Testing]   ✅  Success - hello
References

Expressions in github actions
Dot notation vs. bracket notation
Test the regex online
Test the rewrite function online
École Centrale Paris",5,7
288,2020-06-21T19:38:44Z,2020-06-23T18:57:25Z,2020-06-23T18:57:25Z,3,38,1,"Will hopefully fix #228
This patch checks for the presence of a .gitignore file in a remote repository action, and removes it before running docker cp.
I'm not too aware of how the project works and its structure, I'm not even sure that's the way you'd like to address this issue, so please let me know how you feel about it, and feel free to discard it or ask me for edits :)
Thanks again for your time",3,2
290,2020-06-24T07:51:05Z,2020-06-24T14:05:06Z,2020-06-24T14:05:06Z,2,4,4,#273,2,0
293,2020-06-25T03:22:36Z,2021-03-30T19:26:25Z,2021-03-30T19:26:26Z,16,96,23,"#246
I'm not claiming this is absolutely correct.
.github/workflows/scrape.yml:
name: Update Price
on: push

jobs:
  scrape:

    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [13.x]

    steps:
      - uses: actions/checkout@v2
      - name: Use Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v1.4.2
        with:
          node-version: ${{ matrix.node-version }}
      - name: npm install, build, & run
        run: |
          npm i -g yarn
          yarn install
      - name: Run price check
        uses: ianwalter/puppeteer@cbdd5c50c8d6b6275cdf46e4ad2b3f7ee61211ce
        with:
            args: yarn run update-price
      - name: Deploy to gh-pages
        uses: peaceiris/actions-gh-pages@v3
        with:
            github_token: ${{ secrets.GITHUB_TOKEN }}
            publish_dir: ./data
$ act -j scrape
WARN[0000] unable to get git repo: section 'remote ""origin""' does not exist
[Update Price/scrape] 🧪  Matrix: map[node-version:13.x]
[Update Price/scrape] 🚀  Start image=node:12.6-buster-slim
WARN[0000] unable to get git repo: section 'remote ""origin""' does not exist
[Update Price/scrape]   🐳  docker run image=node:12.6-buster-slim entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[Update Price/scrape]   🐳  docker cp src=/Users/jsoref/code/spelling-org/examples.git/. dst=/github/workspace
WARN[0000] unable to get git repo: section 'remote ""origin""' does not exist
WARN[0000] unable to get git repo: section 'remote ""origin""' does not exist
[Update Price/scrape] ⭐  Run actions/checkout@v2
WARN[0000] unable to get git repo: section 'remote ""origin""' does not exist
[Update Price/scrape]   ✅  Success - actions/checkout@v2
ERRO[0000] Unable to interpolate string '${{ matrix.node-version }}' - [ReferenceError: 'version' is not defined]
WARN[0000] unable to get git repo: section 'remote ""origin""' does not exist
WARN[0000] unable to get git repo: section 'remote ""origin""' does not exist
[Update Price/scrape] ⭐  Run Use Node.js ${{ matrix.node-version }}
[Update Price/scrape]   ☁  git clone 'https://github.com/actions/setup-node' # ref=v1.4.2
[Update Price/scrape]   🐳  docker cp src=/Users/jsoref/.cache/act/actions-setup-node@v1.4.2 dst=/actions/
| [command]/usr/local/bin/node --version
| v12.6.0
| [command]/usr/local/bin/npm --version
| 6.9.0
[Update Price/scrape]   ❓  ##[add-matcher]/actions/actions-setup-node@v1.4.2/.github/tsc.json
[Update Price/scrape]   ❓  ##[add-matcher]/actions/actions-setup-node@v1.4.2/.github/eslint-stylish.json
[Update Price/scrape]   ❓  ##[add-matcher]/actions/actions-setup-node@v1.4.2/.github/eslint-compact.json
[Update Price/scrape]   ✅  Success - Use Node.js ${{ matrix.node-version }}
WARN[0002] unable to get git repo: section 'remote ""origin""' does not exist
WARN[0002] unable to get git repo: section 'remote ""origin""' does not exist
[Update Price/scrape] ⭐  Run npm install, build, & run
/usr/local/bin/yarnpkg -> /usr/local/lib/node_modules/yarn/bin/yarn.js
| /usr/local/bin/yarn -> /usr/local/lib/node_modules/yarn/bin/yarn.js
| + yarn@1.22.4
| added 1 package in 0.775s
yarn install v1.22.4
info No lockfile found.
[1/4] Resolving packages...
[2/4] Fetching packages...
[3/4] Linking dependencies...
[4/4] Building fresh packages...
success Saved lockfile.
Done in 0.17s.
[Update Price/scrape]   ✅  Success - npm install, build, & run
WARN[0004] unable to get git repo: section 'remote ""origin""' does not exist
WARN[0004] unable to get git repo: section 'remote ""origin""' does not exist
[Update Price/scrape] ⭐  Run Run price check
[Update Price/scrape]   ☁  git clone 'https://github.com/ianwalter/puppeteer' # ref=cbdd5c50c8d6b6275cdf46e4ad2b3f7ee61211ce
[Update Price/scrape]   🐳  docker cp src=/Users/jsoref/.cache/act/ianwalter-puppeteer@cbdd5c50c8d6b6275cdf46e4ad2b3f7ee61211ce dst=/actions/
[Update Price/scrape]   ✅  Success - Run price check
WARN[0005] unable to get git repo: section 'remote ""origin""' does not exist
WARN[0005] unable to get git repo: section 'remote ""origin""' does not exist
[Update Price/scrape] ⭐  Run Deploy to gh-pages
[Update Price/scrape]   ☁  git clone 'https://github.com/peaceiris/actions-gh-pages' # ref=v3
[Update Price/scrape]   🐳  docker cp src=/Users/jsoref/.cache/act/peaceiris-actions-gh-pages@v3 dst=/actions/
[Update Price/scrape]   ❓  ::group::Dump inputs
| [INFO] : true
| [INFO] PublishBranch: gh-pages
| [INFO] PublishDir: ./data
| [INFO] ExternalRepository:
| [INFO] AllowEmptyCommit: false
| [INFO] KeepFiles: false
| [INFO] ForceOrphan: false
| [INFO] UserName:
| [INFO] UserEmail:
| [INFO] CommitMessage:
| [INFO] FullCommitMessage:
| [INFO] TagName:
| [INFO] TagMessage:
| [INFO] EnableJekyll (DisableNoJekyll): false
| [INFO] CNAME:
|
[Update Price/scrape]   ❓  ::endgroup::
[Update Price/scrape]   ❗  ::error::Action failed with ""Cannot read property 'fork' of undefined""
[Update Price/scrape]   ❌  Failure - Deploy to gh-pages
Error: exit with `FAILURE`: 1
Tentative, based on further comments in the original issue:
.github/workflows/docker-login.yml:
name: Log into Docker
on: push

jobs:
  login:

    runs-on: ubuntu-latest

    steps:
      - name: Trigger docker login
        uses: actions-hub/docker/login@master
$ act -j login
WARN[0000] unable to get git repo: section 'remote ""origin""' does not exist
[Log into Docker/login] 🚀  Start image=node:12.6-buster-slim
WARN[0000] unable to get git repo: section 'remote ""origin""' does not exist
[Log into Docker/login]   🐳  docker run image=node:12.6-buster-slim entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
WARN[0000] unable to get git repo: section 'remote ""origin""' does not exist
WARN[0000] unable to get git repo: section 'remote ""origin""' does not exist
[Log into Docker/login] ⭐  Run Trigger docker login
[Log into Docker/login]   ☁  git clone 'https://github.com/actions-hub/docker' # ref=master
WARN[0000] unable to get git repo: section 'remote ""origin""' does not exist
[Log into Docker/login]   🐳  docker build -t act-actions-hub-docker-login-master:latest /Users/jsoref/.cache/act/actions-hub-docker-login@master/login
[Log into Docker/login]   🐳  docker run image=act-actions-hub-docker-login-master:latest entrypoint=[] cmd=[]
[Log into Docker/login]   ❗  ::error::Not authorized. Please check if DOCKER_USERNAME and DOCKER_PASSWORD provided. Exiting....
[Log into Docker/login]   ❌  Failure - Trigger docker login
Error: exit with `FAILURE`: 1
I suspect both cases will want some other fields to be able to migrate over, but I think I'll leave that for later (when someone identifies them, or for someone else to implement).",3,12
304,2020-07-09T23:02:51Z,2020-07-13T16:39:23Z,2020-07-13T16:39:24Z,2,4,4,"Swaps comments on StepTypeUsesActionLocal, StepTypeUsesActionRemote
gofmt on pkg/runner/expression_test.go",2,0
308,2020-07-18T19:12:07Z,2020-07-20T14:33:30Z,2020-07-20T14:33:30Z,1,6,5,This allows for easier packaging of act for Homebrew.,2,0
309,2020-07-18T19:50:03Z,2020-07-20T14:35:44Z,2020-07-20T14:35:44Z,1,14,14,"testify has a method NoError that is specifically for asserting that the err you have is nil. If failed it emits a message about the unexpected error. https://github.com/stretchr/testify/blob/master/assert/assertions.go#L1332
go 1.14 introduced t.Cleanup its useful when you need to do something at the end of a test. Like cleaning up files.",2,1
313,2020-07-20T19:20:19Z,2020-07-21T13:50:15Z,2020-07-21T13:50:15Z,2,9,1,"This PR fixes an issue caused by a missing interpretation of the default values.
The default values are now interpreted and this workflow works as expected:
# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the master branch
on:
  push:
    branches: 
      - ""*""
  pull_request:
    branches:
      - ""*""

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called ""build""
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
    # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
    - name: LaTeX compilation
      uses: dante-ev/latex-action@v0.2.0
      with:
        # The root LaTeX file to be compiled
        root_file: ""$GITHUB_WORKSPACE/document.tex""",3,1
314,2020-07-21T08:11:31Z,2020-07-21T13:51:34Z,2020-07-21T13:51:34Z,2,2,1,"Hey 👋 thx for amazing work!
I needed to load secrets from a file and found the solution in issues, would be nice to add it to README :)
#279",2,1
318,2020-07-26T13:05:46Z,2020-07-26T23:36:42Z,2020-07-26T23:36:42Z,1,5,0,"Makefiles should declare non-file targets as PHONY

https://www.gnu.org/software/make/manual/html_node/Phony-Targets.html
https://unix.stackexchange.com/a/321947",2,0
320,2020-07-26T15:25:45Z,2020-07-26T23:35:44Z,2020-07-26T23:35:44Z,1,1,0,Fixes #319,3,0
326,2020-08-01T20:32:10Z,2020-08-02T02:05:25Z,2020-08-02T02:05:25Z,1,1,1,"in actions/hello-world-javascript-action#14 , they changed the default branch of actions/hello-world-javascript-action.
The new default branch name is main. master has deprecated.
This PR change to use stable tag v1. maybe become stable CI.",2,0
327,2020-08-01T20:48:21Z,2020-08-03T04:53:59Z,2020-08-03T04:54:00Z,6,8,0,Subject Says It All!,3,3
334,2020-08-08T13:52:08Z,2020-08-08T20:31:27Z,2020-08-08T20:31:27Z,4,14,3,"File permission bits requires octal literals. So I prepend 0 simply.
I used go test -run '^TestRunEvent$/job-container-non-root' ./... for test.",2,0
343,2020-08-21T20:49:31Z,2020-08-28T18:52:26Z,2020-08-28T18:52:26Z,4,60,4,"I encountered this while testing a workflow for an image without bash.  I added this quickly to unblock myself, but please let me know if you'd like me to change the approach; I didn't think too much about what would be idiomatic.  Also, thanks a lot for this useful tool.
I believe this fixes #214.",2,0
347,2020-08-26T10:25:19Z,2020-08-28T18:45:04Z,2020-08-28T18:45:04Z,2,13,8,bump docker/docker to its latest release.,2,1
348,2020-08-29T09:28:07Z,2020-08-30T05:55:23Z,2020-08-30T05:55:23Z,5,49,44,"A better #347, hopefully.
the new pipeline with goreleaser should ensure that it compiles nicely on Windows as well.",2,0
349,2020-08-31T20:34:32Z,2020-08-31T21:50:02Z,2020-08-31T21:50:02Z,1,5,0,"Fixes #340 - this just makes the error a bit more understandable if a user has an empty workflow file.
Alternatively, I could simply wrap the error in all cases so that it's decorated with the file.Name(), that might be more broadly useful?
(trying to learn the codebase through some small PRs, thanks in advance!!)",2,0
352,2020-09-01T17:13:06Z,2020-09-01T20:55:30Z,2020-09-01T20:55:30Z,2,17,0,resolve #350,3,3
354,2020-09-01T21:21:48Z,2020-09-02T14:56:45Z,2020-09-02T14:56:45Z,4,40,0,This sets the ${{github.event.repository.default_branch}} to master by default or the value specified in a new --defaultbranch flag. This could also be extended to lookup the value from the git setting git config --get init.defaultBranch if the working directory is in a git repo.,2,0
360,2020-09-07T12:59:40Z,2020-09-15T14:00:15Z,2020-09-15T14:00:15Z,1,1,1,#359,2,2
367,2020-09-15T22:45:30Z,,2021-01-31T00:30:40Z,1,16,0,"On a mac, the Docker Daemon installed, you have to run a few extra commands to get docker to work with act.",4,7
369,2020-09-19T12:58:26Z,2020-09-22T21:13:30Z,2020-09-22T21:13:30Z,3,11,5,"Hi, I have a problem with GITHUB_RUN_ID.
the action actions/upload-artifact need to use GITHUB_RUN_ID, but act define it to 1, I suspect if there is a way to pass in a custom value, like use .env GITHUB_RUN_ID?
I submit a pr for this, would you give some advice?
jobs:
  print:
    name: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/upload-artifact@v2
         with:
           name: test
           path: ./test.txt",3,3
371,2020-09-25T17:05:20Z,2020-09-29T20:39:45Z,2020-09-29T20:39:46Z,15,6206,10,"This changes makes it so that the proper path is used when executing a local javascript (node12) action.
Additional minor changes:

Updated Makefile

Updated make test to be functional by running expected go test task based on README.md
Added make format to format based on CONTRIBUTING.md
Made GITHUB_TOKEN be set only once instead of re-executing cat per target.


Update expression_tests to retain previous behaviour (when no file matched) now that a package-lock.json file exists in testdata.

Fixes #185",2,4
372,2020-09-27T01:05:37Z,2020-09-28T15:22:42Z,2020-09-28T15:22:43Z,1,1,0,"fixes #333
CI=true should be defined in the env to match GitHub Actions environment.
docs: default-environment-variables",2,0
381,2020-10-03T00:07:53Z,2020-10-06T17:02:38Z,2020-10-06T17:02:38Z,1,1,1,"Fixes #209
It turns out that act does copy symlinks. I've setup a test case here:
lyleunderwood/github-actions-demo@d904f63
Below is the output. Notice the message, ""Unable to copy link test --> README.md"" followed shortly by the description and usage of the corresponding symlink that exists within the workspace.
lyle@lyle-t410:~/dev/github-actions-demo$ act
[CI/test] 🚀  Start image=node:12.6-buster-slim
[CI/test]   🐳  docker run image=node:12.6-buster-slim entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[CI/test]   🐳  docker cp src=/home/lyle/dev/github-actions-demo/. dst=/github/workspace
[CI/test] Unable to copy link test --> README.md
[CI/test] ⭐  Run actions/checkout@v2
[CI/test]   ✅  Success - actions/checkout@v2
[CI/test] ⭐  Run ls -l ./test
| lrwxrwxrwx 1 node node 9 Oct  2 23:51 ./test -> README.md
[CI/test]   ✅  Success - ls -l ./test
[CI/test] ⭐  Run head ./test
| # Overview
| Simple Node.js application to demonstrate the use of GitHub Actions
| 
| # Look Ma, no Makefile!
| All the tasks necessary for testing, building and deploying this code is already defined in `.github/workflows/` so why would you want to also create a `Makefile` for local development?  Now you can use [act](https://github.com/nektos/act) to run the actions locally!
| 
| Try these:
| 
| * `act -j lint` - run the linter
| * `act -j test` - run the tests
[CI/test]   ✅  Success - head ./test",2,0
382,2020-10-06T00:02:32Z,2020-10-12T17:26:23Z,2020-10-12T17:26:23Z,4,71,1,"Issue #260
Simplifies the output of -l into a more standard table view.
Also allows for ID discovery, to go with the -j flag.
For this repo:
Before:
# act -l
    ╭──────╮ ╭──────╮
    │ lint │ │ test │
    ╰──────╯ ╰──────╯
            ⬇
 ╭─────────╮ ╭──────────╮
 │ release │ │ snapshot │
 ╰─────────╯ ╰──────────╯

After:
# act -l
ID        Stage  Name      
lint      0      Lint      
test      0      Test      
snapshot  1      Snapshot  
release   1      Release   

For alephzero repo:
Before:
# act -l
 ╭──────────────────────────────╮ ╭───────────────────────────╮ ╭───────────────────╮ ╭──────────────────────╮ ╭──────────────────────────╮ ╭────────────╮ ╭──────────────╮ ╭──────────╮ ╭────────────────────────────╮ ╭───────────────╮ ╭─────────────╮ ╭────────────╮ ╭─────────────────────────────╮ ╭──────────────────╮ ╭────────╮
 │ Undefined Behavior Sanitizer │ │ Ubuntu Bionic Default GCC │ │ Address Sanitizer │ │ Include What You Use │ │ Ubuntu Focal Default GCC │ │ Clang-Tidy │ │ Alpine Clang │ │ Valgrind │ │ Ubuntu Focal Default Clang │ │ Code Coverage │ │ Alpine Musl │ │ Alpine GCC │ │ Ubuntu Bionic Default Clang │ │ Thread Sanitizer │ │ Format │
 ╰──────────────────────────────╯ ╰───────────────────────────╯ ╰───────────────────╯ ╰──────────────────────╯ ╰──────────────────────────╯ ╰────────────╯ ╰──────────────╯ ╰──────────╯ ╰────────────────────────────╯ ╰───────────────╯ ╰─────────────╯ ╰────────────╯ ╰─────────────────────────────╯ ╰──────────────────╯ ╰────────╯

After:
# act -l
ID            Stage  Name                          
ubsan         0      Undefined Behavior Sanitizer  
iwyu          0      Include What You Use          
tsan          0      Thread Sanitizer              
clang_tidy    0      Clang-Tidy                    
bionic_gcc    0      Ubuntu Bionic Default GCC     
alpine_musl   0      Alpine Musl                   
asan          0      Address Sanitizer             
focal_gcc     0      Ubuntu Focal Default GCC      
format        0      Format                        
cov           0      Code Coverage                 
alpine_gcc    0      Alpine GCC                    
valgrind      0      Valgrind                      
bionic_clang  0      Ubuntu Bionic Default Clang   
focal_clang   0      Ubuntu Focal Default Clang    
alpine_clang  0      Alpine Clang",2,5
383,2020-10-07T01:19:24Z,2020-10-09T05:28:02Z,2020-10-09T05:28:02Z,1,8,0,"When we originally downloaded this tool and ran it. It appeared to do nothing. What actually happened was we had no push events in our repo. We turned up logging and didn't get any more helpful information. This adds enough to be helpful.
Adds more Logs for #32",2,1
386,2020-10-08T09:23:56Z,2020-10-09T05:30:50Z,2020-10-09T05:30:51Z,3,35,17,"…Path.join is OS aware, so when we want to use forward slash use path.join instead.
on windows docker cp should end with . when copying a directory
when running npm modules we should pass in path with all forward slashes
This fixes #331",4,6
395,2020-10-17T02:41:32Z,2020-10-17T14:38:54Z,2020-10-17T14:38:54Z,1,2,1,"Hey, great project
Found the --secret-file documented in the Flags section but not in the Secrets, where it also needs to be mentioned.
#279",2,0
399,2020-10-21T11:41:29Z,2020-10-21T15:09:40Z,2020-10-21T15:09:40Z,1,7,1,"Add the command structure and another example for a non-default event command to make the usage more clear.
Of course, a user can run act --help to see the information but I think it would be beneficial to directly state that in the documentation 🙂",2,0
404,2020-10-30T23:09:47Z,2020-11-02T13:40:47Z,2020-11-02T13:40:47Z,2,47,1,"fix #403
Hi, by the issue, I suppose that we should unescape the command string, I made a pr, please review it if you have time. Thanks!",2,7
406,2020-11-02T19:38:01Z,2020-11-02T21:56:20Z,2020-11-02T21:56:20Z,1,6,5,"To make the handling of ExtraPath portable append it to the front of the
PATH when it exists, instead of always changing the script.",2,2
411,2020-11-09T16:00:39Z,2020-11-09T17:08:57Z,2020-11-09T17:08:58Z,2,10,5,"fixes #324
I don't know any Go, so double check this.
No idea if this needs some file dedup or if the hashes match the GitHub Actions version, this is just to make sure the same *.yaml code doesn't fail in act while it works in the GH Actions runner",3,1
412,2020-11-09T20:29:54Z,2020-11-12T16:15:10Z,2020-11-12T16:15:11Z,5,107,33,"I discovered that table based tests must have define assert := a.New(t) inside the t.Run internal func.
If not, the assert wasn't actually asserting correctly 🙈
This lead to the discovery of some test cases that wasn't actually working.
I had to make several changes to the EvalBool function support all the permutations of negations, envs and interpolations
Fixes #387",2,1
413,2020-11-10T17:01:11Z,2020-11-10T22:55:29Z,2020-11-10T22:55:29Z,1,1,1,"Uses rc.ExprEval.Interpolate on container image.

fixes #376

Tested using my own matrix job, which worked nicely :)",2,0
415,2020-11-11T12:04:03Z,2020-12-08T18:13:08Z,2020-12-08T18:13:08Z,4,42,10,"The include of the matrix strategy was incorrectly handled.
This simply appends the provided includes to the matrix product, s.t. this works (taken from the official doc)
runs-on: ${{ matrix.os }}
strategy:
  matrix:
    os: [macos-latest, windows-latest, ubuntu-18.04]
    node: [4, 6, 8, 10]
    include:
      # includes a new variable of npm with a value of 2
      # for the matrix leg matching the os and version
      - os: windows-latest
        node: 4
        npm: 2
Also replaces the comparison of the commonKeysMatch() with a reflect.DeepEqual to be able to compare maps.
Potentially the entire loop could be replaced that way`
PS:
I do not know how testing works in this project, so I cannot easily add one. But I have seen, that neither include nor exclude appears to be tested.",2,1
417,2020-11-12T09:16:28Z,2020-11-18T15:14:35Z,2020-11-18T15:14:35Z,4,31,0,"This can be used to skip certain steps that you don't want to run locally
when testing. E.g. steps that sends messages to Slack channels on successful
builds etc.",3,4
423,2020-11-16T21:43:55Z,2021-01-13T00:02:54Z,2021-01-13T00:02:54Z,2,42,26,"This is a solution to issue #416 where environment variables created or
changed in the previous step are not usable in the next step because
the rc.ExprEval is from the beginning of the previous step.
This change refactors setupEnv so that before interpolating the environment
variables a NewExpressionEvaluator is created.
Fixes: 416",4,13
424,2020-11-16T22:46:26Z,2020-11-17T17:31:06Z,2020-11-17T17:31:07Z,6,762,117,"I had take another stab at fixing the Interpolation and EvalBool functions so their results match the somewhat weird ones performed by live Github actions.
I've added some auto generated workflows that verifies that the assumptions we make about how Github evaluates stuff is actually true. So the EvalBool test in run_context_test.go no checks that act evaluates expression and booleans the same as Github does.

I had to make some really weird exceptions to make it work though, to me it seems that the expression parser that the Github actions runner either has some bugs or the developers has made some strange design choices.
I've tried to explain the weirdness in the comments here: https://github.com/unacast/act/blob/eval_and_interpolation/pkg/runner/run_context.go#L289
The test-expressions.yml and test-if.yml workflow files are auto generated every time the expression and run_context tests are run, to make sure that future changes to the tests (because the code has changed) or to the Github actions runner are detected.
Some of the issues that this PR tries to solve are described in #353 and #366
Fixes #353
Fixes #366",2,2
426,2020-11-20T00:43:36Z,2021-01-12T06:39:44Z,2021-01-12T06:39:44Z,16,492,107,"This PR attempts to add support for the new Environment Files since the ::set-env command has been deprecated.
I found a way to download a tar of the envs.txt file that I've assigned to $GITHUB_ENV from a previous step's container and merge the contents into the env map that is passed to the next step.
It's possible that there are more elegant ways of doing this, but I couldn't find any other way of getting access to that file between steps.
UPDATE: I did an new attempt at solving this using the existing command handler, but it didn't work as the new way of setting the envs uses the >> to file syntax. That output can be generated from any command that's called within the run: and as far as I understand that can't be intercepted in the command handler.
DEPRECATION? We should probably add a warning or an error if you try to use the old and deprecated ::set-env syntax, but I'm not sure how to best handle that @cplee
Fixes #384",4,6
429,2020-11-22T20:15:48Z,2020-11-30T05:45:12Z,2020-11-30T05:45:12Z,1,58,51,"This will allow other tests to be created in runner_test.go that can
be tested individually.",2,1
434,2020-11-30T08:01:37Z,2021-01-12T06:35:58Z,2021-01-12T06:35:58Z,1,24,0,"If there are custom hooks in ~/.git_template/hooks, they can occur an error on such as pre-commit hooks.
I have a pre-commit hook in the template dir:
function must()
{
	local v=$(git config --get $1)
	if ! [[ $v = $2 ]]
	then
		echo >&2 ""$1=$v: must match $2""
		exit 1
	fi
}

must user.name xxx
must user.email xxx@example.com",2,0
459,2021-01-03T02:51:08Z,2021-01-08T08:26:21Z,2021-01-08T08:26:21Z,1,2,0,Fixes #458,2,0
460,2021-01-08T01:32:45Z,2021-01-12T06:28:46Z,2021-01-12T06:28:46Z,4,15,7,Closes #448,2,0
461,2021-01-08T01:37:36Z,2021-01-12T06:41:36Z,2021-01-12T06:41:36Z,1,10,0,Closes #447,2,0
462,2021-01-08T01:43:55Z,2021-01-12T06:27:17Z,2021-01-12T06:27:17Z,1,2,2,Should resolve #451 for now,2,0
463,2021-01-08T01:51:04Z,2021-01-12T06:22:54Z,2021-01-12T06:22:54Z,2,2,0,"Closes #444
(previous PR: #445)",2,0
470,2021-01-12T15:00:03Z,2021-01-12T17:54:53Z,2021-01-12T17:54:54Z,3,15,0,This should resolve #230,2,2
471,2021-01-14T08:00:14Z,2021-01-15T05:24:18Z,2021-01-15T05:24:18Z,4,44,15,"I've fixed ""reference not found"" error at #433.
However, in some case, it still occurs ""Unable to checkout refs/heads/xx: reference not found"" error on checkout. This pull request fixes that error.
ref #433 (comment)
Note:

I added two references to the external repositories for testing. Are there ok?
Currently, refName is used only for logging. sourceRef could be able to unify sourceRef into refName.",2,0
472,2021-01-14T08:04:39Z,2021-01-15T05:37:39Z,2021-01-15T05:37:39Z,6,8,11,I did.,2,0
474,2021-01-14T16:56:44Z,2021-01-15T05:26:02Z,2021-01-15T05:26:02Z,2,12,0,"Resolves #473
Unfortunately -e is used by --eventpath, but in my opinion it would be more intuitive to use -e as a shorthand for --env (like in docker run)",2,0
476,2021-01-14T21:44:50Z,2021-01-15T05:21:45Z,2021-01-15T05:21:45Z,2,18,5,Update parts of repo,2,0
477,2021-01-14T22:58:50Z,2021-01-15T05:20:17Z,2021-01-15T05:20:17Z,1,2,2,"Hello,
In the current readme I found a little confusion in these two sections
https://github.com/nektos/act#use-an-alternative-runner-image
https://github.com/nektos/act#configuration
The image is named ubuntu-latest while it actually uses at the end the ubuntu-18.04
the current command
act -P ubuntu-latest=nektos/act-environments-ubuntu:18.04
My fix
act -P ubuntu-18.04=nektos/act-environments-ubuntu:18.04
its a small  change but I think it fix the small confusion
Thanks",3,4
478,2021-01-15T04:07:31Z,2021-01-15T05:19:25Z,2021-01-15T05:19:25Z,1,4,3,"Make stale bot action less aggressive
Days before marking issues/PRs as stale: 30
Days before closing stale issues/PRs: 14
Currently it closes/marks as stale many issues/PRs because there is no one to work on those or review them.",2,0
483,2021-01-17T19:00:29Z,2021-01-19T14:30:18Z,2021-01-19T14:30:18Z,3,81,9,"Add survey during first run for a default image
@cplee Finally had a moment to draft that up, let me know how you see it",3,3
485,2021-01-18T00:11:05Z,2021-01-18T19:44:28Z,2021-01-18T19:44:28Z,2,6,3,Fixes #482,2,1
486,2021-01-18T00:29:09Z,2021-01-18T19:42:56Z,2021-01-18T19:42:56Z,3,15,8,"Add option to detect event type from workflow, closes #484, should close #317",2,0
488,2021-01-19T05:20:34Z,2021-01-19T14:31:47Z,2021-01-19T14:31:47Z,2,2,2,Closes #357 (somehow I completely forgot about that issue),2,0
494,2021-01-20T22:35:59Z,2021-01-21T14:02:49Z,2021-01-21T14:02:49Z,1,8,0,Closes #492,2,0
495,2021-01-21T12:22:47Z,2021-01-21T14:00:34Z,2021-01-21T14:00:34Z,1,9,2,"I changed uses: directive syntax to the same behavior to the current GitHub Actions.
Closes #438
After this changes was merged, act started with the workflow having invalid uses directive will stop with an invalid syntax error, like:
% new-act push
[Continuous integration/check] 🚀  Start image=catthehacker/ubuntu:act-latest
[Continuous integration/check]   🐳  docker run image=catthehacker/ubuntu:act-latest entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[Continuous integration/check]   🐳  docker cp src=(snip) dst=/github/workspace
[Continuous integration/check] ⭐  Run actions/checkout@v2
[Continuous integration/check]   ✅  Success - actions/checkout@v2
[Continuous integration/check] ⭐  Run OskarStark/php-cs-fixer-ga
[Continuous integration/check]   ❌  Failure - OskarStark/php-cs-fixer-ga
Error: Expected format {org}/{repo}[/path]@ref. Actual 'OskarStark/php-cs-fixer-ga' Input string was not in a correct format.",2,0
500,2021-01-22T08:54:34Z,2021-01-23T16:07:29Z,2021-01-23T16:07:29Z,6,73,17,"This closes #402, closes #487",2,1
502,2021-01-23T18:15:23Z,2021-02-08T17:14:13Z,2021-02-08T17:14:14Z,2,77,10,"Closes #496
Notes:
strings.Builder.WriteRune and others describes:

It returns the length of r and a nil error.

So I added //nolint comment to each statement.",2,2
503,2021-01-23T19:09:26Z,2021-01-23T22:55:55Z,2021-01-23T22:55:55Z,2,13,1,"This fixes #499, where a matrix strategy with only include keys ends up
causing multiple builds.  This bug appears to have been introduced in #415,
when extra include keys are added in the matrix strategy.  The cause
seems to be because the CartesianProduct function returns an item with
empty keys, instead of returning an empty set, when given an empty set.",2,0
508,2021-01-29T08:28:37Z,2021-01-29T14:40:14Z,2021-01-29T14:40:14Z,1,52,52,"Hi,
Like what I posted at #483 (comment)
I made a pr for that, how do you think it?
@cplee @catthehacker",3,1
512,2021-01-31T02:46:27Z,2021-02-08T17:15:52Z,2021-02-08T17:15:52Z,3,86,0,"This should help get us a bit more well-formatted issues and get minimum required info

  Issues



  Creating new issue",2,0
514,2021-02-02T22:17:41Z,2021-04-02T20:40:45Z,2021-04-02T20:40:45Z,11,236,16,"This is my first attempt at implementing #339. It supports most features I've tested (using this repo) including using inputs and outputs. One missing feature is using the Default value of an input that is not provided.
Before going too far I wanted to get feedback on how to implement some functionality. For convenience I put most of the logic into the runAction method, but I'm sure there are better ways to organize this code.
The first problem I ran into is that ${{ github.action_path }} was getting interpolated to an empty string. The quick fix was just to do strings.ReplaceAll on the Run field.
The next problem was that outputs from the action were not available due to them being associated with the wrong step. Considering this example, the action declares an output called random-number. But the value must be retrieved from the random-id output of the random-number-generator step.
The hacky way I solved this was to add OutputMappings to the RunContext which is used to map outputs from action steps to outputs of the action itself. The CurrentStep of the RunContext also needed to be updated to the ID of the step within the action to know whether the value needs to be mapped. When the action is run, all of the outputs are parsed into this map which is later used by setOutput.
Using the above example, the random number will be stored in rc.StepResults[foo].Outputs[random-number] instead of rc.StepResults[foo].Outputs[random-id].",8,12
515,2021-02-03T09:44:59Z,2021-02-03T19:12:15Z,2021-02-03T19:12:15Z,1,9,7,"This should fix #457
tar and gzip are already available in the image, but I left them in the RUN just in case.",2,0
523,2021-02-08T14:21:50Z,2021-02-08T17:12:58Z,2021-02-08T17:12:58Z,2,53,26,"README.md:

Minor formatting fixes
Added more instructions/explanations

cmd/root.go:

Based on recent conversations on nektos/act on Gitter, adding notice about large image and link to repository for .actrc reference
Seems like people discover act and don't read README
possible improvements for future:

provide help subcommand that will include what README.md has
???",2,0
524,2021-02-08T18:58:27Z,2021-02-23T17:49:25Z,2021-02-23T17:49:25Z,11,23,23,Updates all images to their latest releases,2,0
525,2021-02-08T21:12:10Z,2021-03-29T04:08:41Z,2021-03-29T04:08:41Z,16,1254,164,Closes #493,3,3
529,2021-02-12T14:50:02Z,2021-02-12T16:28:27Z,2021-02-12T16:28:27Z,1,1,1,"fixes #528
Co-authored-by: Hugh Lunt hugh.lunt@itv.com",2,0
530,2021-02-16T13:46:59Z,2021-02-23T17:50:28Z,2021-02-23T17:50:29Z,2,13,2,"Hi,
This is a fix for an error that occurred when using commit hash in use
fixes #506",2,0
531,2021-02-16T13:53:19Z,2021-02-17T19:48:00Z,2021-02-17T19:48:00Z,1,7,8,Fix indent with gofmt,2,0
533,2021-02-16T21:12:04Z,2021-02-27T16:31:25Z,2021-02-27T16:31:25Z,7,9,0,"Hello. I got an error like this after hitting act command.

Error: Error response from daemon: cannot share the host's network namespace when user namespaces are enabled

According to the document (link), when user namespaces are enabled on the Docker daemon, neither host network mode and --privileged work without --userns=host. Since act uses host network mode to match GitHub Actions runners, it cannot run jobs when user namespaces are enabled. So I added the flag.",2,0
537,2021-02-19T14:40:58Z,2021-05-03T14:37:21Z,2021-05-03T14:37:21Z,7,20,12,"Continuation of #198
Fixes #193
Fixes #325",5,10
539,2021-02-21T13:23:20Z,2021-02-23T17:47:07Z,2021-02-23T17:47:07Z,2,10,2,"At present, act uses strings.Fields to split up args passed to a docker:// step. This completely ignores any sort of quoting and instead splits the string at every single space.
Example workflow:
on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - uses: docker://ubuntu:latest
      with:
        args: bash -c ""echo test""
Currently it results with:
[test.yaml/build]   🐳  docker run image=ubuntu:latest entrypoint=[] cmd=[""bash"" ""-c"" ""\""echo"" ""test\""""]
| test"": -c: line 0: unexpected EOF while looking for matching `""'
| test"": -c: line 1: syntax error: unexpected end of file
[test.yaml/build]   ❌  Failure - docker://ubuntu:latest

Meanwhile Github parses the args as [""bash"" ""-c"" ""echo test""]. This PR introduces proper quotation parsing using github.com/kballard/go-shellquote. Resulting behavior:
[test.yaml/build]   🐳  docker run image=ubuntu:latest entrypoint=[] cmd=[""bash"" ""-c"" ""echo test""]
| test
[test.yaml/build]   ✅  Success - docker://ubuntu:latest",2,0
541,2021-02-22T15:45:29Z,2021-02-23T17:45:28Z,2021-02-23T17:45:28Z,1,1,1,fix link to issue #97 in README.md explaining why certain runner platforms are not supported,2,0
544,2021-02-24T00:48:55Z,2021-02-25T16:55:07Z,2021-02-25T16:55:07Z,1,8,1,Fixes #534,2,0
552,2021-03-05T16:56:23Z,2021-03-13T00:15:27Z,2021-03-13T00:15:27Z,1,12,2,"This update follows many comments on related issues that don't really follow what ""your-action-root-directory"" is. In my case, I stumbled on this before, and couldn't remember what the fix was a few months later.
The PR gives more context as to what exactly is needed to make this work for running local actions that are getting copied over.
Related comments:

#228 (comment)
#228 (comment)",2,1
557,2021-03-08T17:08:40Z,,2021-05-19T00:05:43Z,4,11,11,"This partially addresses #465 by setting the outcome to ""success"" or ""failure"" depending whether a step passes or fails (see https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#steps-context)
I don't know enough Go to address the conclusion part of the output, but this is an improvement on what we have before.",2,2
560,2021-03-11T17:36:05Z,2021-03-13T00:25:11Z,2021-03-13T00:25:11Z,4,472,466,"@cplee I've missed adding tests in workflows in #470 which this PR will fix, but it requires to add secret CASE_INSENSITIVE_SECRET in GitHub repo settings with value: value
additional note: diff between current master workflows and in this PR is enormous because I've added additional space (so it's exactly 2 spaces per each indentation level, instead of 2 everywhere and 1 space in steps)


added missing test in workflows for case insensitive secrets and change it's name
added sorting keys in env:, so it should stop showing up in every PR
replaced some raw string literals with normal strings (this is probably subjective opinion which is better to use so I'm fine with removing that commit)

and obviously forgot to push latest changes when creating pr 🤦‍♂️",2,0
562,2021-03-12T08:28:34Z,2021-03-13T00:23:03Z,2021-03-13T00:23:03Z,2,5,5,"Paths on Windows use backslash (\) as directory separator and this breaks TestGitFindRef(). Replacing \ with / in git ref fixes that issue.
Replace external dependency lib with std lib.",2,0
563,2021-03-12T08:36:18Z,2021-03-29T14:55:52Z,2021-03-29T14:55:52Z,1,74,59,"Add code testing on MacOS. Performance is absolutely terrible on GHA (linux: <2 minutes, macos: >20 minutes) but hey! it works!",2,5
566,2021-03-15T20:13:32Z,2021-05-06T13:30:12Z,2021-05-06T13:30:12Z,8,223,124,Adds support for $GITHUB_PATH as described here as a replacement for the deprecated ::add-path syntax,3,17
567,2021-03-15T21:37:56Z,2021-03-29T04:32:46Z,2021-03-29T04:32:46Z,4,20,21,"As stated here, there is no guaranty that /github will be the directory used and actions should not use hard coded /github but use the equivalent env var instead.
Using the project dir allow us to mimic this case and in the same way allow users to mount the project dir from inside the container without problem.
Solve #555
Should works for #551 / #410  too
Also, running go run main.go run successfully now.",4,6
570,2021-03-17T15:48:50Z,2021-03-29T04:35:02Z,2021-03-29T04:35:02Z,1,3,3,Fixes #265,2,3
571,2021-03-17T17:11:23Z,2021-03-18T00:14:08Z,2021-03-18T00:14:08Z,1,13,1,Adds ImageOS variable that certain actions are using to determine OS and it's version,2,0
574,2021-03-23T17:07:39Z,2021-03-29T04:38:28Z,2021-03-29T04:38:28Z,2,15,4,"This adds Github snapshot artifact binaries, so people can test PRs without needing to download and run the entire build environment locally allowing for wider testing of items such as the new Composite Actions PR.
Demo:


Go to the Checks tab on this PR or go to https://github.com/nektos/act/pull/574/checks


Click the Artifacts button in the upper right



Download zip for the platform you want to test


Extract and test. Version will include the commit.",2,1
575,2021-03-23T23:33:46Z,2021-03-29T17:06:51Z,2021-03-29T17:06:51Z,4,48,4,"Code: https://github.com/actions/runner/blob/main/src/Runner.Worker/Handlers/ScriptHandlerHelpers.cs
Docs: https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#using-a-specific-shell
Fixes #467
Replaces #466
Thanks to @catthehacker for the direction",3,6
577,2021-03-24T16:58:52Z,2021-03-29T14:58:01Z,2021-03-29T14:58:01Z,1,8,9,"Currently when running act and .actrc doesn't exists as well as no --platform was specified, chosen default image for platforms will be ignored and act will run with default ones defined in 
  
    
      act/cmd/platforms.go
    
    
        Lines 9 to 12
      in
      41b03b5
    
  
  
    

        
          
           ""ubuntu-latest"":  ""node:12.20.1-buster-slim"", 
        

        
          
           ""ubuntu-20.04"":   ""node:12.20.1-buster-slim"", 
        

        
          
           ""ubuntu-18.04"":   ""node:12.20.1-buster-slim"", 
        

        
          
           ""ubuntu-16.04"":   ""node:12.20.1-stretch-slim"",",2,2
578,2021-03-24T19:16:21Z,2021-03-29T04:45:07Z,2021-03-29T04:45:07Z,1,1,1,Currently all secrets are exposed when running with --verbose/-v option,2,0
579,2021-03-24T19:27:48Z,2021-03-29T04:46:09Z,2021-03-29T04:46:09Z,1,7,2,Hardcode current ubuntu-latest since we have no way to check that 'on the fly',2,0
580,2021-03-24T19:41:53Z,2021-03-29T04:47:07Z,2021-03-29T04:47:07Z,2,8,8,"GitHub Actions switched ubuntu-latest to ubuntu-20.04
Ref:
actions/runner-images#1816
actions/runner-images#2852",2,0
591,2021-03-30T12:49:54Z,2021-03-30T17:10:42Z,2021-03-30T17:10:42Z,5,36,10,"Commit af5140f introduced support for
specifying a container image platform for cross-platform image building.
Unfortunately, attempting to execute a docker command that includes the
--platform flag against Docker daemons using API Version 1.40 and
before results in the following error:
""specify container image platform"" requires API version 1.41, but the Docker daemon API version is 1.40

To allow act to be used on the 19.03 Docker CE and earlier versions,
this patch simply checks the Docker daemon API version and only
specifies platform specification when the daemon API version is 1.41 or
greater.
Fixes Issue #586",3,4
595,2021-04-02T04:33:57Z,2021-04-06T13:43:02Z,2021-04-06T13:43:03Z,3,49,11,"Go-git v5 has PlainCloneContext. It accepts a context.Context at first argument then it cleanup the directory if any error is occurred in cloning the repository.
ref #538 (comment)

Seems like this issue occurs when actions cache gets corrupted.

Tests
I've tested with a workflow described in #538 (comment)
% act -n workflow_dispatch
*DRYRUN* [java-test/build] 🚀  Start image=catthehacker/ubuntu:act-latest
*DRYRUN* [java-test/build]   🐳  docker run image=catthehacker/ubuntu:act-latest platform=linux/amd64 entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
*DRYRUN* [java-test/build] ⭐  Run Set up JDK 1.11
*DRYRUN* [java-test/build]   ☁  git clone 'https://github.com/actions/setup-java' # ref=v1
// Interrupt here
^C*DRYRUN* [java-test/build] Unable to clone https://github.com/actions/setup-java refs/heads/v1: context canceled
*DRYRUN* [java-test/build]   ❌  Failure - Set up JDK 1.11
Error: context canceled

% act -n workflow_dispatch
*DRYRUN* [java-test/build] 🚀  Start image=catthehacker/ubuntu:act-latest
*DRYRUN* [java-test/build]   🐳  docker run image=catthehacker/ubuntu:act-latest platform=linux/amd64 entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
*DRYRUN* [java-test/build] ⭐  Run Set up JDK 1.11
*DRYRUN* [java-test/build]   ☁  git clone 'https://github.com/actions/setup-java' # ref=v1
*DRYRUN* [java-test/build]   ✅  Success - Set up JDK 1.11",3,1
596,2021-04-02T10:30:20Z,2021-04-02T14:01:46Z,2021-04-02T14:01:46Z,4,56,0,Fixes #572,2,1
600,2021-04-03T16:03:51Z,2021-04-05T15:51:14Z,2021-04-05T15:51:14Z,4,96,107,"Fixes #599
Moved actrc locations to own func since it can be reused.
Moved survey part to own func due to high cyclomatic complexity.
Added XDG config dir to config locations.
Replaced using HOME envvar with go-homedir module since it's already
an indirect dependency and handles home directories better for each GOOS.",2,1
604,2021-04-04T05:39:56Z,2021-05-06T20:02:30Z,2021-05-06T20:02:30Z,5,127,36,"Using a tool I wrote for something else... https://github.com/jsoref/gha-debug/runs/2017914814?check_suite_focus=true

GitHub

AGENT_TOOLSDIRECTORY=/opt/hostedtoolcache
ANDROID_HOME=/usr/local/lib/android/sdk
ANDROID_NDK_HOME=/usr/local/lib/android/sdk/ndk-bundle
ANDROID_NDK_ROOT=/usr/local/lib/android/sdk/ndk-bundle
ANDROID_SDK_ROOT=/usr/local/lib/android/sdk
ANT_HOME=/usr/share/ant
AZURE_EXTENSION_DIR=/opt/az/azcliextensions
BOOST_ROOT_1_72_0=/opt/hostedtoolcache/boost/1.72.0/x64
BOOTSTRAP_HASKELL_NONINTERACTIVE=1
CHROMEWEBDRIVER=/usr/local/share/chrome_driver
CHROME_BIN=/usr/bin/google-chrome
CI=true
CONDA=/usr/share/miniconda
DEBIAN_FRONTEND=noninteractive
DEPLOYMENT_BASEPATH=/opt/runner
DOTNET_MULTILEVEL_LOOKUP=0
DOTNET_NOLOGO=1
DOTNET_SKIP_FIRST_TIME_EXPERIENCE=1
GECKOWEBDRIVER=/usr/local/share/gecko_driver
GITHUB_ACTION=run2
GITHUB_ACTIONS=true
GITHUB_ACTION_REF=
GITHUB_ACTION_REPOSITORY=
GITHUB_ACTOR=jsoref
GITHUB_API_URL=https://api.github.com
GITHUB_BASE_REF=
GITHUB_ENV=/home/runner/work/_temp/_runner_file_commands/set_env_b9659a7c-aad0-4984-83d7-702fbfbb212b
GITHUB_EVENT_NAME=push
GITHUB_EVENT_PATH=/home/runner/work/_temp/_github_workflow/event.json
GITHUB_GRAPHQL_URL=https://api.github.com/graphql
GITHUB_HEAD_REF=
GITHUB_JOB=build
GITHUB_PATH=/home/runner/work/_temp/_runner_file_commands/add_path_b9659a7c-aad0-4984-83d7-702fbfbb212b
GITHUB_REF=refs/heads/main
GITHUB_REPOSITORY=jsoref/gha-debug
GITHUB_REPOSITORY_OWNER=jsoref
GITHUB_RETENTION_DAYS=90
GITHUB_RUN_ID=615846162
GITHUB_RUN_NUMBER=8
GITHUB_SERVER_URL=https://github.com
GITHUB_SHA=4982c105c248122f310cf05c11fd050b3293d229
GITHUB_WORKFLOW=Debug
GITHUB_WORKSPACE=/home/runner/work/gha-debug/gha-debug
GOROOT=/opt/hostedtoolcache/go/1.15.8/x64
GOROOT_1_13_X64=/opt/hostedtoolcache/go/1.13.15/x64
GOROOT_1_14_X64=/opt/hostedtoolcache/go/1.14.15/x64
GOROOT_1_15_X64=/opt/hostedtoolcache/go/1.15.8/x64
GRADLE_HOME=/usr/share/gradle
HOME=/home/runner
HOMEBREW_CELLAR=""/home/linuxbrew/.linuxbrew/Cellar""
HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS=3650
HOMEBREW_NO_AUTO_UPDATE=1
HOMEBREW_PREFIX=""/home/linuxbrew/.linuxbrew""
HOMEBREW_REPOSITORY=""/home/linuxbrew/.linuxbrew/Homebrew""
INVOCATION_ID=cf44682287d6431da649601ec0fc1a87
ImageOS=ubuntu18
ImageVersion=20210219.1
JAVA_HOME=/usr/lib/jvm/adoptopenjdk-8-hotspot-amd64
JAVA_HOME_11_X64=/usr/lib/jvm/adoptopenjdk-11-hotspot-amd64
JAVA_HOME_12_X64=/usr/lib/jvm/adoptopenjdk-12-hotspot-amd64
JAVA_HOME_8_X64=/usr/lib/jvm/adoptopenjdk-8-hotspot-amd64
JOURNAL_STREAM=9:20111
LANG=C.UTF-8
LEIN_HOME=/usr/local/lib/lein
LEIN_JAR=/usr/local/lib/lein/self-installs/leiningen-2.9.5-standalone.jar
PATH=/home/linuxbrew/.linuxbrew/bin:/home/linuxbrew/.linuxbrew/sbin:/opt/pipx_bin:/usr/share/rust/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin
PERFLOG_LOCATION_SETTING=RUNNER_PERFLOG
PIPX_BIN_DIR=/opt/pipx_bin
PIPX_HOME=/opt/pipx
POWERSHELL_DISTRIBUTION_CHANNEL=GitHub-Actions-ubuntu18
RUNNER_OS=Linux
RUNNER_PERFLOG=/home/runner/perflog
RUNNER_TEMP=/home/runner/work/_temp
RUNNER_TOOL_CACHE=/opt/hostedtoolcache
RUNNER_TRACKING_ID=github_c5f7f2be-3b74-4305-b493-08b9e3b4b8a9
RUNNER_USER=runner
RUNNER_WORKSPACE=/home/runner/work/gha-debug
SELENIUM_JAR_PATH=/usr/share/java/selenium-server-standalone.jar
SHLVL=1
SWIFT_PATH=/usr/share/swift/usr/bin
USER=runner
VCPKG_INSTALLATION_ROOT=/usr/local/share/vcpkg
_=/usr/bin/env



Act
ACT=true
CI=true
GITHUB_ACTION=1
GITHUB_ACTIONS=true
GITHUB_ACTOR=nektos/act
GITHUB_API_URL=https://api.github.com
GITHUB_ENV=/Users/jsoref/code/spelling-org/workflow/envs.txt
GITHUB_EVENT_NAME=push
GITHUB_EVENT_PATH=/Users/jsoref/code/spelling-org/workflow/event.json
GITHUB_GRAPHQL_URL=https://api.github.com/graphql
GITHUB_REF=refs/heads/main
GITHUB_REPOSITORY=jsoref/gha-debug
GITHUB_RUN_ID=1
GITHUB_RUN_NUMBER=1
GITHUB_SERVER_URL=https://github.com
GITHUB_SHA=4982c105c248122f310cf05c11fd050b3293d229
GITHUB_TOKEN=
GITHUB_WORKFLOW=Debug
GITHUB_WORKSPACE=/Users/jsoref/code/spelling-org/gha-debug
HOME=/root
HOSTNAME=docker-desktop
ImageOS=ubuntu18.04
NODE_VERSION=12.20.1
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
PWD=/Users/jsoref/code/spelling-org/gha-debug
RUNNER_OS=Linux
RUNNER_TEMP=/tmp
RUNNER_TOOL_CACHE=/opt/hostedtoolcache
SHLVL=1
YARN_VERSION=1.22.5
_=/usr/bin/env




GitHub additions

AGENT_TOOLSDIRECTORY
ANDROID_HOME
ANDROID_NDK_HOME
ANDROID_NDK_ROOT
ANDROID_SDK_ROOT
ANT_HOME
AZURE_EXTENSION_DIR
BOOST_ROOT_1_72_0
BOOTSTRAP_HASKELL_NONINTERACTIVE
CHROMEWEBDRIVER
CHROME_BIN
CONDA
DEBIAN_FRONTEND
DEPLOYMENT_BASEPATH
DOTNET_MULTILEVEL_LOOKUP
DOTNET_NOLOGO
DOTNET_SKIP_FIRST_TIME_EXPERIENCE
GECKOWEBDRIVER
GITHUB_ACTION_REF
GITHUB_ACTION_REPOSITORY
GITHUB_BASE_REF
GITHUB_HEAD_REF
GITHUB_JOB
GITHUB_PATH
GITHUB_REPOSITORY_OWNER
GITHUB_RETENTION_DAYS
GOROOT
GOROOT_1_13_X64
GOROOT_1_14_X64
GOROOT_1_15_X64
GRADLE_HOME
HOMEBREW_CELLAR
HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS
HOMEBREW_NO_AUTO_UPDATE
HOMEBREW_PREFIX
HOMEBREW_REPOSITORY
INVOCATION_ID
ImageVersion
JAVA_HOME
JAVA_HOME_11_X64
JAVA_HOME_12_X64
JAVA_HOME_8_X64
JOURNAL_STREAM
LANG
LEIN_HOME
LEIN_JAR
PERFLOG_LOCATION_SETTING
PIPX_BIN_DIR
PIPX_HOME
POWERSHELL_DISTRIBUTION_CHANNEL
RUNNER_PERFLOG
RUNNER_TRACKING_ID
RUNNER_USER
RUNNER_WORKSPACE
SELENIUM_JAR_PATH
SWIFT_PATH
USER
VCPKG_INSTALLATION_ROOT




Act additions

ACT
GITHUB_TOKEN
HOSTNAME
NODE_VERSION
PWD
YARN_VERSION


Offhand, I think this is what I'd want:



Var
Value




GITHUB_ACTION_PATH
= set if there's an action running


GITHUB_ACTION_REF
''


GITHUB_ACTION_REPOSITORY
''


GITHUB_BASE_REF
''


GITHUB_HEAD_REF
''


GITHUB_JOB
= parse from workflow (it's the active child of the top level jobs)


GITHUB_REPOSITORY_OWNER
= guess from origin


GITHUB_RETENTION_DAYS
0


RUNNER_PERFLOG
/dev/null


RUNNER_TRACKING_ID



RUNNER_WORKSPACE
= GITHUB_WORKSPACE



fixes #603
Notes:

USER/RUNNER_USER might be more a matter of the image -- @catthehacker is going to fix this in their images

It's possible to write some hacky code to use whoami (or echo $USER) to calculate and fill in a RUNNER_USER, but it's unclear whether that's the right thing to do in general, and, again, it's hacky.


GITHUB_PATH is #566",3,9
605,2021-04-04T08:57:53Z,2021-05-03T15:02:27Z,2021-05-03T15:02:27Z,1,18,11,"https://github.com/jsoref/nektos-act-issues-542/
closes #542",2,1
608,2021-04-04T17:16:49Z,2021-05-03T21:57:46Z,2021-05-03T21:57:47Z,2,19,11,fixes #607,2,2
616,2021-04-13T00:22:39Z,,2021-04-22T18:22:28Z,1,1,1,"Updated note about Apple Silicon

Added link to Docker for Apple Silicon Release Candidate",5,5
619,2021-04-15T13:16:00Z,2021-05-02T15:15:13Z,2021-05-02T15:15:13Z,8,74,104,"fix: reworked container architecture

Don't set architecture, let Docker host decide it's own platform,
remove runtime dependency and don't show default in --help
Remove most tests, we need to check only once if it works on
different platform
Rename DeleteImage to RemoveImage to conform to existing
function in docker cli, added options to specify force and
pruneChildren
fixes #621",2,3
620,2021-04-15T13:17:06Z,2021-05-03T14:54:51Z,2021-05-03T14:54:51Z,1,3,0,This will prevent pushing act cache that happens occasionally for some people.,2,1
624,2021-04-18T00:44:36Z,2021-04-18T16:53:54Z,2021-04-18T16:53:55Z,1,2,1,"👋 @nektos, @catthehacker,
I've spent a bit of time to help people find and compare self-hosted GitHub Action solutions and compiled a curated collection called awesome-runners.
I am using nektos/act for quite some while now and while your project is not a self-hosted action runner solution itself, it is a ✨ tool to test the images and workflows for self-hosted runners before they are rolled out at large scale to its end users - so I recommended and linked to your your project from the testing section.
Here is one example workflow to test the auto-scaling capabilities of self-hosted runners at large scale with nektos/act and the resulting video (the actual act run starts here).
I have also added a badge (if you are interested):

Keep up the great work 👍",3,1
628,2021-04-22T21:54:00Z,2021-05-05T20:04:03Z,2021-05-05T20:04:03Z,5,87,6,"Issue solution for issue #598
fixes #598
Problem description
This solution fixes issue #598, the problem occurs when the workflow got initiated
model/workflow.go:325 (func ReadWorkFlow()). The reason was due to that the decoder removes the ("""") when it got set into the interface.
Solution
This solution ${[ }} to the corners if """" statements exist.
So if the problem is:
""!contains(github.event_name, 'pull_request')""
then the string becomes:
${{ !contains(github.event_name, 'pull_request' }}.
This makes it so the decoder interprets the string to ${{!contains(github.event_name, 'pull_request')}} which solves the issue.
Alternative solution
I tried looking for a way to optimize the code by fixing the yaml decoder, but couldn't find a better solution than this.",4,17
629,2021-04-23T00:11:28Z,2021-07-01T15:20:21Z,2021-07-01T15:20:21Z,5,76,1,fixes #295,6,9
630,2021-04-23T00:13:57Z,2021-05-03T14:41:31Z,2021-05-03T14:41:31Z,2,148,23,"hi @cplee, could you check the PR and let me know how it looks?
Making it as draft since I will be updating it today/tomorrow still, just pushing it for visibility
Fixes #623
Supersedes #616
Continuation of #367",2,2
633,2021-04-23T19:42:19Z,2021-05-03T14:32:01Z,2021-05-03T14:32:01Z,1,34,0,"Walking the directory tree underneath .git/refs is not reliable, as it usually does not
return tags, especially for freshly cloned repos and/or tags fetched from a remote.
The go-git library provides an iterator over all git references.
This approach prefers a reference (tag, branch) from go-git, if found. If none is found,
it falls back to the previous implementation.",3,2
635,2021-04-24T23:35:13Z,2021-05-04T21:50:35Z,2021-05-04T21:50:35Z,8,263,66,"This PR started as a WSL2 fix but the pathing issue was so pervasive it expanded in scope a bit to meet the requirement.
A summary of changes:

Adds path translation for WSL2 paths in order to enable act to function on Windows again.
Refactor Binds and Mounts to a new function to coordinate either/or based on the BindWorkDir setting
Add ContainerWorkDir() function to fetch the relative container function. This currently has the same behavior as before on Linux but translates to the WSL2 path on windows. In a future PR I will expand this to allow a command switch so that the container can as closely mimic the Github Actions runner paths as possible.

Tests:

Changed Integration tests to use BindWorkDir: false instead of true to more closely match the most common act behavior (since bindworkdir is false by default). Tested to work both ways, should probably expand them as such
Removed duplicate integration tests, not sure if this was done on purpose to make sure they are idempotent, this should be more clearly done with a loop instead
Added the ability for tests to read from the .secrets file so that GITHUB_TOKEN can be specified for actions like action/checkout and be tested locally and not just inside github actions
Removed checkout from workdir test, it's not necessary for the purpose of the test

Resolves #587",3,24
637,2021-04-25T14:35:14Z,2021-05-03T16:51:49Z,2021-05-03T16:51:49Z,3,47,7,"Fixes #597
Due to the order of events, the stepenv was evaluated before the if statement was checked. This fix changes the order of events aswell as tests to test this. Inspiration of the test was taken from #597.
As I understand the code, I think this solution fixes it.",3,3
638,2021-04-26T10:05:30Z,,2021-06-20T00:05:10Z,5,212,21,"Fixes #173
Hi, this is a draft MR. Will need some more work
The network is created and removed by name, causing collisions, and it is created only once, I am not sure if that is the right setup, maybe it might be needed to be different on each job.
Containers and services should be included on that network, it's done here but maybe there is a better way. This MR also lacks proper testing, some advice on this would be good.
The configuration on the services are done in a hacky way, they should have properly merged environment settings, and some other configuration values.
I can help on any further changes or if you feel that someone else can't take better care of it feel free to modify it.
Thanks for this project",3,10
643,2021-04-28T16:18:48Z,2021-05-02T15:13:31Z,2021-05-02T15:13:31Z,1,57,5,"Reworked macOS install and it's much faster (test seems to be faster as well now)
Added Go module caching
Fixes #641",2,1
648,2021-05-01T18:50:39Z,2021-05-03T14:57:25Z,2021-05-03T14:57:25Z,11,116,30,"fixes #646
refactor: NewWorkflowPlanner
feat: add flag --no-recurse to disable recursion when reading workflows from directories
feat: added more tests to TestPlanner, renamed TestJobFileInfo to more appropriate name WorkflowPlanTest
style: changed error message to lowercase, added single quotes for better visibility",2,1
658,2021-05-04T17:11:45Z,2021-05-05T16:42:34Z,2021-05-05T16:42:35Z,9,68,17,"This is a continuation of @catthehacker  https://github.com/catthehacker/act-fork/tree/enterprise-github

We've updated the GHE URLs, because the API and GraphQL URLs are different on GHE than on github.com
We've updated the slug matching in common/git.go to match only the configured GHE instance

This is a draft for now, because we haven't tested it yet. We'll update and ping once we're ready to merge.
Closes #497",4,9
660,2021-05-04T23:00:09Z,2021-05-05T05:57:33Z,2021-05-05T05:57:33Z,3,20,2,"This resolves the issue with pwsh failing due to -login and the command not splitting correctly.
It also adds a test pwsh run using a image that has Powershell integrated, hopefully this doesn't introduce too much into the testing time, but the image can be cached in the CI if necessary to speed things up.
EDIT: Literally took less than half a second to download and extract the container, I guess that's a benefit of using the github container registry :)",3,9
665,2021-05-05T14:41:52Z,2021-05-05T16:37:18Z,2021-05-05T16:37:18Z,5,61,4,"Uses DOCKER_USERNAME and DOCKER_PASSWORD as secrets provided into
the act cli.
Closes #527",3,8
668,2021-05-06T11:01:44Z,2021-05-15T21:11:16Z,2021-05-15T21:11:16Z,2,17,1,"The ::add-mask:: command output logs the value to be masked.
The current implementation does expose critical information which should be hidden from the output.
Note: This PR does not implement proper mask handling. It just suppresses the output of the secret in  the add-mask command.",3,5
670,2021-05-06T11:21:46Z,2021-05-06T13:55:23Z,2021-05-06T13:55:23Z,2,18,20,"The output written by the git progress is a bit distracting if the terminal act is running in is not a TTY.
...
Receiving objects:  38% (166/436)   
Receiving objects:  39% (171/436)   
Receiving objects:  40% (175/436)   
Receiving objects:  41% (179/436)   
Receiving objects:  42% (184/436)   
Receiving objects:  43% (188/436)   
Receiving objects:  44% (192/436)   
Receiving objects:  45% (197/436)   
Receiving objects:  46% (201/436)   
Receiving objects:  47% (205/436)   
Receiving objects:  48% (210/436)   
Receiving objects:  49% (214/436)   
...

This PR does check if we are on a TTY and suppress output otherwise.",3,3
672,2021-05-06T12:37:23Z,2021-05-06T13:43:50Z,2021-05-06T13:43:50Z,1,22,11,feat: add go install instruction,2,1
674,2021-05-06T17:08:23Z,2021-05-06T20:13:15Z,2021-05-06T20:13:15Z,3,6,8,"fix: replace gopass lib with golang.org/x/term
Additionally replaced Fatalf with Errorf since it's bad to exit a program this way (like Panic)
Ongoing effort to remove old and abandoned libraries",2,1
675,2021-05-06T17:12:22Z,2021-05-06T20:16:24Z,2021-05-06T20:16:24Z,1,0,4,It's fixed already 🎉,2,2
677,2021-05-07T14:47:05Z,2021-11-10T17:57:23Z,2021-11-10T17:57:23Z,12,775,2,"Description
This PR contains a naive github-actions (partially-)compatible asset server.
We only reverse engineered the success case.
The implementation is based on the awesome work of @anthonykawa: https://github.com/anthonykawa/artifact-server
This implementation should be seen as a draft and requires an architecture/design review.
Missing things

 CLI flags for configuration (port, asset path)
 Server start need to be integrated properly into the runner (we do start it for all commands currently)
 Tests
 Add docs

Prerequisites

 --env ACTIONS_RUNTIME_URL=http://localhost:8080/ must be set because it's internally used by the @action/toolkit
 --env ACTIONS_RUNTIME_TOKEN=foo must be set (we do not have authentication implemented)

This should ideally be implemented (either as port of this PR or #329), so users don't need to set it on their own.
These variables are set if act is started with --artifact-server-path and configured for the internal server.
It is also possible to define them as environment variables using --env for an external artifact-server.
Relates to #329
--
Closes #169",8,56
679,2021-05-08T01:25:09Z,2021-05-08T03:29:03Z,2021-05-08T03:29:03Z,6,100,58,"refactor: return more errors, add more tests
adding more tests
returns same message for short SHA format like GitHub Actions
refactor error checking
add more errors :)",2,2
680,2021-05-08T16:05:28Z,2021-05-10T15:12:57Z,2021-05-10T15:12:57Z,5,19,12,"The testing logic for isLocalCheckout was incorrect, fix and add a test specifically for checkout.
Fixes #678",4,14
681,2021-05-10T23:21:51Z,2021-06-10T18:27:35Z,2021-06-10T18:27:35Z,1,1,1,,3,3
685,2021-05-16T21:06:54Z,2021-05-17T01:09:11Z,2021-05-17T01:09:11Z,1,1,1,--env does not have the -e shortcut. Fixed.,3,1
686,2021-05-16T21:13:53Z,2021-05-17T01:02:40Z,2021-05-17T01:02:40Z,1,2,0,"I searched for how to pass ${{ github.token }} / GITHUB_TOKEN. I found it at #233 (comment). To make this information more accessible, this PR adds that to README.md.",3,1
687,2021-05-17T10:10:00Z,2021-05-18T06:25:08Z,2021-05-18T06:25:08Z,1,10,2,,2,2
688,2021-05-17T22:48:44Z,2021-05-18T06:14:50Z,2021-05-18T06:14:50Z,9,71,43,"remove all references to gotest.tools and replace it with
github.com/stretchr/testify which was originally used for tests
bump golangci-lint version
add depguard and importas to prevent import of unwanted packages
add custom schema and information about config since
schemastore.org has broken schema for golangci-lint config",2,2
690,2021-05-18T07:07:26Z,2021-05-18T13:22:40Z,2021-05-18T13:22:40Z,2,23,3,closes #689,3,1
691,2021-05-18T07:52:37Z,2021-05-20T14:12:11Z,2021-05-20T14:12:11Z,1,13,1,,3,1
698,2021-05-22T18:47:41Z,2021-05-23T14:43:10Z,2021-05-23T14:43:10Z,5,39,29,fixes #697,3,1
699,2021-05-22T19:40:17Z,2021-05-23T15:32:56Z,2021-05-23T15:32:56Z,2,73,20,"fix: format .goreleaser.yml
feat: add arm64 builds
feat: capture all binaries built by goreleaser, upload-artifact actions will run only on GitHub Actions due to ACTIONS_RUNTIME_TOKEN requirement
windows/arm64 support is planned to land in go 1.17",2,2
700,2021-05-23T00:27:34Z,2021-06-06T14:53:19Z,2021-06-06T14:53:19Z,3,76,20,"Fixes issue with env: keys not being able to accept GitHub functions like fromJSON()
Fixes issue with matrixes not being able to be built with GitHub functions like fromJSON()
Fixed issues:
fixes #284
fixes #540
fixes #450
fixes #330",5,17
701,2021-05-23T04:02:52Z,2021-05-24T17:09:04Z,2021-05-24T17:09:04Z,4,19,17,"feat: add option to specify user for exec
fix: move actions to static path outside workdir
Issues:
Fixes #669
Fixes catthehacker/docker_images#9",2,2
702,2021-05-23T15:43:25Z,2021-05-25T12:35:53Z,2021-05-25T12:35:53Z,1,0,7,"ContainerExecAttach implicitly runs ContainerExecStart while attaching
to stdout/stderr.
Ref: https://github.com/moby/moby/blob/e02bc91dcbf6ab70ab39352f3577a4394b0f863a/client/container_exec.go#L40
Calling both can lead to a race condition as observed in #627
Fixes: #627",3,5
712,2021-05-29T19:44:01Z,2021-06-10T15:28:23Z,2021-06-10T15:28:24Z,4,26,24,"This PR makes my previous PR redundant and conflicts with it.
Skip docker cp for local actions and use their correct path
Allow cloning local actions where you wish, (needs a lot of more changes)
Defines GITHUB_ACTION_PATH also for nodejs actions
Evaluate Env of composite action
Evaluate Run of composite action correctly
Evaluate Shell of run steps
Evaluate WorkingDirectory of run steps
Resolves #441
Resolves #640
Resolves #664
Resolves #708
Replaces #709
Known issues

composite step's properties are evaluated twice, this make escaping ${{'${{Test}}'}} impossible (this doesn't work in act yet), this is a bug / feature of act

path.Join always use / to concat path's and is better than +

If the workdir is bound to our repository then we don't need to copy the file

Act should never copy local actions, because they can come from anywhere via checkout, git clone etc.
Merging this might resolve this known issue:
https://github.com/nektos/act#module_not_found (seems like we would need to copy files from the container to host)
I have no experience in golang
Update:
fixes #733",3,12
714,2021-06-01T16:50:35Z,2021-06-10T15:09:05Z,2021-06-10T15:09:05Z,3,20,3,"This patch adds a new command-line flag (--rm) to automatically
stop workflow container(s), just prior to exit. The default
behavior is kept, e.g.: the containers continue running at exit.
Fixes: #694
Signed-off-by: Joseph Benden joe@benden.us",3,9
716,2021-06-01T22:12:06Z,2021-06-04T16:07:00Z,2021-06-04T16:07:00Z,6,17,7,"This patch adds two new command-line flags to specify one or
more kernel capabilities to add or remove from the workflow
containers.
The command-line flag --cap-add allows for new
capabilities on the workflow containers; where as,
The command-line flag --cap-drop allows for removing
specific capabilities on the workflow containers.
This was developed to specifically be able to add SYS_PTRACE
to a workflow I maintain. It involves using this capability to
monitor a make build, to then build a compilation database.
Signed-off-by: Joseph Benden joe@benden.us",3,2
719,2021-06-03T14:10:46Z,2021-08-03T17:39:56Z,2021-08-03T17:39:56Z,6,65,16,"Based on #712, with a lot of more changes to the behavior of act.
Depends on #712 to be ready for review, otherwise tests are failing.
Breaking changes

No localaction will run anymore if it doesn't exist inside the container (actions/checkout, git clone etc.).
Changed tests to reflect this.
dry run won't work anymore for localactions

Resolves #550
Resolves #707
We can remove https://github.com/nektos/act#module_not_found from the readme as resolved.
Test artifacts of this PR (including #712), not rebased on master:
https://github.com/ChristopherHX/act/actions/runs/903050957",4,3
722,2021-06-04T06:13:43Z,2021-06-04T20:16:02Z,2021-06-04T20:16:02Z,5,28,17,add additional information to be provided by user that should help in troubleshooting,2,3
723,2021-06-05T16:00:05Z,2021-06-10T23:12:06Z,2021-06-10T23:12:06Z,23,121,68,"18549c9 - fix: typo
bc3fca4 - fix: remove debug for git references:
it generates a massive amount of logs
d1f1875 - feat: read values from env:
allows to test act on GHA when it's not a main repo
28bd850 - fix: merge extrapath with PATH
8d0b059 - fix(tests): add additional shells for testing
0cf3600 - fix(image): update images:
pin node to major version only, current node version: 12.22.1
replace most images with node:12-buster-slim to prevent
errors on macOS runner due to DockerHub pull limit
replace ocaml image",2,3
725,2021-06-07T09:25:42Z,2021-06-07T13:54:12Z,2021-06-07T13:54:12Z,1,3,1,fixes #546,3,1
726,2021-06-07T15:48:41Z,2021-06-09T23:08:40Z,2021-06-09T23:08:40Z,1,2,2,"if someone is using image with a non-root user, they will get a permission denied since only root has write perms
fixes #729",2,7
743,2021-06-23T15:29:12Z,2021-06-23T18:09:28Z,2021-06-23T18:09:28Z,2,13,3,"fixes #742
should look something like this (screenshot from Windows Terminal)",2,4
745,2021-06-26T12:28:02Z,,2021-07-28T07:03:18Z,2,377,15,,2,2
746,2021-07-01T16:07:32Z,2021-07-14T14:40:10Z,2021-07-14T14:40:10Z,1,1,1,,3,2
749,2021-07-07T05:21:24Z,2021-07-07T18:41:23Z,2021-07-07T18:41:24Z,1,10,0,"I already had to come look it up again once 😆
Per #583 (comment)",3,3
752,2021-07-16T18:22:54Z,2021-08-09T15:19:10Z,2021-08-09T15:19:10Z,2,38,6,"Github transforms multiple expressions into one format expression while parsing and every non expression { is replaced by {{ and } by }}.
I assume vmformat should mimic githubs behavior, issues appeard during testing of https://github.com/ChristopherHX/github-actions-act-runner.
Haven't searched any documentation about this yet.
Some corner cases fixed too
format('{0}', github.undefined_value) should be an empty string not undefined.
format('{0}', '{1}', 'Hello') should be {1} not Hello.
How do I test the error handler?
vmFormat has no error output, so the tests cannot test for error messages or did I miss something?",3,3
753,2021-07-16T18:26:40Z,2021-07-21T13:50:44Z,2021-07-21T13:50:44Z,4,50,1,"Missing assignment in runcontext copy caused missing defaults in vmInputs.
Also vmInputs needs interpolation of the default value, like the INPUT_ env variables
Resolves #655",3,8
761,2021-07-25T23:12:37Z,2021-08-01T15:39:39Z,2021-08-01T15:39:39Z,1,1,1,The current algorithm given ubuntu-18.04 returns ubuntu18.04 when it should be ubuntu18 according to actions/runner-images#345 (comment).,3,6
762,2021-07-26T02:17:00Z,2021-08-01T15:29:13Z,2021-08-01T15:29:13Z,1,6,0,Adds instructions for installation via MacPorts.,4,3
763,2021-07-26T21:35:39Z,2021-08-09T15:35:05Z,2021-08-09T15:35:06Z,6,236,72,"fix[workflow]: default max-parallel
fix[workflow]: default fail-fast, it's true, not false
fix[workflow]: skipping over the job when strategy: is defined but matrix: isn't (fixes #625)
fix[workflow]: skip non-existing includes keys and hard fail on non-existing excludes keys
fix[workflow]: simplify Matrix decode (because I ""think"" I know how yaml works) (fixes #760)
fix[tests]: add test for planner and runner",4,16
766,2021-08-08T02:36:44Z,2021-08-09T16:07:26Z,2021-08-09T16:07:26Z,21,186,134,"changelog:

fixed licence link in CONTRIBUTING.md
added more settings to .editorconfig

enforce lf
enforce final new line
enforce utf-8 encoding
enforce indent width 2 and spaces in yaml, yml and json


added more VSCode settings

added recommended extensions and default formatter to workspace that will help contributors who use VSCode


added prettier as a markdown/yaml/json formatter, but ignore testdata/ and that one bootstrap JS file
fixed linters to be used via npx in makefile
normalised quotes across Markdown/JSON/YAML via prettier, we had mixed, now we have ' in YAML, "" in JSON/Markdown which is pretty common configuration everywhere
updated tag to my Docker images, as I'm dropping Docker Hub as my primary registry (I will still update images there, but since they decrease available things for free plan, I cannot consider them for any of my repositories)
I also dropped work on Alpine image (since I'm spending more time for polishing the medium-* and full-* images and dropped support for any architecture other than amd64 (because it was creating unnecessary issues for standard act users, if it happens I'll have more time, I might introduce them again but as completely separated images)
replaced ubuntu-18.04 image provided by nektos with mine, I'm trying to keep big images updated by building them at least once in a month
Reworked installation section in README.md since there were few issues highlighted about them recently. Current structure should be easier to follow.
root.go

added final new line to each option in survey
updated my image tags
also fixed that one missing -P

added ubuntu-latest/ubuntu-20.04 for large and replaced ubuntu-18.04



sorry for creating another massive PR, I just keep finding stuff to fix/improve when I'm constantly crawling repository
let me know if there is something I should drop from this PR
Issues:
fixes #765",2,1
767,2021-08-08T10:18:42Z,2021-08-09T18:16:31Z,2021-08-09T18:16:31Z,3,5,1,"Added a test to enshure that docker actions with names ending by anything which matches against [^a-zA-Z0-9] will still generate a valid docker container name.
./test_ would get image name like act-test-:latest => docker fails without this change
Fixes #744
Fixes #756",3,3
768,2021-08-08T10:52:04Z,2021-08-31T00:01:30Z,2021-08-31T00:01:30Z,1,55,2,"An attempt to avoid hitting the dockerhub Pull Rate Limit.
There is a small overhead due to caching (ca. +2 min, next run within 7 days only some seconds), but it might avoid rerunning the macOS job due to this error.
Restoreing the cache doesn't take much extra job execution time, because the test step is pulling less images from dockerhub.
This PR failed due to this limit #776.
It seems to be triggered by multiple PR's are opened within some days.
Needs more testing, if this solves the dockerhub limit problems or only delays the problem to happen less frequently.
Add new dockerhub images to CACHED_DOCKER_IMAGES and increment the cache key (CACHED_DOCKER_IMAGES_KEY)
What do you think?
I need  ACT_OWNER: ${{ github.repository_owner }} and ACT_REPOSITORY: ${{ github.repository }} to have all tests green within my fork",3,5
771,2021-08-09T18:16:15Z,2021-09-26T16:37:53Z,2021-09-26T16:37:54Z,2,75,1,"This change will add reading image definition and merging it's environment variables with our current env in style of:

missing envvar, creates new one
existing envvar is overwritten by our env
PATH envvar is merged, container PATH is last to not overwrite any tools installed during workflow

It's not required for running our main container but it will be probably more intuitive if it will work like standard docker and this change is required for nested containers started in workflow
Fixes #757",3,5
773,2021-08-09T23:55:20Z,,2021-08-10T02:38:02Z,1,10,3,"not required on linux runners since they have accounts
provided by GitHub",2,5
774,2021-08-11T01:24:47Z,2021-08-11T05:21:52Z,2021-08-11T05:21:53Z,1,12,6,"fixes #754
this will prevent actions from failing that use resources outside
of the action directory
Doesn't have test because all actions for https://github.com/microsoft/powerplatform-actions require authentication",2,2
775,2021-08-11T02:50:12Z,,2022-08-27T23:55:05Z,5,404,68,"Original PR: #638
Fixes #173
Changes:

add support for services
creates network linked between all containers
fixes job context to include container and services contexts

To do:

 Add more testcases
 Multiple sanity checks that code doesn't look terrible
 Fix job context",6,9
776,2021-08-11T09:15:56Z,2021-09-24T13:32:22Z,2021-09-24T13:32:22Z,3,4,0,"Mounts volume for /var/run/act into master and slave/nested containers from a workflow
fixes #747",2,4
781,2021-08-20T16:42:59Z,,2021-10-08T00:05:27Z,1,31,0,"Description
This PR adds CodeQL analysis for discovering code vulnerabilities.",3,9
786,2021-08-28T18:32:37Z,2021-08-30T15:38:04Z,2021-08-30T15:38:04Z,3,59,19,"before:

after:",2,2
787,2021-08-28T21:41:40Z,2021-08-30T18:06:20Z,2021-08-30T18:06:20Z,4,22,7,"go.mod stays with 1.16 because that's the lowest version which supports embed and the goal is to support last 3 minor versions 1.x
Tests and release are updated to use Go 1.17 to include new Go version improvements",2,4
789,2021-08-30T10:50:30Z,2021-10-24T16:50:44Z,2021-10-24T16:50:44Z,7,24,3,"Please stop leaking unix sockets, it breaks my github-act-runner program.
Reference: ChristopherHX/github-act-runner#41",3,7
791,2021-08-30T11:08:09Z,2021-09-08T16:47:12Z,2021-09-08T16:47:13Z,1,7,0,TODO verify if this fixes #785 Done.,3,4
793,2021-08-30T11:18:32Z,2021-12-22T19:19:51Z,2021-12-22T19:19:51Z,19,463,157,"Remove the old hack for composite run steps, use the real runcontext directly.
You can also enable if's in composite, I plan to enable it in https://github.com/ChristopherHX/github-act-runner by default.
If's are now enabled see https://github.com/actions/runner/releases/tag/v2.284.0
Resolves #783
Resolves #926
This change seems to be functional complete.
Multi nested composite needs more Tests, maybe the size will get xl after more tests are added.",7,58
797,2021-09-08T05:22:15Z,2021-09-08T13:46:46Z,2021-09-08T13:46:46Z,1,15,0,"Add Dependabot to keep dependencies up to date
Go dependencies can now be browsed on GitHub: https://github.com/nektos/act/network/dependencies",2,1
798,2021-09-08T13:47:06Z,,2021-09-25T19:13:23Z,1,1,1,"Bumps actions/stale from 3 to 4.

Release notes
Sourced from actions/stale's releases.

v4.0.0
⚠️ This version contains breaking changes ⚠️
Features

options: simplify config by removing skip stale message options (#457) (6ec637d), closes #405 #455
output: print output parameters (#458) (3e6d35b)

Bug Fixes

dry-run: forbid mutations in dry-run (#500) (f1017f3), closes #499
logs: coloured logs (#465) (5fbbfba)
operations: fail fast the current batch to respect the operations limit (#474) (5f6f311), closes #466
label comparison: make label comparison case insensitive #517, closes #516
filtering comments by actor could have strange behavior: ""stale"" comments are now detected based on if the message is the stale message not who made the comment(#519), fixes #441, #509, #518

Breaking Changes

The options skip-stale-issue-message and skip-stale-pr-message were removed. Instead, setting the options stale-issue-message and stale-pr-message will be enough to let the stale workflow add a comment. If the options are unset, a comment will not be added which was the equivalent of setting skip-stale-issue-message to true.
The operations-per-run option will be more effective. After migrating, you could face a failed-fast process workflow if you let the default value (30) or set it to a small number. In that case, you will see a warning at the end of the logs (if enabled) indicating that the workflow was stopped sooner to avoid consuming too much API calls. In most cases, you can just increase this limit to make sure to process everything in a single run.

v3.0.19

Enhance logs to provide more detailed output
Split certain options to be more granular for Pull Requests vs Issues:

any-of-issue-labels
any-of-pr-labels
remove-issue-stale-when-updated
remove-pr-stale-when-updated


Dependency updates

v3.0.18

Add any-of-labels option
Add only-issue-labels, only-pr-labels
Clean up, testing and dependency version bumps

v3.0.17

Bug fixes, refactoring and milestone exemption

v3.0.16

Minor bugfixes and logging improvements

v3.0.15

Add milestone exemption
Add start date filtering
Add conditional days before close to different types of issues
Better logging and updated dependencies

v3.0.14


... (truncated)


Changelog
Sourced from actions/stale's changelog.

4.0.0 (2021-07-14)
Features

options: simplify config by removing skip stale message options (#457) (6ec637d), closes #405 #455
output: print output parameters (#458) (3e6d35b)

Bug Fixes

dry-run: forbid mutations in dry-run (#500) (f1017f3), closes #499
logs: coloured logs (#465) (5fbbfba)
operations: fail fast the current batch to respect the operations limit (#474) (5f6f311), closes #466
label comparison: make label comparison case insensitive #517, closes #516
filtering comments by actor could have strange behavior: ""stale"" comments are now detected based on if the message is the stale message not who made the comment(#519), fixes #441, #509, #518

Breaking Changes

The options skip-stale-issue-message and skip-stale-pr-message were removed. Instead, setting the options stale-issue-message and stale-pr-message will be enough to let the stale workflow add a comment. If the options are unset, a comment will not be added which was the equivalent of setting skip-stale-issue-message to true.
The operations-per-run option will be more effective. After migrating, you could face a failed-fast process workflow if you let the default value (30) or set it to a small number. In that case, you will see a warning at the end of the logs (if enabled) indicating that the workflow was stopped sooner to avoid consuming too much API calls. In most cases, you can just increase this limit to make sure to process everything in a single run.




Commits

cdf15f6 Prep for v4 (#510)
a78d0b7 Make label comparison case insensitive (#517)
d901397 Filter comments by content instead of actor (#519)
678bfc7 docs(readme): update the permissions docs to reflect the requirements of the ...
d3bfc50 Revert ""feat(options): add new options to avoid stale base on comments (#494)...
f2ae27a build(deps-dev): bump @​typescript-eslint/parser from 4.22.1 to 4.26.1 (#496)
4d1e45b build(deps-dev): bump typescript from 4.2.4 to 4.3.2 (#490)
92d4fc6 📝 Add requested permissions (#492)
1efddcb feat(options): add new options to avoid stale base on comments (#494)
f1017f3 fix(dry-run): forbid mutations in dry-run (#500)
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.
Dependabot will merge this PR once CI passes on it, as requested by @catthehacker.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,5
799,2021-09-08T13:47:10Z,,2021-09-25T19:13:22Z,2,5,5,"Bumps actions/setup-go from 1 to 2.1.4.

Release notes
Sourced from actions/setup-go's releases.

v2.1.4
What's Changed

Fix extractor selection on windows by @​paulcacheux in actions/setup-go#141

New Contributors

@​paulcacheux made their first contribution in actions/setup-go#141

Full Changelog: actions/setup-go@v2.1.3...v2.1.4
v2.1.3

Updated communication with runner to use environment files rather then workflow commands

v2.1.2
This release includes vendored licenses for this action's npm dependencies.
v2.1.1
Switch to main branch of go-versions repository to consume latest added versions
v2.1.0
Go binaries are downloaded from go-versions releases with a read through to the go dist source on miss.
v2.0.3
Proxy support
Bug fixes with semver matching
add bin to the path
stable option so you can specify not stable versions.
Test coverage including mocking to cover actions code arcs (no internet needed)
e2e workflow to validate downloading versions
problem matchers with less false hits
output final resolved version to logs
output go env in expanding block
v2.0.2 (beta)
Still a v2 beta
Proxy support
Bug fixes with semver matching
add bin to the path
stable option so you can specify not stable versions.
Test coverage including mocking to cover actions code arcs (no internet needed)
e2e workflow to validate downloading versions
problem matchers with less false hits
output final resolved version to logs
v2.0.1 (beta)
Still a v2 beta
Proxy support
Bug fixes with semver matching
add bin to the path
stable option so you can specify not stable versions.
Test coverage including mocking to cover actions code arcs (no internet needed)


... (truncated)


Commits

331ce1d Merge pull request #141 from paulcacheux/fix-windows-extractor-selection
1087a81 Merge pull request #146 from actions/joshmgross/add-release-workflow
ecd878f Add release action version workflow
bba6fe1 Fix extractor selection on windows
3b4dc6c Merge pull request #90 from actions/joshmgross/add-codeowners
afe68ff Add CODEOWNERS
37335c7 Swap to Environment Files (#76)
7ff6287 Merge pull request #70 from thboop/main
084110f Ignore Generated Files in Git PR's
4047b11 Manually review dependencies
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,3
801,2021-09-08T13:47:16Z,,2021-09-20T02:09:18Z,1,1,1,"Bumps codecov/codecov-action from 1.5.2 to 2.0.3.

Release notes
Sourced from codecov/codecov-action's releases.

v2.0.3
2.0.3
Fixes

#464 Fix wrong link in the readme
#485 fix: Add override OS and linux default to platform

Dependencies

#447 build(deps): bump openpgp from 5.0.0-4 to 5.0.0-5
#458 build(deps-dev): bump eslint from 7.31.0 to 7.32.0
#465 build(deps-dev): bump @​typescript-eslint/eslint-plugin from 4.28.4 to 4.29.1
#466 build(deps-dev): bump @​typescript-eslint/parser from 4.28.4 to 4.29.1
#468 build(deps-dev): bump @​types/jest from 26.0.24 to 27.0.0
#470 build(deps-dev): bump @​types/node from 16.4.0 to 16.6.0
#472 build(deps): bump path-parse from 1.0.6 to 1.0.7
#473 build(deps-dev): bump @​types/jest from 27.0.0 to 27.0.1
#478 build(deps-dev): bump @​typescript-eslint/parser from 4.29.1 to 4.29.2
#479 build(deps-dev): bump @​typescript-eslint/eslint-plugin from 4.29.1 to 4.29.2
#481 build(deps-dev): bump @​types/node from 16.6.0 to 16.6.2
#483 build(deps-dev): bump @​vercel/ncc from 0.29.0 to 0.29.2
#484 build(deps): bump @​actions/core from 1.4.0 to 1.5.0

v2.0.2
Fixes

Underlying uploader fixes issues with tokens not being sent properly for users seeing
Error!: Error: Error uploading to https://codecov.io: Error: Error uploading to Codecov: Error: Not Found
#432 fix: use import to destructure package.json
#434 fix: openpgp and asn1.js
#440 2.0.2 token fixes

Dependencies

#420 Bump eslint from 7.30.0 to 7.31.0
#433 build(deps-dev): bump @​types/node from 16.3.3 to 16.4.0
#425 build(deps-dev): bump @​typescript-eslint/eslint-plugin from 4.28.3 to 4.28.4
#426 build(deps-dev): bump @​typescript-eslint/parser from 4.28.3 to 4.28.4
#438 Set up Dependabot for github-actions dependencies

v2.0.1
Fixes

#424 fix: Issue in building all deep dependencies

v2.0.0
On February 1, 2022, the v1 uploader will be full sunset and no longer function. This is due
to the deprecation of the underlying bash uploader. This version uses the new uploader.
The v2 Action downloads, verifies, and runs the Codecov binary.
Breaking Changes

Multiple fields have not been transferred from the bash uploader or have been deprecated. Notably
many of the functionalities and gcov_ arguments have been removed. Please check the documentation



... (truncated)


Changelog
Sourced from codecov/codecov-action's changelog.

2.0.3
Fixes

#464 Fix wrong link in the readme
#485 fix: Add override OS and linux default to platform

Dependencies

#447 build(deps): bump openpgp from 5.0.0-4 to 5.0.0-5
#458 build(deps-dev): bump eslint from 7.31.0 to 7.32.0
#465 build(deps-dev): bump @​typescript-eslint/eslint-plugin from 4.28.4 to 4.29.1
#466 build(deps-dev): bump @​typescript-eslint/parser from 4.28.4 to 4.29.1
#468 build(deps-dev): bump @​types/jest from 26.0.24 to 27.0.0
#470 build(deps-dev): bump @​types/node from 16.4.0 to 16.6.0
#472 build(deps): bump path-parse from 1.0.6 to 1.0.7
#473 build(deps-dev): bump @​types/jest from 27.0.0 to 27.0.1
#478 build(deps-dev): bump @​typescript-eslint/parser from 4.29.1 to 4.29.2
#479 build(deps-dev): bump @​typescript-eslint/eslint-plugin from 4.29.1 to 4.29.2
#481 build(deps-dev): bump @​types/node from 16.6.0 to 16.6.2
#483 build(deps-dev): bump @​vercel/ncc from 0.29.0 to 0.29.2
#484 build(deps): bump @​actions/core from 1.4.0 to 1.5.0

2.0.2
Fixes

Underlying uploader fixes issues with tokens not being sent properly for users seeing
Error!: Error: Error uploading to https://codecov.io: Error: Error uploading to Codecov: Error: Not Found
#440 fix: Validation ordering

2.0.1
Fixes

#424 fix: Issue in building all deep dependencies

2.0.0
On February 1, 2022, the v1 uploader will be full sunset and no longer function. This is due
to the deprecation of the underlying bash uploader. This version uses the new uploader.
The v2 Action downloads, verifies, and runs the Codecov binary.
Breaking Changes

Multiple fields have not been transferred from the bash uploader or have been deprecated. Notably
many of the functionalities and gcov_ arguments have been removed. Please check the documentation
for the full list.

Features

dry-run argument allows Codecov flow without uploading reports to Codecov
(Enterprise only) slug allows specifying the repository slug manually
(Enterprise only) url allows changing the upload host




Commits

5a8bb47 Merge pull request #485 from codecov/alternate-os
3e9a281 Merge pull request #481 from codecov/dependabot/npm_and_yarn/types/node-16.6.2
6feb914 chore: Update CHANGELOG
9f40d31 build(deps-dev): bump @​types/node from 16.6.0 to 16.6.2
c4e74fe Merge pull request #483 from codecov/dependabot/npm_and_yarn/vercel/ncc-0.29.2
6ba3fb3 Merge pull request #479 from codecov/dependabot/npm_and_yarn/typescript-eslin...
7efb9be build(deps-dev): bump @​typescript-eslint/eslint-plugin
514990d build(deps-dev): bump @​vercel/ncc from 0.29.0 to 0.29.2
cd6db5e Merge pull request #484 from codecov/dependabot/npm_and_yarn/actions/core-1.5.0
678cc77 Merge pull request #478 from codecov/dependabot/npm_and_yarn/typescript-eslin...
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.
Dependabot will merge this PR once CI passes on it, as requested by @catthehacker.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,4
802,2021-09-08T14:00:42Z,2021-09-10T15:34:10Z,2021-09-10T15:34:10Z,2,3,2,"Bumps github.com/go-git/go-billy/v5 from 5.0.0 to 5.3.1.

Release notes
Sourced from github.com/go-git/go-billy/v5's releases.

v5.3.1

util: fix TempDir and TempFile on non-root filesystems (3bf3fe5)

v5.3.0

util: add ReadFile function
osfs: add Default to avoid repetitive code

v5.2.0
Changelog

osfs: js/wasm implementation based on menfs

v5.1.0
Change Log

memfs: ReadDir sorted by filename #13 (MetalBlueberry)
memfs: Add support for O_EXC to memfs #10 (jawr)




Commits

3bf3fe5 util: fix TempDir and TempFile on non-root filesystems
af7e4ac util: add ReadFile function
40a2dbe osfs: add Default to avoid repetitive code
42ead41 osfs: fix js implementation based on menfs
43a34ba github action: update versions and support js testing
8d1f328 Merge pull request #15 from paralin/gopherjs-compat
36058ce osfs: add js shim
3d7f61f memfs: fix bad merge
d62fe84 Merge pull request #10 from jawr/o_excl
c862faa Merge branch 'master' into o_excl
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,5
804,2021-09-08T14:01:17Z,,2021-09-25T19:13:24Z,2,5,3,"Bumps github.com/mattn/go-isatty from 0.0.12 to 0.0.14.

Commits

504425e Merge pull request #66 from cookieY/sys
ee4b64c Update golang.org/x/sys commit hash to 0f9fa26a
68134e7 Merge pull request #65 from shogo82148/introduce-go-build-comments
bea4d7c Merge pull request #64 from shogo82148/migrate-github-actions
3ba961d add //go:build
56b25a0 migrate from travis-ci to GitHub Actions
712ea5b Merge pull request #62 from marcauberer/master
be5a901 Fix typo
8b0c6d8 Merge pull request #61 from tklauser/fix-solaris-isterminal
518b0c1 Don't set termio in IsTerminal on solaris
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.
Dependabot will merge this PR once it's up-to-date and CI passes on it, as requested by @catthehacker.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,9
805,2021-09-08T14:01:54Z,,2021-09-25T19:13:23Z,2,31,26,"Bumps github.com/go-git/go-git/v5 from 5.2.0 to 5.4.2.

Release notes
Sourced from github.com/go-git/go-git/v5's releases.

v5.4.2
Change Log

Revert ""plumbing: format/packfile, prevent large objects from being read into memory completely (#303) (da81027)

v5.4.1
Change Log

remote: patch default timeout for List from 600ms to 10s (#321)

v5.4.0
Change Log

Repository: test, use raw string to avoid double-escape #288 (jeffwidman)
Remote: new ListContext function #278 (xiujuan95)
Remote: add support for deepening shallow clones #311 (marwatk)
Submodele, fetch submodules pointing to orphaned but still reachable commits #284 (edigaryev)
plumbing: object/patch, printStat strings.Repeat cause panic #310 (cookeem)
plumbing: format/packfile, prevent large objects from being read into memory completely #303 (zeripath)
plumbing: transport/ssh, support more formats in NewPublicKeys SSH helper #298 (hiddeco)
*: replace golang.org/x/crypto/openpgp by github.com/ProtonMail/go-crypto/openpgp #283 (johanfleury)
*: typo fixes #291 (jeffwidman)
*: minor doc fixes #287 (jeffwidman)
*: remove unused unexported const #286 (jeffwidman)

v5.3.0
Change Log

transport: ssh, fix cloning large repositories #272 (dcu)
diff: Allow srcPrefix and dstPrefix to be configured #265 (yabberyabber)
Remote: add RequireRemoteRefs to PushOptions #258 (asuffield)
plumbing: gitignore, Fix gitconfig path in LoadSystemPatterns doc #256 (andrewarchi)
plumbing: wire up contexts for Transport.AdvertisedReferences #246 (asuffield)
worktree: Don't remove root directory when cleaning #230 (hansmi)
*: add insecureSkipTLS and cabundle #228 (StrongMonkey)
git: worktree_commit, just store objects not already stored #224 (jsteuer)
plumbing: packp: adding ""object-format"" and ""filter"" capabilities #222 (rofc)
Submodule: fix relative submodule resolution #195 (adracus)
git: worktree, Support relative submodule URL. #184 (mikyk10)
config: add init.defaultBranch to the config #178 (tomlazar)
config: support insteadOf for remotes' URLs #79 (kostyay)




Commits

da81027 Revert ""plumbing: format/packfile, prevent large objects from being read into...
db4233e remote: patch default timeout for List (#321)
720c192 plumbing: format/packfile, prevent large objects from being read into memory ...
e6e2339 plumbing: object/patch, printStat strings.Repeat cause panic (#310)
320db9a git: Add support for deepening shallow clones (#311)
db2bc57 plumbing: transport/http, skip flaky test
c12f5b6 go modules: update go-git-fixtures
01df753 *: use go-billy instead of os calls
67af9d7 utils: ioutil, Pipe implementatio
c69d533 plumbing: format, use os.UserHomeDir()
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,7
806,2021-09-08T14:02:14Z,,2021-09-25T19:13:22Z,2,3,3,"Bumps github.com/docker/cli from 20.10.3+incompatible to 20.10.8+incompatible.

Commits

3967b7d Merge pull request #3224 from thaJeztah/20.10_backport_bump_go_1.16.6
0b924e5 Update to go1.16.6
6288e8b change TestNewAPIClientFromFlagsWithHttpProxyEnv to an e2e test
1e9575e cli/config/configfile: various test cleanups
c98e9c4 Use designated test domains (RFC2606) in tests
a6f6b5f Merge pull request #3219 from thaJeztah/20.10_backport_deprecate_encrypted_tls
8437cfe context: deprecate support for encrypted TLS private keys
68a5ca8 cli/context: ignore linting warnings about RFC 1423 encryption
f9d091f Merge pull request #3174 from thaJeztah/20.10_backport_deprecate_kube
e9b8231 Merge pull request #3205 from thaJeztah/20.10_backport_update_dockerfile_syntax
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",1,5
809,2021-09-09T19:36:02Z,2021-09-10T05:03:41Z,2021-09-10T05:03:41Z,6,53,0,fixes #808,3,1
810,2021-09-10T07:44:06Z,2021-09-26T16:08:52Z,2021-09-26T16:08:52Z,1,7,1,"As we can see here: #799, warn on needs-work and remove needs-work label if not needed rule are fighting each other to manage the label needs-work.
This change makes the CI list explicit, to set/unset needs-work as expected.",3,2
815,2021-09-13T20:29:11Z,2021-09-13T23:14:41Z,2021-09-13T23:14:42Z,1,1,1,Addresses #741,3,1
819,2021-09-20T02:09:14Z,2021-09-23T07:12:30Z,2021-09-23T07:12:30Z,1,1,1,"Bumps codecov/codecov-action from 1.5.2 to 2.1.0.

Release notes
Sourced from codecov/codecov-action's releases.

v2.1.0
2.1.0
Features

#515 Allow specifying version of Codecov uploader

Dependencies

#499 build(deps-dev): bump @​vercel/ncc from 0.29.0 to 0.30.0
#508 build(deps): bump openpgp from 5.0.0-5 to 5.0.0
#514 build(deps-dev): bump @​types/node from 16.6.0 to 16.9.0

v2.0.3
2.0.3
Fixes

#464 Fix wrong link in the readme
#485 fix: Add override OS and linux default to platform

Dependencies

#447 build(deps): bump openpgp from 5.0.0-4 to 5.0.0-5
#458 build(deps-dev): bump eslint from 7.31.0 to 7.32.0
#465 build(deps-dev): bump @​typescript-eslint/eslint-plugin from 4.28.4 to 4.29.1
#466 build(deps-dev): bump @​typescript-eslint/parser from 4.28.4 to 4.29.1
#468 build(deps-dev): bump @​types/jest from 26.0.24 to 27.0.0
#470 build(deps-dev): bump @​types/node from 16.4.0 to 16.6.0
#472 build(deps): bump path-parse from 1.0.6 to 1.0.7
#473 build(deps-dev): bump @​types/jest from 27.0.0 to 27.0.1
#478 build(deps-dev): bump @​typescript-eslint/parser from 4.29.1 to 4.29.2
#479 build(deps-dev): bump @​typescript-eslint/eslint-plugin from 4.29.1 to 4.29.2
#481 build(deps-dev): bump @​types/node from 16.6.0 to 16.6.2
#483 build(deps-dev): bump @​vercel/ncc from 0.29.0 to 0.29.2
#484 build(deps): bump @​actions/core from 1.4.0 to 1.5.0

v2.0.2
Fixes

Underlying uploader fixes issues with tokens not being sent properly for users seeing
Error!: Error: Error uploading to https://codecov.io: Error: Error uploading to Codecov: Error: Not Found
#432 fix: use import to destructure package.json
#434 fix: openpgp and asn1.js
#440 2.0.2 token fixes

Dependencies

#420 Bump eslint from 7.30.0 to 7.31.0
#433 build(deps-dev): bump @​types/node from 16.3.3 to 16.4.0
#425 build(deps-dev): bump @​typescript-eslint/eslint-plugin from 4.28.3 to 4.28.4
#426 build(deps-dev): bump @​typescript-eslint/parser from 4.28.3 to 4.28.4
#438 Set up Dependabot for github-actions dependencies

v2.0.1
Fixes

#424 fix: Issue in building all deep dependencies



... (truncated)


Changelog
Sourced from codecov/codecov-action's changelog.

2.1.0
Features

#515 Allow specifying version of Codecov uploader

Dependencies

#499 build(deps-dev): bump @​vercel/ncc from 0.29.0 to 0.30.0
#508 build(deps): bump openpgp from 5.0.0-5 to 5.0.0
#514 build(deps-dev): bump @​types/node from 16.6.0 to 16.9.0

2.0.3
Fixes

#464 Fix wrong link in the readme
#485 fix: Add override OS and linux default to platform

Dependencies

#447 build(deps): bump openpgp from 5.0.0-4 to 5.0.0-5
#458 build(deps-dev): bump eslint from 7.31.0 to 7.32.0
#465 build(deps-dev): bump @​typescript-eslint/eslint-plugin from 4.28.4 to 4.29.1
#466 build(deps-dev): bump @​typescript-eslint/parser from 4.28.4 to 4.29.1
#468 build(deps-dev): bump @​types/jest from 26.0.24 to 27.0.0
#470 build(deps-dev): bump @​types/node from 16.4.0 to 16.6.0
#472 build(deps): bump path-parse from 1.0.6 to 1.0.7
#473 build(deps-dev): bump @​types/jest from 27.0.0 to 27.0.1
#478 build(deps-dev): bump @​typescript-eslint/parser from 4.29.1 to 4.29.2
#479 build(deps-dev): bump @​typescript-eslint/eslint-plugin from 4.29.1 to 4.29.2
#481 build(deps-dev): bump @​types/node from 16.6.0 to 16.6.2
#483 build(deps-dev): bump @​vercel/ncc from 0.29.0 to 0.29.2
#484 build(deps): bump @​actions/core from 1.4.0 to 1.5.0

2.0.2
Fixes

Underlying uploader fixes issues with tokens not being sent properly for users seeing
Error!: Error: Error uploading to https://codecov.io: Error: Error uploading to Codecov: Error: Not Found
#440 fix: Validation ordering

2.0.1
Fixes

#424 fix: Issue in building all deep dependencies

2.0.0
On February 1, 2022, the v1 uploader will be full sunset and no longer function. This is due
to the deprecation of the underlying bash uploader. This version uses the new uploader.
The v2 Action downloads, verifies, and runs the Codecov binary.
Breaking Changes

Multiple fields have not been transferred from the bash uploader or have been deprecated. Notably
many of the functionalities and gcov_ arguments have been removed. Please check the documentation
for the full list.



... (truncated)


Commits

f32b3a3 Merge pull request #515 from codecov/specify-version
72dfd47 Allow specifying version of Codecov uploader
46edaed Merge pull request #499 from codecov/dependabot/npm_and_yarn/vercel/ncc-0.30.0
b6fd8cc Merge pull request #508 from codecov/dependabot/npm_and_yarn/openpgp-5.0.0
07a4e97 build(deps-dev): bump @​vercel/ncc from 0.29.0 to 0.30.0
c071c70 build(deps): bump openpgp from 5.0.0-5 to 5.0.0
f6d4366 Merge pull request #514 from codecov/dependabot/npm_and_yarn/types/node-16.9.0
2bbefc9 build(deps-dev): bump @​types/node from 16.6.0 to 16.9.0
5a8bb47 Merge pull request #485 from codecov/alternate-os
3e9a281 Merge pull request #481 from codecov/dependabot/npm_and_yarn/types/node-16.6.2
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",1,3
821,2021-09-21T11:48:38Z,2021-09-22T19:43:58Z,2021-09-22T19:43:58Z,4,19,32,"Fixes #645
GitHub removes ubuntu-16.04 environment since it reached standard EOL.
We will follow that change and remove default images for ubuntu-16.04 but it doesn't prevent users from using that platform.
To still use ubuntu-16.04, apart from being defined in workflow, it has to be specified via -P/--platform flags, e.g.:
act -P ubuntu-16.04=ghcr.io/catthehacker/ubuntu:act-16.04
.actrc:
-P ubuntu-16.04=node:12-stretch-slim

I'm not planning on removing Ubuntu 16.04 images, but they will eventually stop receiving updates so I advise on migrating to newer Ubuntu.

fix: remove specific platform versions: remove mention of specific versions to remove confusion since platforms such as macos-11 or windows-2022, windows-2016 exist
Platforms still will be properly inferred from workflow and README.md mentions about macOS and Windows
  ~/go/src/github.com/nektos/act cat/fix/remove-ubuntu-16.04 *14 ❯ go run main.go -W .github/workflows/test-windows.yml                                12:20:27 PM
[test-windows.yml/test] 🚧  Skipping unsupported platform -- Try running with `-P windows-latest=...`
  ~/go/src/github.com/nektos/act cat/fix/remove-ubuntu-16.04 *14 ❯ go run main.go -W .github/workflows/test-windows.yml                                12:21:46 PM
[test-windows.yml/test] 🚧  Skipping unsupported platform -- Try running with `-P windows-2016=...`
  ~/go/src/github.com/nektos/act cat/fix/remove-ubuntu-16.04 *14 ❯",2,1
822,2021-09-23T07:28:55Z,2021-09-25T19:13:22Z,2021-09-25T19:13:24Z,5,548,29,"Closes #806
Closes #799
Closes #798
Closes #813
Closes #812
Closes #805
Closes #804
My bad, could have bumped them together with dependabot config",2,2
823,2021-09-24T21:58:25Z,2021-09-26T16:21:13Z,2021-09-26T16:21:13Z,1,15,1,"Adds concurrency limit based on max-parallel key from strategy
In case of missing key, it uses default value 4
If there is less jobs than default max parallel, it will set max parallel to count of jobs.
Currently it will run max parallel jobs, wait for finish, then start another batch of jobs.
Related issue: #158
TODO: job.Strategy should always be available even if it's not specified in workflow, so then we won't have to redefine maxParallel limit to 4",3,6
824,2021-09-25T19:30:06Z,2021-09-26T16:47:33Z,2021-09-26T16:47:33Z,2,14,81,"Bumps github.com/joho/godotenv from 1.3.0 to 1.4.0.

Release notes
Sourced from github.com/joho/godotenv's releases.

Housekeeping release

Sorry all, it's been a long time between releases. I have small children now!
Biggest changes are:
#133 Fix missing newline on exported files @​gnarlex
#109 Export ints without quotes @​mniak
#70 Support keynames starting with export @​hairyhenderson
I'll try and come back and amend the release with other PR contributors, but thank you to everyone who sent patches in.
Next release will include multiline variables.



Commits

ddf83eb Add missing newline to created env files (#133)
f562099 Add renovate.json (#124)
c49ef66 Fix release name
c142d16 Try a different github action
4e2d182 Add action to publish binaries on each release (#125)
65218af Add a go.mod file (#123)
aa035a1 Non amd tests (#122)
23296b9 Merge pull request #121 from joho/github-actions
e57c08d Add CI badge to readme
573e918 Matrix test across mac/win/linux
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,4
828,2021-09-27T09:19:27Z,2021-09-27T19:01:15Z,2021-09-27T19:01:15Z,5,83,62,"This is a replacement for #771 since i'm dumb the previous PR just adds environment to container and doesn't fix anything.
fixes #827
fixes #757 (for real this time)
fixes #161",2,6
829,2021-09-27T15:42:16Z,,2022-05-19T12:29:49Z,1,26,1,Enables using act in a worktree of Git (needs to follow the .git file directions),6,19
832,2021-09-27T20:50:52Z,2021-09-28T01:18:59Z,2021-09-28T01:19:00Z,2,6,3,"step env from workflow should be last one to be written
fixes #777",2,3
836,2021-10-11T02:34:19Z,,2021-10-31T13:48:07Z,2,3,3,"Bumps github.com/docker/cli from 20.10.8+incompatible to 20.10.9+incompatible.

Commits

c2ea9bc Merge pull request #3 from moby/20.10_backport_go_1.16.8
44fdac1 Update Go to 1.16.8
893e52c Merge pull request #2 from moby/cli-GHSA-99pg-grm5-qq3v-default-authconfig-20.10
62eae52 Merge pull request #3236 from thaJeztah/20.10_backport_bump_go_1.16.7
2012fbf Update Go to 1.16.7
42d1c02 registry: ensure default auth config has address
See full diff in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,8
837,2021-10-11T02:34:53Z,,2021-10-31T21:17:50Z,2,3,3,"Bumps github.com/docker/docker from 20.10.8+incompatible to 20.10.9+incompatible.

Release notes
Sourced from github.com/docker/docker's releases.

v20.10.9
This release is a security release with security fixes in the CLI, runtime, as
well as updated versions of the containerd.io package and the Go runtime.
Client

CVE-2021-41092
Ensure default auth config has address field set, to prevent credentials being
sent to the default registry.

Runtime

CVE-2021-41089
Create parent directories inside a chroot during docker cp to prevent a specially
crafted container from changing permissions of existing files in the host’s filesystem.
CVE-2021-41091
Lock down file permissions to prevent unprivileged users from discovering and
executing programs in /var/lib/docker.

Packaging

Update Golang runtime to Go 1.16.8, which contains fixes for CVE-2021-36221
and CVE-2021-39293
Update static binaries and containerd.io rpm and deb packages to containerd
v1.4.11 and runc v1.0.2 to address CVE-2021-41103.
Update the bundled buildx version to v0.6.3 for rpm and deb packages.




Commits

79ea9d3 Merge pull request #5 from moby/20.10_bump_go_1.16.8
fa78afe Update Go to 1.16.8
bce32e5 Merge pull request #4 from moby/20.10-GHSA-v994-f8vw-g7j4-chroot-mkdir
f0ab919 Merge pull request #2 from moby/20.10-GHSA-3fwx-pjgw-3558_0701-perms
80f1169 chrootarchive: don't create parent dirs outside of chroot
93ac040 Lock down docker root dir perms.
d24c6dc Merge pull request #42721 from thaJeztah/20.10_backport_bump_go_1.16.7
decb56a Update Go to 1.16.7
See full diff in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,7
838,2021-10-11T02:35:18Z,2021-10-18T20:24:05Z,2021-10-18T20:24:05Z,2,5,4,"Bumps github.com/moby/buildkit from 0.9.0 to 0.9.1.

Release notes
Sourced from github.com/moby/buildkit's releases.

v0.9.1
https://hub.docker.com/r/moby/buildkit
Notable changes


Builtin Dockerfile frontend has been updated to v1.3.1 changelog


Seccomp profile has been updated to properly handle clone3 syscall support. #2379


Fix possible panic on ARM32 due to struct alignment #2321


Fix occasional ""no active session"" and ""no such job"" errors on concurrent builds #2369


Fix flakiness during import of a cache with empty layers removed #2372


Handle ""edge not found"" error in build instead of panicking #2382 #2385


Fix problems with experimental Github Actions cache backend:

Add retry logic when API rate limits are reached tonistiigi/go-actions-cache#8
Remove BOM from error messages returned by API tonistiigi/go-actions-cache#6
Gracefully handle downloading blobs that have been removed from the cache moby/buildkit#2387
Fix ""cache already exists"" errors in certain conditions moby/buildkit#2387






Commits

966bcf4 Merge pull request #2391 from tonistiigi/v0.9-picks-20211004
ba1cf51 don't cast Value when pipe is errored
83f8183 return an error instead of panicking when failing to get edge
9a3c7aa vendor: update go-actions-cache to 4d48f2ff
f5213a5 solver: make sure previous error gets reset
bc42fdd gha: handle missing blob gracefully
121aab0 gha: handle already exist error on save
cf59036 Merge pull request #2386 from tonistiigi/v0.9-picks-10012021
e0ce30a solver: include cachemap index in flightcontrol.
6316fbc Fix issues #1980 and #2198
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,1
846,2021-10-18T15:40:50Z,2021-10-31T13:34:16Z,2021-10-31T13:34:16Z,1,1,1,currently it points to nektos owned tap but instruction is for homebrew-core,2,3
848,2021-10-21T23:57:17Z,2021-10-24T16:36:10Z,2021-10-24T16:36:10Z,3,2,11,"act has been for quite a long time in homebrew-core and it supports all macos/linux so there is no reason for us to have separate tap, as it might confuse some users",2,2
849,2021-10-22T00:03:55Z,2021-10-24T01:37:33Z,2021-10-24T01:37:33Z,1,1,1,macos-latest (macos-11) is broken,2,1
853,2021-10-31T13:02:04Z,2021-11-03T18:47:47Z,2021-11-03T18:47:48Z,8,76,3,"fix: set default shell for containers to sh
This matches GitHub Actions behaviour where, runners use bash since it's guaranteed to exist there while containers use sh for compatibility
tests: fixup for default shell
fixes #850",3,3
854,2021-10-31T13:48:05Z,2021-10-31T16:20:06Z,2021-10-31T16:20:07Z,2,3,3,"Bumps github.com/docker/cli from 20.10.8+incompatible to 20.10.10+incompatible.

Commits

b485636 Merge pull request #3331 from thaJeztah/20.10_backport_bump_go_1.16.9
241523c Merge pull request #3334 from thaJeztah/20.10_backport_docs
9989fdb Update most links in docs to use https by default
0e20c1f Update Go to 1.16.9
c4cb298 Merge pull request #3335 from thaJeztah/20.10_backport_remove_seccomp_warning
0b56256 Merge pull request #3336 from thaJeztah/20.10_backport_update_xx_image
1c0927a Dockerfile: update tonistiigi/xx to 1.0.0-rc.2, add XX_VERSION arg
82f9d59 info: skip client-side warning about seccomp profile on API >= 1.42
adb01ca docs: some minor touch-ups in checkpoint reference
8260476 docs: remove trailing space to fix generated YAML format
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,1
855,2021-10-31T21:17:48Z,2021-11-01T01:38:50Z,2021-11-01T01:38:50Z,2,3,3,"Bumps github.com/docker/docker from 20.10.8+incompatible to 20.10.10+incompatible.

Release notes
Sourced from github.com/docker/docker's releases.

v20.10.10
20.10.10

IMPORTANT
Due to net/http changes in Go 1.16,
HTTP proxies configured through the $HTTP_PROXY environment variable are no
longer used for TLS (https://) connections. Make sure you also set an $HTTPS_PROXY
environment variable for handling requests to https:// URLs.
Refer to the HTTP/HTTPS proxy section
to learn how to configure the Docker Daemon to use a proxy server.

Builder

Fix platform-matching logic to fix docker build using not finding images in
the local image cache on Arm machines when using BuildKit moby/moby#42954

Runtime

Add support for clone3 syscall in the default seccomp policy to support running
containers based on recent versions of Fedora and Ubuntu. [moby/moby/#42836](moby/moby#42836).
Windows: update hcsshim library to fix a bug in sparse file handling in container
layers, which was exposed by recent changes in Windows moby/moby#42944.
Fix some situations where docker stop could hang forever moby/moby#42956.

Swarm

Fix an issue where updating a service did not roll back on failure moby/moby#42875.

Packaging

Add packages for Ubuntu 21.10 ""Impish Indri"" and Fedora 35.
Update docker scan to v0.9.0
Update Golang runtime to Go 1.16.9.

v20.10.9
This release is a security release with security fixes in the CLI, runtime, as
well as updated versions of the containerd.io package and the Go runtime.
Client

CVE-2021-41092
Ensure default auth config has address field set, to prevent credentials being
sent to the default registry.

Runtime

CVE-2021-41089



... (truncated)


Commits

e2f740d Merge pull request #42959 from thaJeztah/20.10_backport_fix_racey_health_test
acb4f26 Fix racey TestHealthKillContainer
8ab80e4 Merge pull request #42957 from thaJeztah/20.10_backport_rootless_quotes
52f5b61 Merge pull request #42956 from cpuguy83/20.10-backport-kill-fixes
a4b1ae5 Merge pull request #42954 from crazy-max/20.10_build-local-normalized
59d2a2c dockerd-rootless.sh: Fix variable not double quotes cause unexpected behavior
2c6aa5a Remove needless check
3285c27 Fix log statement 'failed to exit' timeout accuracy
a4bcd4c docker daemon container stop refactor
bed624f docker kill: fix bug where failed kills didnt fallback to unix kill
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,1
856,2021-11-02T05:00:55Z,2021-11-03T18:47:09Z,2021-11-03T18:47:09Z,2,6,2,"I was getting output like this:
[choco/choco] Filesystem      Size  Used Avail Use%!M(MISSING)ounted on
overlay          59G  9.0G   47G  17%!/(MISSING)
tmpfs            64M     0   64M   0%!/(MISSING)dev
tmpfs           993M     0  993M   0%!/(MISSING)sys/fs/cgroup
shm              64M     0   64M   0%!/(MISSING)dev/shm
/dev/vda1        59G  9.0G   47G  17%!/(MISSING)etc/hosts
tmpfs           993M     0  993M   0%!/(MISSING)proc/acpi
tmpfs           993M     0  993M   0%!/(MISSING)sys/firmware

Which was very confusing.
Also output like this:
[choco/choco]  🐳  docker build -t act-github-actions-choco-dockeraction:latest --platform  /Users/jsoref/code/nektos/act/.github/actions/choco
[choco/choco] RBuilding image from '/Users/jsoref/code/nektos/act/.github/actions/choco'
[choco/choco] RCreating image from context dir '/Users/jsoref/code/nektos/act/.github/actions/choco' with tag 'act-github-actions-choco-dockeraction:latest' and platform ''",3,4
857,2021-11-02T05:04:43Z,,2021-11-04T13:44:14Z,1,7,7,"I'm not a huge fan of linters, but when I tried to run make, I tripped over a bunch of things. After a bit of thought, I eventually figured out some of them...
Sprinkling some quotation marks here seems like a reasonable compromise.
Note: I can't figure out how to make the linter happy about: for image in ${{ env.CACHED_DOCKER_IMAGES }} -- it is confident that the thing after in is a single value and not possibly multiple values. I suspect it's possible to trick it by writing that item to a file and then using cat to retrieve the contents of the file, but that seems quite a bit much.",3,6
859,2021-11-02T16:16:44Z,2021-11-12T23:20:45Z,2021-11-12T23:20:45Z,1,8,1,"We should reuse an existing context logger if available.
This will allow test to setup act with a null logger to assert log messages.",3,11
860,2021-11-02T16:27:48Z,2021-11-03T18:46:15Z,2021-11-03T18:46:15Z,2,0,102,"Running Docker on non-Linux platforms is very painful,
especially in CI. It's better to remove macOS for now,
until a better implementation is present.
Signed-off-by: hackercat me@hackerc.at",3,4
862,2021-11-02T17:57:38Z,2021-11-04T14:23:22Z,2021-11-04T14:23:22Z,1,15,7,https://blog.mergify.com/strict-mode-deprecation/,2,4
864,2021-11-08T02:27:55Z,2021-11-10T17:54:38Z,2021-11-10T17:54:39Z,2,3,3,"Bumps github.com/moby/buildkit from 0.9.1 to 0.9.2.

Release notes
Sourced from github.com/moby/buildkit's releases.

v0.9.2
https://hub.docker.com/r/moby/buildkit
Notable changes

Fix handling authentication requests with multiple scopes #2431
Fix a possible deadlock when pushing items from one registry to another #2403
Fix issues with concurrent cache export requests #2410
Fix handling external blob deletions when reexporting cache with Github Actions backend #2433




Commits

a14b4e0 Merge pull request #2444 from tonistiigi/v0.9-cherry-picks-20211101
dfc83c0 ci: fix git protocol
6c21d1e solver: fix exporters unsafely sharing records
f86b8eb gha: fix handling removed blobs on reexport
34abeb3 limited: fix possible deadlock when pushhandler calls fetcher
dd5e255 Handling parsing of multiple scopes combined in a single string.
See full diff in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,1
866,2021-11-10T17:49:40Z,,2022-02-02T17:37:31Z,46,12824,221,"fixes #626
Support for running actions that define post steps with or without post-if conditions
Made changes to support dependency injection for modeling Actions by using and implementing ActionProviders, this allows for improved mocking and testing Actions
Because this PR was first aimed at giving support to https://github.com/actions/cache , a simple local cache server is also provided in the form of a Docker image (necessary for the cache action to work properly)",3,13
868,2021-11-11T14:01:21Z,2021-11-27T18:05:56Z,2021-11-27T18:05:57Z,4,88,11,"Chore: add a snapshot target
Update: support credentials for private containers

Resolves: #788",5,9
870,2021-11-12T16:14:00Z,2021-11-12T20:48:11Z,2021-11-12T20:48:11Z,4,5,8,remove schema override since it was fixed in upstream,2,2
871,2021-11-12T19:58:15Z,2021-11-13T14:56:31Z,2021-11-13T14:56:31Z,2,3,2,Of course the same issue fixed in #34 exists for SSH URLs.,3,6
873,2021-11-12T21:47:41Z,2021-11-12T23:21:45Z,2021-11-12T23:21:45Z,2,0,23,"Introduced by mistake in #514
Signed-off-by: hackercat me@hackerc.at",2,1
876,2021-11-13T18:27:55Z,2021-11-13T19:43:32Z,2021-11-13T19:43:32Z,3,12,2,"Fixes #875
Signed-off-by: hackercat me@hackerc.at",2,2
878,2021-11-13T20:10:19Z,2021-11-24T15:51:38Z,2021-11-24T15:51:38Z,5,10,3,"Adds option to rebuild local action docker images
which is disabled by default (old behaviour)
Fixes #715
Signed-off-by: hackercat me@hackerc.at",2,1
882,2021-11-15T02:24:28Z,2021-11-15T14:33:01Z,2021-11-15T14:33:02Z,2,3,3,"Bumps github.com/go-ini/ini from 1.63.2 to 1.64.0.

Commits

c2f10d6 file: fix legacy tests
1c1c7ac Fix creation of default section (#301)
6a280a6 README: update minimum requirement Go version to be 1.12
See full diff in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",1,1
883,2021-11-15T09:52:04Z,2021-11-15T14:26:04Z,2021-11-15T14:26:04Z,2,3,2,,3,1
887,2021-11-17T08:10:18Z,2021-11-27T17:55:26Z,2021-11-27T17:55:26Z,8,107,15,"Add more steps context support to match GitHub:
https://docs.github.com/en/actions/learn-github-actions/contexts#steps-context
Should reference #465 and #557.
Changes
Add step outcome
steps.<step id>.outcome string is the result of a completed step before continue-on-error.
Remove step success in favour of conclusion
steps.<step id>.conclusion string is the result of a completed step after continue-on-error is applied, which currently matches the original stepResult.Success value. So, respectively, all checks have been replaced:

Success == true → Conclusion == stepStatusSuccess
Success == false → Conclusion == stepStatusFailure

Tested on

Linux (Ubuntu 20.04.3 LTS x86_64)

All runner package tests have passed. The following workflow has been used to check the behaviour as well:
name: test
on: push

jobs:
  action-check:
    runs-on: ubuntu-latest
    steps:
      - name: First
        id: first
        run: exit 0
      - name: Second
        continue-on-error: true
        id: second
        run: exit 1
      - run: echo '${{ toJSON(steps.first) }}'
      - run: echo '${{ toJSON(steps.second) }}'

Output (before)
[test/action-check] 🚀  Start image=node:12-buster-slim
[test/action-check]   🐳  docker pull image=node:12-buster-slim platform= username= forcePull=false
[test/action-check]   🐳  docker create image=node:12-buster-slim platform= entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[test/action-check]   🐳  docker run image=node:12-buster-slim platform= entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[test/action-check]   🐳  docker exec cmd=[mkdir -m 0777 -p /var/run/act] user=root workdir=
[test/action-check] ⭐  Run First
[test/action-check]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /home/victor/Forks/act/workflow/first] user= workdir=
[test/action-check]   ✅  Success - First
[test/action-check] ⭐  Run Second
[test/action-check]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /home/victor/Forks/act/workflow/second] user= workdir=
[test/action-check]   ❌  Failure - Second
[test/action-check] Failed but continue next step
[test/action-check] ⭐  Run echo '${{ toJSON(steps.first) }}'
[test/action-check]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /home/victor/Forks/act/workflow/2] user= workdir=
| {
|   ""success"": true,
|   ""outputs"": {}
| }
[test/action-check]   ✅  Success - echo '${{ toJSON(steps.first) }}'
[test/action-check] ⭐  Run echo '${{ toJSON(steps.second) }}'
[test/action-check]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /home/victor/Forks/act/workflow/3] user= workdir=
| {
|   ""success"": true,
|   ""outputs"": {}
| }
[test/action-check]   ✅  Success - echo '${{ toJSON(steps.second) }}'
INFO[0002] Cleaning up container for job action-check


Output (after)
[test/action-check] 🚀  Start image=node:12-buster-slim
[test/action-check]   🐳  docker pull image=node:12-buster-slim platform= username= forcePull=false
[test/action-check]   🐳  docker create image=node:12-buster-slim platform= entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[test/action-check]   🐳  docker run image=node:12-buster-slim platform= entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[test/action-check]   🐳  docker exec cmd=[mkdir -m 0777 -p /var/run/act] user=root workdir=
[test/action-check] ⭐  Run First
[test/action-check]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /home/victor/Forks/act/workflow/first] user= workdir=
[test/action-check]   ✅  Success - First
[test/action-check] ⭐  Run Second
[test/action-check]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /home/victor/Forks/act/workflow/second] user= workdir=
[test/action-check]   ❌  Failure - Second
[test/action-check] Failed but continue next step
[test/action-check] ⭐  Run echo '${{ toJSON(steps.first) }}'
[test/action-check]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /home/victor/Forks/act/workflow/2] user= workdir=
| {
|   ""conclusion"": ""success"",
|   ""outcome"": ""success"",
|   ""outputs"": {}
| }
[test/action-check]   ✅  Success - echo '${{ toJSON(steps.first) }}'
[test/action-check] ⭐  Run echo '${{ toJSON(steps.second) }}'
[test/action-check]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /home/victor/Forks/act/workflow/3] user= workdir=
| {
|   ""conclusion"": ""success"",
|   ""outcome"": ""failure"",
|   ""outputs"": {}
| }
[test/action-check]   ✅  Success - echo '${{ toJSON(steps.second) }}'
INFO[0002] Cleaning up container for job action-check",4,4
889,2021-11-17T19:52:08Z,2022-01-21T16:10:01Z,2022-01-21T16:10:01Z,3,247,51,"With this change act will try to populate the githubContext.ref and
githubContext.sha with values read from the event payload.
Caveats:

page_build should not have a ref
status should not have a ref
registry_package should set the ref to the branch/tag but the
payload isn't documented
workflow_call should set ref to the same value as its caller but the
payload isn't documented
most of the events should set the sha to the last commit on the ref
but unfortunately the sha is not always included in the payload,
therefore we use the sha from the local git checkout",4,5
890,2021-11-17T20:54:28Z,2021-11-19T14:42:40Z,2021-11-19T14:42:40Z,1,1,8,"Reverts #859
That PR broke colours for jobs and prints nils for certain lines (see above PR for context)
note for me (and maybe others): verify future PRs touching loggers on local machine",2,1
891,2021-11-18T16:22:34Z,2021-11-27T18:21:32Z,2021-11-27T18:21:32Z,5,74,2,"This PR uses parts of the docker/cli to read the local docker config to get the authentication from it.
This is helpful for private registries, which worked before, but required to pass DOCKER_USERNAME and DOCKER_PASSWORD as secrets.
Now it will take existing authentication information from the Docker CLI if the secrets are not explicitly passed.",4,4
894,2021-11-20T13:11:20Z,2021-11-24T15:49:08Z,2021-11-24T15:49:09Z,4,60,15,"All credits go to @ChristopherHX which fixed this issue (ChristopherHX@fd9f40c).
I only created a PR for this so it will be fixed in the upstream binary.
This fixes #758",4,7
908,2021-11-29T16:45:32Z,2022-01-21T16:07:20Z,2022-01-21T16:07:21Z,12,2028,689,"This is an early draft to showcase the general direction we're going with this change.
We will of course rebase the commits, so that we can create separate PRs for the preparation-changes (refactoring of contexts, etc).
Also there's still a few TODO comments that we have to resolve before this PR is ready to merge.
Anyways, feedback is welcome :)
Next steps:

 manually track position in evaluator (actionlint parser gives us only the starting position of a token, but we need to know how far we've parsed)
 extend toString to be able to print all types
 get act tests to pass with the exprparser package
 clean-up errors, todos, tests, etc",5,34
911,2021-12-02T14:48:24Z,2021-12-08T18:49:34Z,2021-12-08T18:49:34Z,6,32,15,"Fix typo in .editorconfig + add formatting for all files
Fix chocolatey installation according to official instruction
Add test for choco action",2,6
920,2021-12-09T12:34:16Z,2021-12-09T15:10:57Z,2021-12-09T15:10:57Z,2,11,1,"This special command allows you to log anything without accidentally running a workflow command.
https://docs.github.com/en/actions/learn-github-actions/workflow-commands-for-github-actions#stopping-and-starting-workflow-commands

Example: https://github.com/ZauberNerd/act-test/runs/4469496818?check_suite_focus=true#step:8:10",3,1
922,2021-12-10T20:39:42Z,2021-12-22T19:34:18Z,2021-12-22T19:34:18Z,27,9200,32,"Changes:

Bump all images to NodeJS 16.x
Add support for node16 in actions

To do:

Add support to find the right version of node in the image for each node key

node16 finds node in /opt/hostedtoolcache/node/16.*.*/, etc.
this will be addressed in new PR



Closes #910",3,8
929,2021-12-15T20:04:03Z,2021-12-16T05:11:56Z,2021-12-16T05:11:57Z,3,5,5,Signed-off-by: hackercat me@hackerc.at,2,2
930,2021-12-16T12:21:41Z,2021-12-22T06:37:16Z,2021-12-22T06:37:17Z,9,164,79,"move all logic to separate function so we can test that later
split step.Shell and step.WorkingDirectory setup into own funcs
general cleanup of function
use ActPath to not collide with checked out repository (also avoids issues if path contains spaces)
use shellquote.Split() instead of strings.Fields() for better command split
replace single string concat with fmt

Fixes #884
Fixes #865
Signed-off-by: hackercat me@hackerc.at",4,1
931,2021-12-16T13:42:12Z,2021-12-22T19:52:09Z,2021-12-22T19:52:09Z,10,132,124,"This commit moves the githubContext, jobContext and stepResult structs
from the runner package to the model package in preparation for #908
because the expression.go file lives in the runner package and would
introduce cyclic dependencies with the exprparser package.",3,7
934,2021-12-20T21:38:39Z,,2022-02-06T00:08:23Z,5,11,2,"This recursively changes ownership of all copied files and other working folders to runner inside the container, or whichever user is specified by --container-user.
Fixes #398 both with and without --bind, thanks to the --container-user patch by @catthehacker:
catthehacker@a4dd723",2,3
937,2021-12-22T16:21:54Z,2021-12-27T16:18:30Z,2021-12-27T16:18:31Z,1,40,40,"Fixes #936
godownloader has been deprecated and it's not updated anymore so this is ""best effort"" fix based on godownloader v2 branch
Signed-off-by: hackercat me@hackerc.at",2,2
938,2021-12-22T17:47:28Z,2021-12-22T19:11:17Z,2021-12-22T19:11:17Z,1,1,0,"Disable link check linter since it will cause false positives, example: https://github.com/nektos/act/runs/4609894750",2,3
942,2021-12-29T09:32:34Z,2022-01-01T17:04:37Z,2022-01-01T17:04:38Z,1,15,0,"Adds option for prelease tags, e.g. v0.2.26-rc1 (release candidate)
Add changelog format to group same type commits",2,3
945,2021-12-30T19:00:38Z,2022-01-21T16:08:30Z,2022-01-21T16:08:31Z,5,32,5,"fix: conclusion and outcome after error with failure condition
fix: continue-on-error doesn't work correctly for composite actions
I added a test workflow for this defect.
Follow up of #793",4,1
948,2022-01-02T02:41:18Z,2022-01-27T16:53:26Z,2022-01-27T16:53:26Z,1,5,4,Fixes #943,4,4
949,2022-01-02T06:22:01Z,,2022-04-04T15:27:01Z,1,75,26,"So, this is almost certainly not the right fix for #912, but for git oriented projects it does something which would probably be good enough for me anyway. -- Note: I'm not a go dev, so the style here is probably very wrong, it's just an attempt at playing with things. I'm sure I could find the proper go-git function to ask ""are you tracked"", but I decided to start with the simpler ""go ls-files"" approach.
Before
% act
[What do I have/Introspection] 🚀  Start image=catthehacker/ubuntu:act-latest
[What do I have/Introspection]   🐳  docker pull image=catthehacker/ubuntu:act-latest platform= username= forcePull=false
[What do I have/Introspection]   🐳  docker create image=catthehacker/ubuntu:act-latest platform= entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[What do I have/Introspection]   🐳  docker run image=catthehacker/ubuntu:act-latest platform= entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[What do I have/Introspection]   🐳  docker exec cmd=[mkdir -m 0777 -p /var/run/act] user=root workdir=
[What do I have/Introspection]   🐳  docker cp src=/Users/jsoref/code/nektos/ignored/. dst=/Users/jsoref/code/nektos/ignored
[What do I have/Introspection]   🐳  docker exec cmd=[mkdir -p /Users/jsoref/code/nektos/ignored] user= workdir=
[What do I have/Introspection] ⭐  Run checkout
[What do I have/Introspection]   ✅  Success - checkout
[What do I have/Introspection] ⭐  Run introspect
[What do I have/Introspection]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /Users/jsoref/code/nektos/ignored/workflow/1] user= workdir=
| total 4
| drwxr-xr-x 2 root root 4096 Jan  2 06:15 workflow
[What do I have/Introspection]   ✅  Success - introspect

After
% ../act/dist/local/act
[What do I have/Introspection] 🚀  Start image=catthehacker/ubuntu:act-latest
[What do I have/Introspection]   🐳  docker pull image=catthehacker/ubuntu:act-latest platform= username= forcePull=false
[What do I have/Introspection]   🐳  docker create image=catthehacker/ubuntu:act-latest platform= entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[What do I have/Introspection]   🐳  docker run image=catthehacker/ubuntu:act-latest platform= entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[What do I have/Introspection]   🐳  docker exec cmd=[mkdir -m 0777 -p /var/run/act] user=root workdir=
[What do I have/Introspection]   🐳  docker cp src=/Users/jsoref/code/nektos/ignored/. dst=/Users/jsoref/code/nektos/ignored
[What do I have/Introspection]   🐳  docker exec cmd=[mkdir -p /Users/jsoref/code/nektos/ignored] user= workdir=
[What do I have/Introspection] ⭐  Run checkout
[What do I have/Introspection]   ✅  Success - checkout
[What do I have/Introspection] ⭐  Run introspect
[What do I have/Introspection]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /var/run/act/workflow/1] user= workdir=
| total 0
| -rw-r--r-- 1 502 dialout 0 Jan  2 05:49 README.md
[What do I have/Introspection]   ✅  Success - introspect",3,8
950,2022-01-04T17:46:05Z,2022-01-21T16:10:27Z,2022-01-21T16:10:27Z,2,4,0,Github sets the outcome and conclusion to skipped and this PR does the same during the pipeline run for the StepResults in act.,3,1
954,2022-01-10T02:06:47Z,2022-01-26T07:30:10Z,2022-01-26T07:30:10Z,2,3,2,"Bumps github.com/opencontainers/image-spec from 1.0.1 to 1.0.2.

Release notes
Sourced from github.com/opencontainers/image-spec's releases.

v1.0.2
This release was voted on by the maintainers and PASSED (+5 -0 #2), to mitigate the CVE-2021-41190 advisory.
This release is rebased directly on the prior tagged release (not including the commits that have occurred on main). Corresponding commits have been added to main, such that main is ready for a future next release.




Commits

67d2d56 version: release 1.0.2
dcdcb7f specs-go: adding mediaType to the index and manifest structures
5f31485 *.md: bring mediaType out of reserved status
See full diff in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,2
955,2022-01-10T02:06:56Z,2022-02-28T14:51:36Z,2022-02-28T14:51:36Z,2,153,21,"Bumps github.com/spf13/cobra from 1.2.1 to 1.3.0.

Release notes
Sourced from github.com/spf13/cobra's releases.

v1.3.0 - The Fall 2021 release 🍁
Completion fixes & enhancements 💇🏼
In v1.2.0, we introduced a new model for completions. Thanks to everyone for trying it, giving feedback, and providing numerous fixes! Continue to work with the new model as the old one (as noted in code comments) will be deprecated in a coming release.

DisableFlagParsing now triggers custom completions for flag names #1161
Fixed unbound variables in bash completions causing edge case errors #1321
help completion formatting improvements & fixes #1444
All completions now follow the help example: short desc are now capitalized and removes extra spacing from long description #1455
Typo fixes in bash & zsh completions #1459
Fixed mixed tab/spaces indentation in completion scripts. Now just 4 spaces #1473
Support for different bash completion options. Bash completions v2 supports descriptions and requires descriptions to be removed for menu-complete, menu-complete-backward and insert-completions. These descriptions are now purposefully removed in support of this model. #1509
Fix for invalid shell completions when using ~/.cobra.yaml. Log message Using config file: ~/.cobra.yaml now printed to stderr #1510
Removes unnecessary trailing spaces from completion command descriptions #1520
Option to hid default completion command #1541
Remove __complete command for programs without subcommands #1563

Generator changes ⚙️
Thanks to @​spf13 for providing a number of changes to the Cobra generator tool, streamlining it for new users!

The Cobra generator now won't automatically include Viper and cleans up a number of unused imports when not using Viper.
The Cobra generator's default license is now none
The Cobra generator now works with Go modules
Documentation to reflect these changes

New Features ⭐

License can be specified by their SPDX identifiers #1159
MatchAll allows combining several PositionalArgs to work in concert. This now allows for enabling composing PositionalArgs #896

Bug Fixes 🐛

Fixed multiple error message from cobra init boilerplates #1463 #1552 #1557

Testing 👀

Now testing golang 1.16.x and 1.17.x in CI #1425
Fix for running diff test to ignore CR for windows #949
Added helper functions and reduced code reproduction in args_test #1426
Now using official golangci-lint github action #1477

Security 🔏

Added GitHub dependabot #1427
Now using Viper v1.10.0

There is a known CVE in an indirect dependency from viper: spf13/cobra#1538. This will be patched in a future release



Documentation 📝

Multiple projects added to the projects_using_cobra.md file: #1377 #1501 #1454
Removed ToC from main readme file as it is now automagically displayed by GitHub #1429
Documentation correct for when the --author flag is specified #1009
shell_completions.md has an easier to use snippet for copying and pasting shell completions #1372



... (truncated)


Commits

178edbb Bump github.com/spf13/viper from 1.9.0 to 1.10.0 (#1561)
9054739 Remove __complete cmd for program without subcmds (#1563)
19c9c74 Always include the os package import when generating the root command (#1557)
01e05b8 Bump github.com/spf13/viper from 1.8.1 to 1.9.0 (#1554)
36bff0a fix root.go.golden (#1552)
1854bb5 Fix some typos (mostly found by codespell) (#1514)
ff2c55e chore(ci): use golangci-lint-action (#1477)
1beb476 fix: Duplicate error message from cobra init boilerplates (#1463)
6f84ef4 Provide option to hide default 'completion' cmd (#1541)
ee75a2b Remove trailing spaces from bash completion command description (#1520)
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",3,8
956,2022-01-10T02:07:02Z,2022-01-26T07:22:06Z,2022-01-26T07:22:06Z,2,3,3,"Bumps github.com/docker/cli from 20.10.10+incompatible to 20.10.12+incompatible.

Commits

e91ed57 Merge pull request #3390 from thaJeztah/20.10_bump_go_1.16.12
38dd744 [20.10] Update Go to 1.16.12
cedc602 Merge pull request #3380 from thaJeztah/20.10_backport_bump_go_1.16.11
4de40a8 Update Go to 1.16.11
dea9396 Merge pull request #3358 from thaJeztah/20.10_backport_bump_go_1.16.10
03fa8f9 Update Go to 1.16.10
See full diff in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,2
957,2022-01-10T02:07:10Z,2022-01-26T13:56:22Z,2022-01-26T13:56:22Z,2,3,3,"Bumps github.com/docker/docker from 20.10.10+incompatible to 20.10.12+incompatible.

Release notes
Sourced from github.com/docker/docker's releases.

v20.10.11
20.10.11

IMPORTANT
Due to net/http changes in Go 1.16,
HTTP proxies configured through the $HTTP_PROXY environment variable are no
longer used for TLS (https://) connections. Make sure you also set an $HTTPS_PROXY
environment variable for handling requests to https:// URLs.
Refer to the HTTP/HTTPS proxy section
to learn how to configure the Docker Daemon to use a proxy server.
{: .important }

Distribution

Handle ambiguous OCI manifest parsing to mitigate CVE-2021-41190 / GHSA-mc8v-mgrf-8f4m.
See GHSA-xmmx-7jpf-fx42 for details.

Windows

Fix panic.log file having read-only attribute set moby/moby#42987.

Packaging

Update containerd to v1.4.12 to mitigate CVE-2021-41190.
Update Golang runtime to Go 1.16.10.




Commits

459d0df Merge pull request #43077 from thaJeztah/20.10_bump_go_1.16.12
a621bc0 [20.10] update Go to 1.16.12
4bed71a Merge pull request #43063 from thaJeztah/20.10_bump_go_1.16.11
f4daf9d [20.10] update Go to 1.16.11
847da18 Merge pull request #43004 from AkihiroSuda/cherrypick-42152
4a27cd1 Merge pull request #43027 from thaJeztah/20.10_backport_update_image_spec
7568123 Merge pull request #43023 from thaJeztah/20.10_bump_buildkit
c988693 Merge pull request #43024 from thaJeztah/20.10_containerd_1.4.12
dc01597 vendor: github.com/opencontainers/image-spec v1.0.2
11b3bfe Merge pull request #43028 from thaJeztah/20.10_fix_vendor_conf
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,1
958,2022-01-10T02:07:16Z,2022-01-26T13:56:48Z,2022-01-26T13:56:48Z,2,8,14,"Bumps github.com/moby/buildkit from 0.9.2 to 0.9.3.

Release notes
Sourced from github.com/moby/buildkit's releases.

v0.9.3
Notable changes

Workaround for deadlock in containerd pusher #2461
Update containerd to 1.5.8 . Contains patch for CVE-2021-41190 #2470 #2462




Commits

8d26254 Merge pull request #2470 from tonistiigi/v0.9.3-picks
6d53896 imageutil: make mediatype detection more stricter
b145a2f vendor: update containerd to 1.5.8
29db1fe push: workaround deadlock in containerd pusher
60ad88a Merge pull request #2462 from ktock/bump-containerd-1.5-x
d56abec [v0.9] Bump up containerd to the latest 1.5
See full diff in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,2
962,2022-01-21T10:21:24Z,2022-01-21T15:47:39Z,2022-01-21T15:47:39Z,1,1,0,this should properly update release notes when release is created via GitHub UI,2,2
964,2022-01-23T22:05:13Z,2022-02-15T16:35:02Z,2022-02-15T16:35:02Z,8,238,46,"We need to wait for the previous stage to finish, otherwise we don't know how the final strategy will look like.
Then we need to evaluate all expression nodes of the strategy.matrix property, even the mapping keys.
I also added support for the insert directive and array merge operations, both are undocumented features of the github/actions which are available since 2019.
My tests aren't cover all possibilities, but the fixed issue has a test.
Most likely this change collides with @catthehacker plans of rewriting the yaml parser to actionslint, since I use the current yaml.Node types.
I have no idea how big the regressions regarding parallelism are with this change.
Resolves #927",5,5
965,2022-01-23T22:44:30Z,2022-01-25T17:27:27Z,2022-01-25T17:27:28Z,2,26,0,"This feature of act needs a Test, since it broke recently.
Resolves #940",4,1
966,2022-01-26T14:19:05Z,2022-01-26T17:12:42Z,2022-01-26T17:12:42Z,1,5,1,This change has been made by @catthehacker from https://mergify.com config editor.,4,3
968,2022-01-26T15:04:29Z,2022-01-31T21:19:22Z,2022-01-31T21:19:22Z,1,11,1,"When I started using act, it kept failing because I was missing the GITHUB_TOKEN and I couldn't be bothered to figure it out.
I was unsure how to get this token, so I did some research and wanted to lessen the confusion of future users.
I believe this is such a common use-case that it bears spelling out.
Fixes #967",5,6
971,2022-01-27T14:30:15Z,2022-01-27T16:20:44Z,2022-01-27T16:20:45Z,4,37,6,"Restore the old behavior of the then executor. A lot of code in act relies on the fact that the pipeline executor fails fast instead of failing later.
Here a list of regressions

#946 failing to read an action => panic
returning an error at this line f538b28#diff-3ca8bf2cdff0ec928622b093c6af8793a24f0f5f9a397c86e1df94a385be6e44R130 => panic
failed to connect to docker => panic
no cleanup on panic, the finally executor doesn't run
This broke error handling of act. I prefer to revert this function to it's previous version and create a new finally executor to archive the same in a less error prone.

Also print the error of the step, since it is useful to know why my action failed. E.g. if you used continue-on-error in a composite action.
Resolves #946
@KnisterPeter @ZauberNerd You introduced the regression in 1891c72
The observation of the edit of this comment #948 (comment) is caused by the same regression, job failure without reason.",4,2
972,2022-01-27T16:25:42Z,2022-01-27T19:38:18Z,2022-01-27T19:38:18Z,1,0,17,This change has been made by @catthehacker from https://mergify.com config editor.,5,2
984,2022-02-08T13:25:14Z,2022-02-08T17:22:42Z,2022-02-08T17:22:42Z,4,232,44,"This splits the executor from the RunContext into its own function
called newJobExecutor.
We defined an interface called jobInfo which is implemented by the RunContext.
This enables better unit testing because only a small interface needs to
be mocked.
This is a preparation for implementing pre and post actions.",5,1
988,2022-02-09T17:51:20Z,2022-02-10T16:54:59Z,2022-02-10T16:54:59Z,2,72,26,"During our earlier refactoring in #984 we accidentally changed the
behaviour in such a way that the closeContainer() executor was never
called.
This commit restores the earlier behaviour and adds test cases for this regression.
Ref:

https://github.com/nektos/act/pull/984/files#diff-c057d66dc9657d8428e290c69871596e2b567bb8fecad62a99cab54398131a84L294
https://github.com/nektos/act/pull/984/files#diff-ea9d5c93d769ef9b268932dd9990363e97fc3bec8a00114979d049bead5dd718R68",4,2
991,2022-02-10T19:43:09Z,,2022-02-23T11:33:20Z,6,23,80,"Except for the exprparser.Config.Context (which can be either ""job""
or ""step""), both expression evaluators (on the RunContext and on the
StepContext) were identical.
In the future we might want to have different evaluators, because the
Steps and Inputs should be different based on the context, but at
the moment both evaluators need access to all inputs in order to allow
composite actions to function properly.
This commit removes the NewExpressionEvaluator() method on the
StepContext and uses NewExpressionEvaluator(""step"") when a step
evaluator is needed.",3,3
993,2022-02-11T18:28:30Z,2022-02-11T20:17:38Z,2022-02-11T20:17:39Z,1,7,0,"Added information on README.MD about the installation of act on Fedora based distros.
At this moment this is installed by COPR only, despite this i had to use the act-cliinstead of actsince exists already a package with the name of act that is the short name for another software.
Fix #992",4,1
994,2022-02-11T22:39:12Z,2022-02-15T14:55:38Z,2022-02-15T14:55:39Z,2,3,2,"Bumps github.com/docker/distribution from 2.7.1+incompatible to 2.8.0+incompatible.

Release notes
Sourced from github.com/docker/distribution's releases.

v2.8.0
registry 2.8.0
Welcome to the v2.8.0 release of registry!
The 2.8.0 registry release has been a long time overdue.
This is the first step towards the last 2.x release.
No further active development will continue on 2.x branch.
Security vulnerability patches to 2.x might be considered, but
all active development will be focussed on v3 release due in 2022.
This release includes a security vulnerability fix along
with a few minor bug fixes and improvemnts in documentation and CI.
See changelog below for full list of changes.
Bugfixes

Close the io.ReadCloser from storage driver #3370
Remove empty Content-Type header #3297
Make ipfilteredby not required in cloudfront storage middleware #3088

Features

Add reference.ParseDockerRef utility function #3002

CI build

First draft of actions based ci #3347
Fix vndr and check #3001
Improve code quality by adding linter checks #3385

Documentation

Add redirect for old URL #3197
Fix broken table #3073
Adding deprecated schema v1 instructions #2987
Change should to must in v2 spec (#3495)

Storage drivers

S3 Driver: add support for ceph radosgw #3119

Security

Added flag for user configurable cipher suites #3384
Address CVE-2020-26160 by replacing vulnerable third-party depedency#3466
Replace math rand with crypto rand #3531
Address CVE-2021-41190 by validating document type before unmarshal GHSA-77vh-xpmg-72qh

Changes


Prepare for v2.8.0 release (#3552)

d5d89a46 Make this releaes a beta release first.
1ddad0ba Apply suggestions from code review





... (truncated)


Commits

dcf6639 Update README so the release pipeline works properly.
212b38e Merge pull request #3552 from milosgajdos/v2.8.0-release
359b97a Merge pull request #3568 from crazy-max/2.8-artifacts
d5d89a4 Make this releaes a beta release first.
6241e09 [2.8] Release artifacts
1840415 Merge pull request #3565 from crazy-max/2.8-gha
65ca39e release workflow
1ddad0b Apply suggestions from code review
3960a56 Prepare for v2.8.0 release
3b7b534 Merge pull request from GHSA-qq97-vm5h-rrhg
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
You can disable automated security fix PRs for this repo from the Security Alerts page.",3,1
995,2022-02-13T00:54:16Z,,2022-03-25T02:29:52Z,1,15,1,"I've recently hit the same issue as #977 - act hangs when project needs to pull a private repo. While there are a few ways to go about fixing the access (configure github tokem, setup creds, use ssh endpoint, etc), we should def drop any git prompts as the act environment is not interactive.
With this PR, act will error out with fatal: could not read Username for 'https://github.com': terminal prompts disabled message.",3,6
997,2022-02-14T02:11:32Z,2022-02-25T16:55:10Z,2022-02-25T16:55:10Z,2,3,3,"Bumps github.com/go-ini/ini from 1.64.0 to 1.66.4.

Release notes
Sourced from github.com/go-ini/ini's releases.

1.66.4
What's Changed

key: ignore empty values in ValueWithShadows by @​unknwon in go-ini/ini#316

Full Changelog: go-ini/ini@v1.66.3...v1.66.4
1.66.3
What's Changed

Return an empty array from ValueWithShadows if there is none by @​NDagestad in go-ini/ini#313

New Contributors

@​NDagestad made their first contribution in go-ini/ini#313

Full Changelog: go-ini/ini@v1.66.2...v1.66.3
1.66.2
What's Changed

Fix nested values can span sections by @​ravron in go-ini/ini#306

New Contributors

@​ravron made their first contribution in go-ini/ini#306

Full Changelog: go-ini/ini@v1.66.1...v1.66.2
1.66.1
What's Changed

Fix python multiline EOF error by @​gandarez in go-ini/ini#309

Full Changelog: go-ini/ini@v1.66.0...v1.66.1
1.66.0
What's Changed

file: add HasSection method by @​bryanpedini in go-ini/ini#308

New Contributors

@​bryanpedini made their first contribution in go-ini/ini#308

Full Changelog: go-ini/ini@v1.65.0...v1.66.0
1.65.0
No release notes provided.



Commits

39f9e49 key: ignore empty values in ValueWithShadows (#316)
fcd6cc3 Return an empty array from ValueWithShadows if there is none (#313)
d26f092 github: refurbish issue forms and pull request templates (#312)
c71eccd Fix nested values can span sections (#306)
3ca1e6a Fix python multiline EOF error (#309)
b505416 file: add HasSection method (#308)
e641746 Fix parsing python multiline string (#299)
See full diff in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",3,2
1003,2022-02-16T15:02:27Z,2022-02-25T18:47:16Z,2022-02-25T18:47:16Z,3,36,32,"This changes fixes and restructures the parallel execution of jobs.
The previous changes limiting the parallel execution did break this
and allowed only one job in parallel.
While we run #CPU jobs in parallel now, the jobs added per job-matrix
add to this. So we might over-commit to the capacity, but at least
it is limited.",6,9
1004,2022-02-17T08:41:31Z,2022-03-22T21:13:00Z,2022-03-22T21:13:00Z,22,2239,1001,"To make the steps more testable, we refactored the step context
into smaller parts. Each step kind is moved into its own struct and
file.
This does help keep structure and reduce interface size. This also
allows easier testing and mocking of each step.
This prepares to integrate action pre- and post-steps.",5,17
1009,2022-02-22T13:49:13Z,2022-02-25T18:39:51Z,2022-02-25T18:39:52Z,7,37,64,"This PR contains a few fixes and improvements for the new expression evaluator:

Adds more debug output about which expression is going to be evaluated
Use exported IsTruthy() function from the exprparser package inside EvalBool()
Fail act when an expression contains errors and cannot be evaluated

Fixes: #1008
Ref: #971",7,12
1011,2022-02-23T15:29:44Z,2022-03-02T08:29:35Z,2022-03-02T08:29:35Z,6,72,2,"this commit adds support for the ::add-mask:: command, which was
implemented as a stub before.
it does not cover debug output that appears when you run act in
verbose mode",6,8
1013,2022-02-24T11:20:11Z,2022-03-14T17:47:17Z,2022-03-14T17:47:17Z,2,0,26,"The function WithTestContext is never called in the project, and
there is just one usage of TestContext, inside one of our loggers",4,4
1014,2022-02-25T09:27:34Z,2022-02-25T16:47:49Z,2022-02-25T16:47:50Z,1,1,0,fixes #979,4,2
1016,2022-02-25T21:55:14Z,2022-02-28T14:43:04Z,2022-02-28T14:43:04Z,1,1,1,Link is redirected to https://docs.github.com/en/actions/using-github-hosted-runners/about-github-hosted-runners#file-systems.,4,1
1017,2022-02-26T11:51:50Z,2022-03-14T15:21:06Z,2022-03-14T15:21:07Z,1,1,1,,5,4
1018,2022-02-28T02:08:19Z,2022-02-28T14:35:14Z,2022-02-28T14:35:14Z,2,3,3,"Bumps github.com/rhysd/actionlint from 1.6.8 to 1.6.9.

Release notes
Sourced from github.com/rhysd/actionlint's releases.

v1.6.9

Support runner.arch context value. (thanks @​shogo82148, #101)
steps:
  - run: ./do_something_64bit.sh
    if: ${{ runner.arch == 'x64' }}

Support calling reusable workflows in local directories. (thanks @​jsok, #107)
jobs:
  call-workflow-in-local-repo:
    uses: ./.github/workflows/useful_workflow.yml

Add a document to install actionlint via asdf version manager. (thanks @​crazy-matt, #99)
Fix using secrets.GITHUB_TOKEN caused a type error when some other secret is defined. (thanks @​mkj-is, #106)
Fix nil check is missing on parsing uses: step. (thanks @​shogo82148, #102)
Fix some documents including broken links. (thanks @​ohkinozomu, #105)
Update popular actions data set to the latest. More arguments are added to many actions. And a few actions had new major versions.
Update webhook payload data set to the latest. requested_action type was added to check_run hook. requested and rerequested types were removed from check_suite hook. updated type was removed from project hook.




Changelog
Sourced from github.com/rhysd/actionlint's changelog.

v1.6.9 - 24 Feb 2022

Support runner.arch context value. (thanks @​shogo82148, #101)
steps:
  - run: ./do_something_64bit.sh
    if ${{ runner.arch == 'x64' }}

Support calling reusable workflows in local directories. (thanks @​jsok, #107)
jobs:
  call-workflow-in-local-repo:
    uses: ./.github/workflows/useful_workflow.yml

Add a document to install actionlint via asdf version manager. (thanks @​crazy-matt, #99)
Fix using secrets.GITHUB_TOKEN caused a type error when some other secret is defined. (thanks @​mkj-is, #106)
Fix nil check is missing on parsing uses: step. (thanks @​shogo82148, #102)
Fix some documents including broken links. (thanks @​ohkinozomu, #105)
Update popular actions data set to the latest. More arguments are added to many actions. And a few actions had new major versions.
Update webhook payload data set to the latest. requested_action type was added to check_run hook. requested and rerequested types were removed from check_suite hook. updated type was removed from project hook.

[Changes][v1.6.9]




Commits

752a552 Merge pull request #105 from ohkinozomu/fix-paths
3246bb2 Merge pull request #99 from crazy-matt/chore/add-asdf-plugin-ref
a2a4bdd fix workflow_inputs_secrets_types example test fails
e7f4a5c improve error message on checking workflow call formats
66f4c1d update popular actions data to the latest
62628dc Merge pull request #107 from jsok/workflow-call-local
d2bab97 fix err/workflow_call_secrets test case randomly fails
3843812 add unit test for #106
0f7ca73 add test for #101
af27f8a Merge pull request #106 from mkj-is/fix/github-action-secret
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",3,1
1019,2022-02-28T02:09:16Z,2022-03-14T15:21:55Z,2022-03-14T15:21:55Z,1,1,1,"Bumps golangci/golangci-lint-action from 2 to 3.1.0.

Release notes
Sourced from golangci/golangci-lint-action's releases.

v3.1.0
What's Changed
New features

Allow to disable caching completely by @​tdabasinskas in golangci/golangci-lint-action#351

CI

ci(dep): Add step to commit changes if PR has dependencies label by @​sayboras in golangci/golangci-lint-action#108

Dependabot

build(deps-dev): bump eslint from 8.9.0 to 8.10.0 by @​dependabot in golangci/golangci-lint-action#405

Misc

Update version to 3.1.0 in package.json by @​SVilgelm in golangci/golangci-lint-action#406
fix version in package-lock.json by @​SVilgelm in golangci/golangci-lint-action#407

New Contributors

@​tdabasinskas made their first contribution in golangci/golangci-lint-action#351

Full Changelog: golangci/golangci-lint-action@v3...v3.1.0
v3.0.0
What's Changed

Fix grammar in action.yml by @​abennett in golangci/golangci-lint-action#356
Add description for permissions settings by @​sg0hsmt in golangci/golangci-lint-action#298
Remove Setup-Go by @​StevenACoffman in golangci/golangci-lint-action#403
Update all direct dependencies by @​SVilgelm in golangci/golangci-lint-action#404
139 Dependabot updates

New Contributors

@​abennett made their first contribution in golangci/golangci-lint-action#356
@​sg0hsmt made their first contribution in golangci/golangci-lint-action#298
@​StevenACoffman made their first contribution in golangci/golangci-lint-action#403

Full Changelog: golangci/golangci-lint-action@v2...v3.0.0
Bump version v2.5.2
Bug fixes

5c56cd6 Extract and don't mangle User Args. (#200)

Dependencies

e3c53fe bump @​typescript-eslint/eslint-plugin (#194)
3b9f80e bump @​typescript-eslint/parser from 4.18.0 to 4.19.0 (#195)
9845713 bump @​types/node from 14.14.35 to 14.14.37 (#197)
e789ee1 bump eslint from 7.22.0 to 7.23.0 (#196)
f2e9a96 bump @​typescript-eslint/eslint-plugin (#188)
818081a bump @​types/node from 14.14.34 to 14.14.35 (#189)
6671836 bump @​typescript-eslint/parser from 4.17.0 to 4.18.0 (#190)



... (truncated)


Commits

b517f99 fix version in package-lock.json (#407)
9636c5b Update version to 3.1.0 in package.json (#406)
03e4bef ci(dep): Add step to commit changes if PR has dependencies label (#108)
cdfc708 Allow to disable caching completely (#351)
7d5614c build(deps-dev): bump eslint from 8.9.0 to 8.10.0 (#405)
c675eb7 Update all direct dependencies (#404)
423fbaf Remove Setup-Go (#403)
bcfc6f9 build(deps-dev): bump eslint-plugin-import from 2.25.3 to 2.25.4 (#402)
d34ac2a build(deps): bump setup-go from v2.1.4 to v2.2.0 (#401)
e4b538e build(deps-dev): bump @​types/node from 16.11.10 to 17.0.19 (#400)
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",4,3
1026,2022-03-03T08:52:17Z,2022-03-14T15:33:11Z,2022-03-14T15:33:11Z,5,62,23,"This will allow to format log output as json.
This is helpful in cases where act is not executed on a 'local' machine.",4,1
1027,2022-03-03T12:33:49Z,2022-03-14T17:38:30Z,2022-03-14T17:38:30Z,2,17,9,"This change does add the step name to the logger fields. This does
not change the output for our users, but for the json logger, it
does make each step output traceable.",4,10
1028,2022-03-07T02:10:25Z,2022-03-14T15:14:32Z,2022-03-14T15:14:33Z,2,4,4,"Bumps actions/checkout from 2 to 3.

Release notes
Sourced from actions/checkout's releases.

v3.0.0

Update default runtime to node16

v2.4.0

Convert SSH URLs like org-<ORG_ID>@github.com: to https://github.com/ - pr

v2.3.5
Update dependencies
v2.3.4

Add missing awaits
Swap to Environment Files

v2.3.3

Remove Unneeded commit information from build logs
Add Licensed to verify third party dependencies

v2.3.2
Add Third Party License Information to Dist Files
v2.3.1
Fix default branch resolution for .wiki and when using SSH
v2.3.0
Fallback to the default branch
v2.2.0
Fetch all history for all tags and branches when fetch-depth=0
v2.1.1
Changes to support GHES (here and here)
v2.1.0

Group output
Changes to support GHES alpha release
Persist core.sshCommand for submodules
Add support ssh
Convert submodule SSH URL to HTTPS, when not using SSH
Add submodule support
Follow proxy settings
Fix ref for pr closed event when a pr is merged
Fix issue checking detached when git less than 2.22




Changelog
Sourced from actions/checkout's changelog.

Changelog
v2.3.1

Fix default branch resolution for .wiki and when using SSH

v2.3.0

Fallback to the default branch

v2.2.0

Fetch all history for all tags and branches when fetch-depth=0

v2.1.1

Changes to support GHES (here and here)

v2.1.0

Group output
Changes to support GHES alpha release
Persist core.sshCommand for submodules
Add support ssh
Convert submodule SSH URL to HTTPS, when not using SSH
Add submodule support
Follow proxy settings
Fix ref for pr closed event when a pr is merged
Fix issue checking detached when git less than 2.22

v2.0.0

Do not pass cred on command line
Add input persist-credentials
Fallback to REST API to download repo




Commits

a12a394 update readme for v3 (#708)
8f9e05e Update to node 16 (#689)
230611d Change secret name for PAT to not start with GITHUB_ (#623)
See full diff in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",3,1
1030,2022-03-09T13:04:12Z,2022-03-14T16:38:42Z,2022-03-14T16:38:42Z,2,7,1,,4,7
1036,2022-03-14T02:09:49Z,2022-03-14T15:10:50Z,2022-03-14T15:10:50Z,2,256,56,"Bumps github.com/moby/buildkit from 0.9.3 to 0.10.0.

Release notes
Sourced from github.com/moby/buildkit's releases.

v0.10.0
Welcome to the v0.10.0 release of buildkit!
Please try out the release binaries and report any issues at
https://github.com/moby/buildkit/issues.
Notable changes:


New LLB operation MergeOp allows efficiently chaining groups of layers together without the need to access the individual files. This allows to build layers separately and merge them together later without making them depend on each other. MergeOp can work with remote references, for example, it can be used to rebase an image on top of a newer base image without ever pulling or pushing any layers. #2335 #2614


New LLB operation DiffOp allows computing a difference between two points in LLB graph containing the files that have been added and whiteouts for files that have been removed. When DiffOp inputs are based on the same layer chain DiffOp can work directly with remote layer references and doesn't need to pull layers to access individual files. Files of the DiffOp result can be accessed directly or used as input to a MergeOp. #2517 #2434 #2563


New build information structures are generated with build metadata that allows you to see all the sources (images, git repositories) that were used by the build with their exact versions and also the configuration that was passed to the build. This information can also be embedded into the image configuration if one is generated. Build sources are added to the image config by default. The build configuration is not currently embedded by default to avoid credential leaks in poorly written Dockerfiles but the intention is to enable it in the future. #2311 #2476 #2654 #2657 #2645 #2684


Empty layer removal feature on exporting images has been removed because it caused history to change after remote cache import #2651


When possible, blobs are now created with native OverlayFS differ with increased performance. This Differ can directly use files in OverlayFS upper directory instead of scanning for differences between snapshots. #2181 #2491 #2480 #2388 #2390 #2662


Frontends can now send warning messages that are shown on the progressbar. Warnings can be associated with specific LLB vertex and contain additional information like URL to documentation or location in original source code. #2482 #2498


Layer blobs can now be exported in Zstd compression format with -o compression=zstd. Zstd provides smaller files and faster decompression than gzip. #2344


Layers can now be exported with eStargz compression type -o compression=estargz #2246 #2603 #2352 #2674


A compression level can be set with -o compression-level=N to configure the compressor when new layer blobs are created. This can be used to create smaller blobs by spending more time on the compression step. #2591


Remote cache inlined in image configuration now supports arbitrary configuration of image layers as cache sources #2501


Enable eStargz-based lazy pulling on registry cache importer #2648


Support exporting non-distributable blob descriptors. -o prefer-nondist-layers=true exports layer with a non-distributable mediatype and external URL if such URL was provided when blob was pulled from the remote registry. Descriptors with non-distributable mediatypes are skipped on push. #2561


Build metadata now provides access to OCI descriptor of the result if one was generated. Previously only digest of the descriptor could be accessed. #2610


Builder now understands AMD64 Microarchitecture levels, e.g. linux/amd64/v2, linux/amd64/v4. The default variant remains v1 and is normalized to linux/amd64. These variants allow creating more optimized versions of your images that run when the container is running on a more modern CPU. #2588


LLB now supports progress groups for grouping multiple steps together so they appear as the same row in build progress #2513


LLB ExecOp now supports build secrets that are exposed as environment variables #2579


Interactive container API now supports sending signals to processes from the client #2590


Logs now use a rolling buffer to show the last logs for a process that ended with an error even if regular logs have been clipped because they have reached the max-logs limit. #2577


Remote cache exporting now support setting the same compression options available to image outputs #2685


Frontends can now access their own definition and call additional processes on their own image #2443




... (truncated)


Commits

068cf68 Merge pull request #2684 from crazy-max/fix-buildinfo-deps-sources
49aa39c buildinfo: merge build sources for deps
bffd728 Merge pull request #2712 from ktock/fixcachecleanup
c7f2e40 Apply ensurePruneAll to other tests as well
bbf149b Merge pull request #2710 from sipsma/fix-diffapply-overwrite
53722cc diffapply: make overwritten dirs opaque.
fdecd0a Merge pull request #2708 from sipsma/fix-plain-progress
e0304db test: deflake CacheImportExport tests
f2ccccc Merge pull request #2709 from ktock/stargz-snapshotter-v0.11.2
823c76b Bump stargz-snapshotter to v0.11.2
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",3,1
1037,2022-03-14T02:09:59Z,2022-03-14T15:11:40Z,2022-03-14T15:11:40Z,2,3,3,"Bumps github.com/docker/distribution from 2.8.0+incompatible to 2.8.1+incompatible.

Release notes
Sourced from github.com/docker/distribution's releases.

v2.8.1
Welcome to the v2.8.1 release of registry!
The 2.8.1 registry release fixes the Go module issues that have popped up in the v2.8.0
There have been no changes made in the released binaries other than the bump of the Go runtime.
See the changelog below for a full list of changes.
CI

ci: use proper git ref for versioning #3595
Go: make Go version explicit and pin it to the latest 1.16 release #3604

Contributors

CrazyMax
Milos Gajdos

Changes


96cc1fdb FIx typo
e744906f Update 2.8.1. release notes
Prepare for v2.8.1 release (#3596)

6736d188 Prepare for v2.8.1 release


[2.8 backport] ci: use proper git ref for versioning (#3595)

80acbdf0 ci: use proper git ref for versioning




Dependency Changes
This release has no dependency changes
The previous release can be found at v2.8.0



Commits

b5ca020 Merge pull request #3605 from milosgajdos/update-release-notes
1b5f094 Merge pull request #3604 from crazy-max/2.8-go-1.16.15
96cc1fd FIx typo
e744906 Update 2.8.1. release notes
3df9fce go 1.16.15
9a0196b Merge pull request #3596 from milosgajdos/fix-go-mod-v2.8.1
6736d18 Prepare for v2.8.1 release
e4a447d Merge pull request #3595 from crazy-max/2.8-ci-gitref
80acbdf ci: use proper git ref for versioning
See full diff in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",3,1
1038,2022-03-14T02:10:02Z,2022-03-14T15:14:06Z,2022-03-14T15:14:06Z,2,4,2,"Bumps github.com/docker/cli from 20.10.12+incompatible to 20.10.13+incompatible.

Commits

a224086 Merge pull request #3461 from thaJeztah/20.10_bump_go_1.16.15
a282e0c [20.10] update to go 1.16.15 to address CVE-2022-24921
f3764ff Merge pull request #3430 from thaJeztah/20.10_backport_docs_fixes
700364e Fix mistake with env var example in docker run docs
62d27c3 Update WORKDIR command information
c0e952c Fix the (dead) link for docs for Dockerfile syntax reference
04104a0 Update dockerd.md
b721998 Fixing typo (his --> its)
4065e12 format create.md table
f1002eb Fix typo
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",3,2
1039,2022-03-14T02:10:08Z,2022-03-14T15:12:24Z,2022-03-14T15:12:25Z,2,5,7,"Bumps github.com/rhysd/actionlint from 1.6.9 to 1.6.10.

Release notes
Sourced from github.com/rhysd/actionlint's releases.

v1.6.10

Support outputs in reusable workflow call. See the official document for the usage of the outputs syntax. (#119, #121)
Example of reusable workflow definition:
on:
  workflow_call:
    outputs:
      some_output:
        description: ""Some awesome output""
        value: 'result value of workflow call'
jobs:
  job:
    runs-on: ubuntu-latest
    steps:
      ...
Example of reusable workflow usage:
jobs:
  job1:
    uses: ./.github/workflows/some_workflow.yml
  job2:
    runs-on: ubuntu-latest
    needs: job1
    steps:
      - run: echo ${{ needs.job1.outputs.some_output }}

Support checking jobs context, which is only available in on.workflow_call.outputs.<name>.value. Outputs of jobs can be referred via the context. See the document for more details.
on:
  workflow_call:
    outputs:
      image-version:
        description: ""Docker image version""
        # ERROR: 'imagetag' does not exist (typo of 'image_tag')
        value: ${{ jobs.gen-image-version.outputs.imagetag }}
jobs:
  gen-image-version:
    runs-on: ubuntu-latest
    outputs:
      image_tag: ""${{ steps.get_tag.outputs.tag }}""
    steps:
      - run: ./output_image_tag.sh
        id: get_tag

Add new major releases in actions/* actions including actions/checkout@v3, actions/setup-go@v3, actions/setup-python@v3, ...
Check job IDs. They must start with a letter or _ and contain only alphanumeric characters, - or _. See the document for more details. (#80)
on: push
jobs:




... (truncated)


Changelog
Sourced from github.com/rhysd/actionlint's changelog.

v1.6.10 - 11 Mar 2022

Support outputs in reusable workflow call. See the official document for the usage of the outputs syntax. (#119, #121)
Example of reusable workflow definition:
on:
  workflow_call:
    outputs:
      some_output:
        description: ""Some awesome output""
        value: 'result value of workflow call'
jobs:
  job:
    runs-on: ubuntu-latest
    steps:
      ...
Example of reusable workflow usage:
jobs:
  job1:
    uses: ./.github/workflows/some_workflow.yml
  job2:
    runs-on: ubuntu-latest
    needs: job1
    steps:
      - run: echo ${{ needs.job1.outputs.some_output }}

Support checking jobs context, which is only available in on.workflow_call.outputs.<name>.value. Outputs of jobs can be referred via the context. See the document for more details.
on:
  workflow_call:
    outputs:
      image-version:
        description: ""Docker image version""
        # ERROR: 'imagetag' does not exist (typo of 'image_tag')
        value: ${{ jobs.gen-image-version.outputs.imagetag }}
jobs:
  gen-image-version:
    runs-on: ubuntu-latest
    outputs:
      image_tag: ""${{ steps.get_tag.outputs.tag }}""
    steps:
      - run: ./output_image_tag.sh
        id: get_tag

Add new major releases in actions/* actions including actions/checkout@v3, actions/setup-go@v3, actions/setup-python@v3, ...
Check job IDs. They must start with a letter or _ and contain only alphanumeric characters, - or _. See the document for more details. (#80)
on: push




... (truncated)


Commits

53e5ba9 windows-latest is now windows-2022
68e2706 Merge branch 'workflow-call-outputs'
6cc175b describe checks for outputs of reusable workflow
136bb29 add tests for checking outputs of reusable workflows
d474554 check job.\<job_id>.outputs.\<output> properties in outputs of reusable workflow
dd7e6d5 define outputs type with loose object when it is the result of reusable workf...
dbe43b2 Merge branch 'workflow-call-outputs-syntax' (fixes #91, #119)
8ce635a add tests for parsing on.workflow_call.outputs
28b7c72 parse on.workflow_call.outputs
4a9aad0 support new major versions of actions/* actions
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",3,2
1040,2022-03-14T02:10:11Z,2022-03-14T15:14:20Z,2022-03-14T15:14:20Z,2,5,133,"Bumps github.com/spf13/cobra from 1.3.0 to 1.4.0.

Release notes
Sourced from github.com/spf13/cobra's releases.

v1.4.0
Winter 2022 Release ❄️
Another season, another release!
Goodbye viper! 🐍 🚀
The core Cobra library no longer requires Viper and all of its indirect dependencies. This means that Cobra's dependency tree has been drastically thinned! The Viper dependency was included because of the cobra CLI generation tool. This tool has migrated to spf13/cobra-cli.
It's pretty unlikely you were importing and using the bootstrapping CLI tool as part of your application (after all, it's just a tool to get going with core cobra).
But if you were, replace occurrences of
""github.com/spf13/cobra/cobra""

with
""github.com/spf13/cobra-cli""

And in your go.mod, you'll want to also include this dependency:
github.com/spf13/cobra-cli v1.3.0

Again, the maintainers do not anticipate this being a breaking change to users of the core cobra library, so minimal work should be required for users to integrate with this new release. Moreover, this means the dependency tree for your application using Cobra should no longer require dependencies that were inherited from Viper. Huzzah! 🥳
If you'd like to read more

issue: spf13/cobra#1597
PR: spf13/cobra#1604

Documentation 📝

Update Go Doc link and badge in README: spf13/cobra#1593
Fix to install command, now targets @latest: spf13/cobra#1576
Added MAINTAINERS file: spf13/cobra#1545

Other 💭

Bumped license year to 2022 in golden files: spf13/cobra#1575
Added Pixie to projects: spf13/cobra#1581
Updated labeler for new labeling scheme: spf13/cobra#1613 & syntax fix: spf13/cobra#1624

Shoutout to our awesome contributors helping to make this cobra release possible!!
@​spf13 @​marckhouzam @​johnSchnake @​jpmcb @​liggitt @​umarcor @​hiljusti @​marians @​shyim @​htroisi



Changelog
Sourced from github.com/spf13/cobra's changelog.

Cobra Changelog
v1.1.3

Fix: release-branch.cobra1.1 only: Revert ""Deprecate Go < 1.14"" to maintain backward compatibility

v1.1.2
Notable Changes

Bump license year to 2021 in golden files (#1309) @​Bowbaq
Enhance PowerShell completion with custom comp (#1208) @​Luap99
Update gopkg.in/yaml.v2 to v2.4.0: The previous breaking change in yaml.v2 v2.3.0 has been reverted, see go-yaml/yaml#670
Documentation readability improvements (#1228 etc.) @​zaataylor etc.
Use golangci-lint: Repair warnings and errors resulting from linting (#1044) @​umarcor

v1.1.1

Fix: yaml.v2 2.3.0 contained a unintended breaking change. This release reverts to yaml.v2 v2.2.8 which has recent critical CVE fixes, but does not have the breaking changes. See spf13/cobra#1259 for context.
Fix: correct internal formatting for go-md2man v2 (which caused man page generation to be broken). See spf13/cobra#1049 for context.

v1.1.0
Notable Changes

Extend Go completions and revamp zsh comp (#1070)
Fix man page doc generation - no auto generated tag when cmd.DisableAutoGenTag = true (#1104) @​jpmcb
Add completion for help command (#1136)
Complete subcommands when TraverseChildren is set (#1171)
Fix stderr printing functions (#894)
fix: fish output redirection (#1247)

v1.0.0
Announcing v1.0.0 of Cobra. 🎉
Notable Changes

Fish completion (including support for Go custom completion) @​marckhouzam
API (urgent): Rename BashCompDirectives to ShellCompDirectives @​marckhouzam
Remove/replace SetOutput on Command - deprecated @​jpmcb
add support for autolabel stale PR @​xchapter7x
Add Labeler Actions @​xchapter7x
Custom completions coded in Go (instead of Bash) @​marckhouzam
Partial Revert of #922 @​jharshman
Add Makefile to project @​jharshman
Correct documentation for InOrStdin @​desponda
Apply formatting to templates @​jharshman
Revert change so help is printed on stdout again @​marckhouzam
Update md2man to v2.0.0 @​pdf
update viper to v1.4.0 @​umarcor



... (truncated)


Commits

5b2b9e9 Removes viper dependency by removing cobra/ CLI tool (#1604)
9369465 labeler: fix syntax
e1b831e Updates labeler for new labels (#1613)
8267283 Add MAINTAINERS file (alphabetical order) (#1545)
6d2dc43 Add Pixie to projects. (#1581)
a599632 Fix install command (#1576)
7cabfeb Update Go Doc link and badge (#1593)
e04ec72 Bump license year to 2022 in golden files (#1575)
cb9d7b1 Bump github.com/spf13/viper from 1.10.0 to 1.10.1 (#1567)
See full diff in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",2,3
1048,2022-03-16T10:11:00Z,2022-05-23T19:13:23Z,2022-05-23T19:13:23Z,6,136,97,"https://github.com/nektos/act/blob/new-issue-templates/.github/ISSUE_TEMPLATE/bug_report.yml
https://github.com/nektos/act/blob/new-issue-templates/.github/ISSUE_TEMPLATE/feature_template.yml
requires #1163",5,6
1049,2022-03-16T15:32:56Z,2022-03-21T11:23:07Z,2022-03-21T11:23:07Z,5,9,1,"act has a feature that skips the checkout action to do a remote
checkout when a local checkout exists. in some cases, e.g. when
running act in a CI, you always want to clone the repository.",5,3
1056,2022-03-17T12:46:20Z,2022-03-22T19:26:11Z,2022-03-22T19:26:11Z,3,123,10,,5,9
1057,2022-03-17T18:17:35Z,2022-03-25T16:16:31Z,2022-03-25T16:16:31Z,2,6,10,fixes #1000,5,2
1061,2022-03-21T02:15:01Z,2022-03-21T19:24:22Z,2022-03-21T19:24:23Z,2,3,3,"Bumps github.com/stretchr/testify from 1.7.0 to 1.7.1.

Commits

083ff1c Fixed didPanic to now detect panic(nil).
1e36bfe Use cross Go version compatible build tag syntax
e798dc2 Add docs on 1.17 build tags
83198c2 assert: guard CanConvert call in backward compatible wrapper
087b655 assert: allow comparing time.Time
7bcf74e fix msgAndArgs forwarding
c29de71 add tests for correct msgAndArgs forwarding
f87e2b2 Update builds
ab6dc32 fix linting errors in /assert package
edff5a0 fix funtion name
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",3,2
1062,2022-03-21T02:15:12Z,2022-03-21T19:33:42Z,2022-03-21T19:33:42Z,2,3,3,"Bumps github.com/docker/docker from 20.10.12+incompatible to 20.10.13+incompatible.

Release notes
Sourced from github.com/docker/docker's releases.

v20.10.13
This release of Docker Engine contains some bug-fixes and packaging changes,
updates to the docker scan and docker buildx commands, an updated version of
the Go runtime, and new versions of the containerd.io runtime.
Together with this release, we now also provide .deb and .rpm packages of
Docker Compose V2, which can be installed using the (optional) docker-compose-plugin
package.
Builder

Updated the bundled version of buildx to v0.8.0.

Daemon

Fix a race condition when updating the container's state moby/moby#43166.
Update the etcd dependency to prevent the daemon from incorrectly holding file locks moby/moby#43259
Fix detection of user-namespaces when configuring the default net.ipv4.ping_group_range sysctl moby/moby#43084.

Distribution

Retry downloading image-manifests if a connection failure happens during image
pull moby/moby#43333.

Documentation

Various fixes in command-line reference and API documentation.

Logging

Prevent an OOM when using the ""local"" logging driver with containers that produce
a large amount of log messages moby/moby#43165.
Updates the fluentd log driver to prevent a potential daemon crash, and prevent
containers from hanging when using the fluentd-async-connect=true and the
remote server is unreachable moby/moby#43147.

Packaging

Provide .deb and .rpm packages for Docker Compose V2. Docker Compose v2.3.3
can now be installed on Linux using the docker-compose-plugin packages, which
provides the docker compose subcommand on the Docker CLI. The Docker Compose
plugin can also be installed and run standalone to be used as a drop-in replacement
for docker-compose (Docker Compose V1) docker/docker-ce-packaging#638.
The compose-cli-plugin package can also be used on older version of the Docker
CLI with support for CLI plugins (Docker CLI 18.09 and up).
Provide packages for the upcoming Ubuntu 22.04 ""Jammy Jellyfish"" LTS release docker/docker-ce-packaging#645, docker/containerd-packaging#271.
Update docker buildx to v0.8.0.
Update docker scan (docker-scan-plugin) to v0.17.0.
Update containerd (containerd.io package) to v1.5.10.
Update the bundled runc version to v1.0.3.
Update Golang runtime to Go 1.16.15.




Commits

906f57f Merge pull request #43333 from pete-woods/20.10-backport-43291-schema-downloa...
ce3b6d1 distribution: retry downloading schema config on retryable error
c3dec60 Merge pull request #43329 from thaJeztah/20.10_backport_update_containerd_bin...
180f3b9 update containerd binary to v1.5.10
409d7ac Merge pull request #43326 from thaJeztah/20.10_bump_go_1.16.15
0fa0d70 [20.10] update to go 1.16.15 to address CVE-2022-24921
c4f6167 Merge pull request #43259 from thaJeztah/20.10_backport_fix_lock
9a57c5c Merge pull request #43260 from thaJeztah/20.10_backport_docs_fixes
4679ffd docs: remove HostConfig.LxcConf field from API docs
fbbe1fc api: remove HostConfig.LxcConf field
Additional commits viewable in compare view




Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)",3,2
1066,2022-03-21T20:22:31Z,2022-03-22T18:05:36Z,2022-03-22T18:05:36Z,2,7,0,panics are very bad,4,3
1067,2022-03-21T20:30:25Z,2022-03-22T09:03:37Z,2022-03-22T09:03:37Z,1,1,1,"panic: reflect: call of reflect.Value.Interface on zero Value
panics are very bad
Resolves #1065",4,2
1068,2022-03-21T20:52:19Z,2022-03-22T08:55:14Z,2022-03-22T08:55:14Z,2,2,1,"You can test this with https://github.com/ChristopherHX/runner.server against actions/runner or online
on: push
jobs:
  testf:
    if: tojson(fromjson('[null]')[0]) == 'null'
    runs-on: ubuntu-latest
    steps:
    - run: echo ${{github.workspace}}
I expect this job to be executed",4,3
1070,2022-03-23T07:41:13Z,2022-03-29T09:37:38Z,2022-03-29T09:37:38Z,1,1,1,for when people don't specify version via -ldflags,4,3
1074,2022-03-24T16:10:44Z,2022-04-04T15:27:01Z,2022-04-04T15:27:02Z,3,321,65,"Resolves #912
Resolves #1002
Closes #949
What I have tested:

copy without git directory in current folder => old behavior
copy with git directory, now includes all tracked files even those which are ignored
first level of submodules
you can now cancel the copydir by pressing ctrl+c

I'm not shure how to write tests for this change.",4,7
1076,2022-03-25T13:39:34Z,2022-03-29T18:00:52Z,2022-03-29T18:00:52Z,3,26,3,"fixes #917
Signed-off-by: Ryan me@hackerc.at",5,5
1077,2022-03-25T18:00:51Z,2022-06-10T21:16:43Z,2022-06-10T21:16:43Z,13,133,97,"moved git from common in it's own package
improved error messages
Container.Close() returns an error if closing the docker socket fails
Container.Exec() returns a decriptive error for 127 file not found

Originally posted by @ChristopherHX in #1077 (review)

forbid github.com/pkg/errors via golangci-lint",4,7
1078,2022-03-25T19:57:58Z,,2022-07-13T13:35:21Z,9,149,75,"fix: cancel running commands
feat: more control over tty allocation
Resolves #1072
Resolves #977
Closes #995",4,14
1083,2022-03-28T13:21:59Z,2022-03-29T17:42:12Z,2022-03-29T17:42:12Z,7,106,96,"This change reduces the interfaces by removing
obsolete parameters from functions.
Obsolete parameters does not means unused ones, but
parameters which could be retrieved from other parameters
instead.
This should simplify logic and maintainability for these
functions.",3,4
1084,2022-03-28T17:08:04Z,2022-03-28T19:29:48Z,2022-03-28T19:29:48Z,1,1,0,,2,3
1085,2022-03-29T13:10:58Z,2022-05-11T19:06:05Z,2022-05-11T19:06:05Z,23,391,162,"The RunContext is cloned to execute a composite action with all its
steps in a similar context. This required some workaround, since
the command handler has kept a reference to the original RunContext.
This is solved now, by replacing the docker LogWriter with a proper
scoped LogWriter.
This prepares for a simpler setup of composite actions to be able
to create and re-create the composite RunContext for pre/main/post
action steps.",5,28
1088,2022-03-29T20:14:48Z,2022-03-30T17:06:05Z,2022-03-30T17:06:05Z,3,50,576,Required for generics support,5,4
1089,2022-03-30T07:16:45Z,2022-05-24T13:36:06Z,2022-05-24T13:36:06Z,37,1551,341,"This is a continuation of #1010
This change implements action post step in combination with the save-state command.
It does support the post-if condition.
There are a few preparations for action pre steps, but it's not fully implemented in this PR.
Closes #626",4,21
1095,2022-03-30T16:51:57Z,2022-04-05T15:41:37Z,2022-04-05T15:41:37Z,3,157,158,"Prevents random failing of all other runs when qemu binfmt is not set up
but also clean up since we need ContainerArchitecture in single test only
Signed-off-by: Ryan me@hackerc.at",3,5
1100,2022-04-02T04:15:00Z,2022-04-04T17:24:49Z,2022-04-04T17:24:49Z,2,52,1,"Simple approach to allowing for #1098
Since 
  
    
      act/pkg/runner/run_context.go
    
    
         Line 78
      in
      b3bd268
    
  
  
    

        
          
           rc.Env = mergeMaps(rc.Config.Env, rc.Run.Workflow.Env, rc.Run.Job().Environment()) 
        
    
  

 specifies that the rc.Config.env is the first map to iterate through (which is what contains any variables passed into act from the CLI), this simple duplicate check works for not letting the values of an env var in the workflow supersede what is passed into the CLI or env-files.
Added a few tests as well, please let me know if anything should be adjusted.",4,4
1101,2022-04-02T08:59:40Z,2022-04-04T18:01:14Z,2022-04-04T18:01:14Z,5,82,0,It was assumed that 'workflow.yml' was parsed and validated correctly in advance.,5,3
1104,2022-04-04T16:36:00Z,2022-04-04T17:53:08Z,2022-04-04T17:53:09Z,6,15,7,"fixes #1099
fixes #983
Signed-off-by: Ryan me@hackerc.at",3,2
1107,2022-04-05T14:19:07Z,2022-04-05T15:30:40Z,2022-04-05T15:30:40Z,2,42,14,Signed-off-by: Ryan me@hackerc.at,2,2
1110,2022-04-06T07:11:04Z,2022-05-12T17:28:07Z,2022-05-12T17:28:07Z,12,376,111,This PR does implement the pre-action step for remote actions.,3,17
1111,2022-04-06T14:48:49Z,2022-04-20T18:34:28Z,2022-04-20T18:34:28Z,3,12,0,"To make the test logs more readable, we should fold the
output per test into a group.",4,8
1121,2022-04-11T14:53:08Z,2022-04-20T16:10:43Z,2022-04-20T16:10:43Z,1,6,0,"There is a new Nix command
https://nixos.wiki/wiki/Nix_command
it allows to run act directly without entering a shell.",2,3
1123,2022-04-13T17:10:23Z,2022-04-19T19:51:27Z,2022-04-19T19:51:27Z,1,0,20,"fixes #1122
it's better to not advertise go install as recommended way since it has it's own quirks
and people who know Go enough will know about it anyway
I removed that part from wiki but forgot to do same for README",3,3
1124,2022-04-13T21:13:47Z,2022-04-19T19:43:30Z,2022-04-19T19:43:30Z,2,4,0,,2,3
1127,2022-04-14T23:10:04Z,2022-04-19T19:35:42Z,2022-04-19T19:35:42Z,2,6,8,"This prevented CLion GoLand 🤦‍♂️ from recognising subtests and treated it all as single big test, VSCode seems to be still broken in that regard
before:

after:",2,4
1128,2022-04-15T02:53:21Z,2022-05-23T20:27:13Z,2022-05-23T20:27:13Z,3,29,68,"As noted by @ChristopherHX on Gitter, composite actions don't need to be restricted anymore
actions/runner#1763",3,4
1129,2022-04-15T17:38:44Z,2022-04-19T17:09:12Z,2022-04-19T17:09:12Z,1,2,0,,2,2
1136,2022-04-20T20:42:59Z,2022-04-26T20:24:13Z,2022-04-26T20:24:13Z,3,37,7,"Closes #1109
If I'm not mistaken there might be still some cases which are invalid for the stepStatus structure.
I'm a bit confused how the expression evaluator is working:
I can't get contains(steps.*.outputs.name, 'value') working.",2,4
1137,2022-04-20T21:14:32Z,2022-04-26T20:14:56Z,2022-04-26T20:14:56Z,2,11,4,"Why does the new expression evaluator returns far more errors than the original?
I can't get fromJSON('[0,1]')['1.1'] to work, it doesn't return null.
Closes #1071
Closes #1115",2,2
1141,2022-04-27T13:14:46Z,2022-05-11T19:14:45Z,2022-05-11T19:14:45Z,1,3,0,"With this change act's dryrun no longer panics after my previous change #719. An error is better than a panic.
We need to consider how act can support dryrun for localactions.
Closes #1140",4,2
1142,2022-04-28T04:21:05Z,2022-05-08T14:23:19Z,2022-05-08T14:23:20Z,3,15,0,Closes #970,4,11
1145,2022-04-29T18:13:17Z,2022-05-12T19:23:35Z,2022-05-12T19:23:35Z,3,13,0,"We need to be careful
Closes #1144
on: push
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    -
    - run: exit 0
go run . -W .\w.yml -P ubuntu-latest=ubuntu:latest --no-skip-checkout
Error: invalid Step 0: missing run or uses key
exit status 1",4,3
1148,2022-05-04T20:11:58Z,2022-05-11T19:22:35Z,2022-05-11T19:22:36Z,1,1,1,"I have a lot of stale act-....-env volumes
I have the feeling, this can cause bugs if we have a job id collisions",4,2
1150,2022-05-05T07:41:00Z,2022-05-17T19:11:33Z,2022-05-17T19:11:33Z,4,18,16,Update docs and related code to add ubuntu-22.04 which will soon be available,4,2
1157,2022-05-11T11:38:08Z,2022-05-11T19:30:18Z,2022-05-11T19:30:18Z,1,4,0,"If a step does not have either a run or uses directive it is
considered invalid.",2,2
1162,2022-05-13T17:48:34Z,2022-06-21T13:52:21Z,2022-06-21T13:52:21Z,6,286,127,"What's this PR do?
add --through-action arg to assigned actions clone from GitHub
How should this be manually tested?
local
What are the relevant tickets number link?
#1161
Screenshots (if appropriate)
Anything you want to say:
On GitHub Enterprise server, we can allow specified actions from GitHub,
When we use act --github-instance on  GitHub Enterprise server, the act will clone all actions from GitHub Enterprise server.
If we allow specified actions on GitHub Enterprise server that will not found actions.",6,29
1163,2022-05-14T11:00:33Z,2022-05-17T19:02:15Z,2022-05-17T19:02:16Z,1,23,6,"Add vcsbuild info that was added in Go 1.18

example 1
go run main.go --bug-report
codespace:/workspaces/act> go run main.go --bug-report
act version:            v0.2.27-dev
GOOS:                   linux
GOARCH:                 amd64
NumCPU:                 4
Docker host:            DOCKER_HOST environment variable is unset/empty.
Sockets found:
        /var/run/docker.sock
Config files:           
Build info:
        Go version:            go1.18.1
        Module path:           command-line-arguments
        Main version:          
        Main path:             
        Main checksum:         
        Build settings:
                -compiler:            gc
                CGO_ENABLED:          1
                CGO_CFLAGS:           
                CGO_CPPFLAGS:         
                CGO_CXXFLAGS:         
                CGO_LDFLAGS:          
                GOARCH:               amd64
                GOOS:                 linux
                GOAMD64:              v1
Docker Engine:
        Engine version:        20.10.14+azure-1
        Engine runtime:        runc
        Cgroup version:        1
        Cgroup driver:         cgroupfs
        Storage driver:        overlay2
        Registry URI:          https://index.docker.io/v1/
        OS:                    Ubuntu 20.04.4 LTS (containerized)
        OS type:               linux
        OS version:            20.04
        OS arch:               x86_64
        OS kernel:             5.4.0-1074-azure
        OS CPU:                4
        OS memory:             7957 MB
        Security options:
                name=apparmor
                name=seccomp,profile=default

codespace:/workspaces/act> 



example 2
# built while git repo is clean, indicated by vcs.modified
go build -ldflags=""-X main.version=v0.2.27"" -o /go/bin/act
act --bug-report
codespace:/workspaces/act> act --bug-report
act version:            v0.2.27
GOOS:                   linux
GOARCH:                 amd64
NumCPU:                 4
Docker host:            DOCKER_HOST environment variable is unset/empty.
Sockets found:
        /var/run/docker.sock
Config files:           
Build info:
        Go version:            go1.18.1
        Module path:           github.com/nektos/act
        Main version:          (devel)
        Main path:             github.com/nektos/act
        Main checksum:         
        Build settings:
                -compiler:            gc
                -ldflags:             -X main.version=v0.2.27
                CGO_ENABLED:          1
                CGO_CFLAGS:           
                CGO_CPPFLAGS:         
                CGO_CXXFLAGS:         
                CGO_LDFLAGS:          
                GOARCH:               amd64
                GOOS:                 linux
                GOAMD64:              v1
                vcs:                  git
                vcs.revision:         a53c883b4176b463031676ab045e0ec7605ba86b
                vcs.time:             2022-05-14T10:58:50Z
                vcs.modified:         false
Docker Engine:
        Engine version:        20.10.14+azure-1
        Engine runtime:        runc
        Cgroup version:        1
        Cgroup driver:         cgroupfs
        Storage driver:        overlay2
        Registry URI:          https://index.docker.io/v1/
        OS:                    Ubuntu 20.04.4 LTS (containerized)
        OS type:               linux
        OS version:            20.04
        OS arch:               x86_64
        OS kernel:             5.4.0-1074-azure
        OS CPU:                4
        OS memory:             7957 MB
        Security options:
                name=apparmor
                name=seccomp,profile=default",4,2
1164,2022-05-14T11:47:52Z,2022-05-23T19:05:49Z,2022-05-23T19:05:49Z,3,8,4,,4,2
1170,2022-05-17T10:15:17Z,2022-05-24T14:52:25Z,2022-05-24T14:52:25Z,5,182,14,"To allow interrupting docker exec (which could be long running)
we process the log output in a go routine and handle
context cancelation as well as command result.
In case of context cancelation a CTRL+C is written into the docker
container. This should be enough to terminate the running
command.",5,8
1180,2022-05-24T03:06:08Z,2022-05-24T20:49:12Z,2022-05-24T20:49:12Z,1,4,0,Helps notify others that services are not currently supported #173,2,1
1188,2022-05-28T08:15:20Z,,2022-09-12T00:12:00Z,1,15,19,"Artifacts being gzipped is just an implementation detail of the artifact upload protocol. Decompressing gzipped uploads immediately during upload allows for easier access to artifact files from outside of act, and simplifies artifact serving logic a bit since it can assume that artifacts aren't compressed.",3,9
1198,2022-06-05T15:00:02Z,2022-06-20T22:14:15Z,2022-06-20T22:14:15Z,2,7,24,"Merging this before a fix for #1193 was merged, renders local actions unusable ( Merged, this change is ready )

Do not skip any checkouts if we don't bind mount the workspace
--no-skip-localcheckout now feels named wrong, since skipping is replaced by mocking it with docker cp
You can now checkout your workspace to multiple different locations and not just to the first one
Evaluate the path property of localcheckout

Closes #1112
Replaces other PR's
Closes #1192",4,6
1199,2022-06-05T15:21:39Z,2022-06-07T14:19:30Z,2022-06-07T14:19:30Z,2,36,0,"I broke DRYRUN for local actions last year, in a previous PR I replaced the panic with an error.
Now just skip local actions in DRYRUN, jobs using local actions now passing again.",3,2
1200,2022-06-05T18:51:57Z,2022-06-20T22:33:07Z,2022-06-20T22:33:08Z,3,102,1,"Refactored GetMatrices to more closely match my runner.server project and github actions.

include properties are now merged with the matrix cross product, if common keys match with an existing entry
include properties not matched against any existing entry are added as an additional matrix instance

Partially fixes #769
fixes #1182
resolves #1223
Known Issues, based on recent research in my related project

Matrix Keys are case insensitive, but not in act
Object Keys are case insensitive in deepequal, but not in act
Scalar values are compared with abstract equal, see expression evaluator
null == '' == 0
prevent empty matrices by always return a default matrix entry if everything is empty",3,2
1202,2022-06-06T11:24:49Z,2022-06-20T22:47:39Z,2022-06-20T22:47:40Z,4,71,6,"What is changed

Call the id posix tool after starting any container to get the current container uid / gid, otherwise assume root without failing, fails for docker actions
Try to chown the workingdir to fix the owner of the folders, fails for docker actions
Add the uid and gid to the tar archive sent to docker, docker will write the files with the correct uid and gid
Finally try to chown the dstdir to fix the owner of the folders

Closes #398
Closes #935",5,12
1203,2022-06-06T11:35:36Z,2022-06-07T14:10:44Z,2022-06-07T14:10:44Z,1,1,0,"I reread this function 
  
    
      act/pkg/runner/run_context.go
    
    
        Lines 79 to 124
      in
      859445f
    
  
  
    

        
          
           func (rc *RunContext) GetBindsAndMounts() ([]string, map[string]string) { 
        

        
          
           	name := rc.jobContainerName() 
        

        
          
            
        

        
          
           	if rc.Config.ContainerDaemonSocket == """" { 
        

        
          
           		rc.Config.ContainerDaemonSocket = ""/var/run/docker.sock"" 
        

        
          
           	} 
        

        
          
            
        

        
          
           	binds := []string{ 
        

        
          
           		fmt.Sprintf(""%s:%s"", rc.Config.ContainerDaemonSocket, ""/var/run/docker.sock""), 
        

        
          
           	} 
        

        
          
            
        

        
          
           	mounts := map[string]string{ 
        

        
          
           		""act-toolcache"": ""/toolcache"", 
        

        
          
           		name + ""-env"":   ActPath, 
        

        
          
           	} 
        

        
          
            
        

        
          
           	if job := rc.Run.Job(); job != nil { 
        

        
          
           		if container := job.Container(); container != nil { 
        

        
          
           			for _, v := range container.Volumes { 
        

        
          
           				if !strings.Contains(v, "":"") || filepath.IsAbs(v) { 
        

        
          
           					// Bind anonymous volume or host file. 
        

        
          
           					binds = append(binds, v) 
        

        
          
           				} else { 
        

        
          
           					// Mount existing volume. 
        

        
          
           					paths := strings.SplitN(v, "":"", 2) 
        

        
          
           					mounts[paths[0]] = paths[1] 
        

        
          
           				} 
        

        
          
           			} 
        

        
          
           		} 
        

        
          
           	} 
        

        
          
            
        

        
          
           	if rc.Config.BindWorkdir { 
        

        
          
           		bindModifiers := """" 
        

        
          
           		if runtime.GOOS == ""darwin"" { 
        

        
          
           			bindModifiers = "":delegated"" 
        

        
          
           		} 
        

        
          
           		if selinux.GetEnabled() { 
        

        
          
           			bindModifiers = "":z"" 
        

        
          
           		} 
        

        
          
           		binds = append(binds, fmt.Sprintf(""%s:%s%s"", rc.Config.Workdir, rc.Config.ContainerWorkdir(), bindModifiers)) 
        

        
          
           	} else { 
        

        
          
           		mounts[name] = rc.Config.ContainerWorkdir() 
        

        
          
           	} 
        

        
          
            
        

        
          
           	return binds, mounts 
        

        
          
           } 
        
    
  

, then I come to the conclusion that I made a silly mistake in #1148 that both volumes ( name, name+""-env"" ) have to be removed.",3,3
1204,2022-06-07T14:01:57Z,2022-06-08T15:36:08Z,2022-06-08T15:36:09Z,3,35,78,"We should skip local actions pre step, as it is not supported by github.
In turn we may need to late prepare remote actions which are run
as steps in a local composite action.
Fixes #1193",3,2
1208,2022-06-10T11:12:37Z,2022-06-20T22:06:55Z,2022-06-20T22:06:55Z,3,126,3,"This is follow-up for #1206, eventually addressing #677 (comment).
It implements a naive handler that just appends every chunk, assuming that upload-artifact does the chunk upload sequentially.
It passes the tests introduced for chunked uploads, that were failing in #1206, so I wonder if it might be enough for starters.",4,4
1215,2022-06-14T07:54:10Z,2022-06-20T21:58:51Z,2022-06-20T21:58:51Z,1,50,51,"Do not initialize inputs a second time (in pre and main step).
When the action setup already run during pre step, we must not
re-run it during the main step, otherwise the inputs will be
overwritten by possible other action inputs.
This is a regression introduced in #1204",3,5
1217,2022-06-14T22:05:27Z,2022-06-16T20:57:20Z,2022-06-16T20:57:20Z,1,1,1,fixes #1216,3,2
1222,2022-06-17T17:50:37Z,2022-07-27T19:46:05Z,2022-07-27T19:46:05Z,3,23,5,"This fixes #1221 for me, but I'm not sure that it does not break anything else.
With the test from #1221, I get the proper output:
[test.yml/interp] ⭐ Run Main Dump environment
[test.yml/interp]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /var/run/act/workflow/1] user= workdir=
| V1: VALUE1
| V1_V2: VALUE1_VALUE2
| x_V1: x_VALUE1
| x_V1_V2: x_VALUE1_VALUE2
[test.yml/interp]   ✅  Success - Main Dump environment
[test.yml/interp] ⭐ Run Main Interpolate in script
[test.yml/interp]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /var/run/act/workflow/2] user= workdir=
| env.V1: VALUE1
| env.V1_V2: VALUE1_VALUE2
| env.x_V1: x_VALUE1
| env.x_V1_V2: x_VALUE1_VALUE2
[test.yml/interp]   ✅  Success - Main Interpolate in script
[test.yml/interp] ⭐ Run Main Interpolate in composite action
[test.yml/interp] ⭐ Run Main Show inputs
[test.yml/interp]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /var/run/act/workflow/0.sh] user= workdir=
| inputs.v1: VALUE1
| inputs.v1_v2: VALUE1_VALUE2
| inputs.x_v1: x_VALUE1
| inputs.x_v1_v2: x_VALUE1_VALUE2
[test.yml/interp]   ✅  Success - Main Show inputs
[test.yml/interp]   ✅  Success - Main Interpolate in composite action
[test.yml/interp] ⭐ Run Post Interpolate in composite action
[test.yml/interp]   ✅  Success - Post Interpolate in composite action
[test.yml/interp] 🏁  Job succeeded

Verbose mode:
$ ~/Workbench/act/dist/local/act -P ubuntu-latest=ghcr.io/catthehacker/ubuntu:act-latest -v
WARN  ⚠ You are using Apple M1 chip and you have not specified container architecture, you might encounter issues while running act. If so, try running it with '--container-architecture linux/amd64'. ⚠
DEBU[0000] Loading environment from /Users/grigorii.entin/Workbench/act-interp-demo/.env
DEBU[0000] Loading secrets from /Users/grigorii.entin/Workbench/act-interp-demo/.secrets
DEBU[0000] Loading workflows from '/Users/grigorii.entin/Workbench/act-interp-demo/.github/workflows'
DEBU[0000] Loading workflows recursively
DEBU[0000] Found workflow '.DS_Store' in '/Users/grigorii.entin/Workbench/act-interp-demo/.github/workflows/.DS_Store'
DEBU[0000] Found workflow 'test.yml' in '/Users/grigorii.entin/Workbench/act-interp-demo/.github/workflows/test.yml'
DEBU[0000] Reading workflow '/Users/grigorii.entin/Workbench/act-interp-demo/.github/workflows/test.yml'
DEBU[0000] Planning event: push
DEBU[0000] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
DEBU[0000] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
DEBU[0000] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
DEBU[0000] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
DEBU[0000] using github ref: refs/heads/master
DEBU[0000] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
DEBU[0000] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
DEBU[0000] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
DEBU[0000] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
DEBU[0000] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
DEBU[0000] using github ref: refs/heads/master
DEBU[0000] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
DEBU[0000]
DEBU[0000] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
DEBU[0000] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
DEBU[0000] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
DEBU[0000] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
DEBU[0000] using github ref: refs/heads/master
DEBU[0000] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
DEBU[0000] expression '${{ matrix.v1 }}_${{ matrix.v2 }}' rewritten to 'format('{0}_{1}', matrix.v1, matrix.v2)'
DEBU[0000] evaluating expression 'format('{0}_{1}', matrix.v1, matrix.v2)'
DEBU[0000] expression 'format('{0}_{1}', matrix.v1, matrix.v2)' evaluated to '%!t(string=VALUE1_VALUE2)'
DEBU[0000] expression 'x_${{ matrix.v1 }}' rewritten to 'format('x_{0}', matrix.v1)'
DEBU[0000] evaluating expression 'format('x_{0}', matrix.v1)'
DEBU[0000] expression 'format('x_{0}', matrix.v1)' evaluated to '%!t(string=x_VALUE1)'
DEBU[0000] expression 'x_${{ matrix.v1 }}_${{ matrix.v2 }}' rewritten to 'format('x_{0}_{1}', matrix.v1, matrix.v2)'
DEBU[0000] evaluating expression 'format('x_{0}_{1}', matrix.v1, matrix.v2)'
DEBU[0000] expression 'format('x_{0}_{1}', matrix.v1, matrix.v2)' evaluated to '%!t(string=x_VALUE1_VALUE2)'
DEBU[0000] expression '${{ matrix.v1 }}' rewritten to 'format('{0}', matrix.v1)'
DEBU[0000] evaluating expression 'format('{0}', matrix.v1)'
DEBU[0000] expression 'format('{0}', matrix.v1)' evaluated to '%!t(string=VALUE1)'
[test.yml/interp] [DEBUG] evaluating expression 'success()'
[test.yml/interp] [DEBUG] expression 'success()' evaluated to 'true'
[test.yml/interp] 🚀  Start image=ghcr.io/catthehacker/ubuntu:act-latest
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp]   🐳  docker pull image=ghcr.io/catthehacker/ubuntu:act-latest platform= username= forcePull=false
[test.yml/interp] [DEBUG]   🐳  docker pull ghcr.io/catthehacker/ubuntu:act-latest
[test.yml/interp] [DEBUG] Image exists? true
[test.yml/interp]   🐳  docker create image=ghcr.io/catthehacker/ubuntu:act-latest platform= entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[test.yml/interp] [DEBUG] Created container name=act-test-yml-interp id=ea0b0af44a581bcd3271f3e2990ec3969d9149378817247cd1127bba07047c6f from image ghcr.io/catthehacker/ubuntu:act-latest (platform: )
[test.yml/interp] [DEBUG] ENV ==> [RUNNER_TOOL_CACHE=/opt/hostedtoolcache RUNNER_OS=Linux RUNNER_TEMP=/tmp]
[test.yml/interp]   🐳  docker run image=ghcr.io/catthehacker/ubuntu:act-latest platform= entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[test.yml/interp] [DEBUG] Starting container: ea0b0af44a581bcd3271f3e2990ec3969d9149378817247cd1127bba07047c6f
[test.yml/interp] [DEBUG] Started container: ea0b0af44a581bcd3271f3e2990ec3969d9149378817247cd1127bba07047c6f
[test.yml/interp]   🐳  docker exec cmd=[mkdir -m 0777 -p /var/run/act] user=root workdir=
[test.yml/interp] [DEBUG] Exec command '[mkdir -m 0777 -p /var/run/act]'
[test.yml/interp] [DEBUG] Working directory '/Users/grigorii.entin/Workbench/act-interp-demo'
[test.yml/interp]   🐳  docker cp src=/Users/grigorii.entin/Workbench/act-interp-demo/. dst=/Users/grigorii.entin/Workbench/act-interp-demo
[test.yml/interp]   🐳  docker exec cmd=[mkdir -p /Users/grigorii.entin/Workbench/act-interp-demo] user= workdir=
[test.yml/interp] [DEBUG] Exec command '[mkdir -p /Users/grigorii.entin/Workbench/act-interp-demo]'
[test.yml/interp] [DEBUG] Working directory '/Users/grigorii.entin/Workbench/act-interp-demo'
[test.yml/interp] [DEBUG] Writing tarball /var/folders/46/t8ph0gt50vx9_v5ydd53rlsc0000gp/T/act665705722 from /Users/grigorii.entin/Workbench/act-interp-demo/.
[test.yml/interp] [DEBUG] Stripping prefix:/Users/grigorii.entin/Workbench/act-interp-demo/ src:/Users/grigorii.entin/Workbench/act-interp-demo/.
[test.yml/interp] [DEBUG] Extracting content from '/var/folders/46/t8ph0gt50vx9_v5ydd53rlsc0000gp/T/act665705722' to '/Users/grigorii.entin/Workbench/act-interp-demo'
[test.yml/interp] close /var/folders/46/t8ph0gt50vx9_v5ydd53rlsc0000gp/T/act665705722: file already closed
[test.yml/interp] [DEBUG] Writing entry to tarball workflow/event.json len:2
[test.yml/interp] [DEBUG] Writing entry to tarball workflow/envs.txt len:0
[test.yml/interp] [DEBUG] Writing entry to tarball workflow/paths.txt len:0
[test.yml/interp] [DEBUG] Extracting content to '/var/run/act/'
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Skipping local actions/checkout because workdir was already copied
[test.yml/interp] [DEBUG] skip pre step for 'Checkout': no action model available
[test.yml/interp] 🧪  Matrix: map[v1:VALUE1 v2:VALUE2]
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Skipping local actions/checkout because workdir was already copied
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] setupEnv => map[ACT:true AGENT_TOOLSDIRECTORY:/opt/hostedtoolcache CI:true DEBIAN_FRONTEND:noninteractive DEPLOYMENT_BASEPATH:/opt/runner GITHUB_ACTION:0 GITHUB_ACTIONS:true GITHUB_ACTION_PATH: GITHUB_ACTION_REF: GITHUB_ACTION_REPOSITORY: GITHUB_ACTOR:nektos/act GITHUB_API_URL:https://api.github.com GITHUB_BASE_REF: GITHUB_ENV:/var/run/act/workflow/envs.txt GITHUB_EVENT_NAME:push GITHUB_EVENT_PATH:/var/run/act/workflow/event.json GITHUB_GRAPHQL_URL:https://api.github.com/graphql GITHUB_HEAD_REF: GITHUB_JOB:interp GITHUB_PATH:/var/run/act/workflow/paths.txt GITHUB_REF:refs/heads/master GITHUB_REF_NAME:master GITHUB_REF_TYPE:branch GITHUB_REPOSITORY:grigorye/act-interp-demo GITHUB_REPOSITORY_OWNER:grigorye GITHUB_RETENTION_DAYS:0 GITHUB_RUN_ID:1 GITHUB_RUN_NUMBER:1 GITHUB_SERVER_URL:https://github.com GITHUB_SHA:aec6e6df6132fe1050d011d083f93817b58b1d4a GITHUB_TOKEN: GITHUB_WORKFLOW:test.yml GITHUB_WORKSPACE:/Users/grigorii.entin/Workbench/act-interp-demo IMAGE_OS:ubuntu20 ImageOS:ubuntu20 LSB_OS_VERSION:2004 LSB_RELEASE:20.04 PATH:/opt/hostedtoolcache/node/16.15.0/arm64/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin RUNNER_PERFLOG:/dev/null RUNNER_TRACKING_ID: RUNNER_USER:root RUN_TOOL_CACHE:/opt/hostedtoolcache USER:root V1:VALUE1 V1_V2:VALUE1_VALUE2 x_V1:x_VALUE1 x_V1_V2:x_VALUE1_VALUE2]
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] evaluating expression ''
[test.yml/interp] [DEBUG] expression '' evaluated to 'true'
[test.yml/interp] ⭐ Run Main Checkout
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Skipping local actions/checkout because workdir was already copied
[test.yml/interp]   ✅  Success - Main Checkout
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] setupEnv => map[ACT:true AGENT_TOOLSDIRECTORY:/opt/hostedtoolcache CI:true DEBIAN_FRONTEND:noninteractive DEPLOYMENT_BASEPATH:/opt/runner GITHUB_ACTION:1 GITHUB_ACTIONS:true GITHUB_ACTION_PATH: GITHUB_ACTION_REF: GITHUB_ACTION_REPOSITORY: GITHUB_ACTOR:nektos/act GITHUB_API_URL:https://api.github.com GITHUB_BASE_REF: GITHUB_ENV:/var/run/act/workflow/envs.txt GITHUB_EVENT_NAME:push GITHUB_EVENT_PATH:/var/run/act/workflow/event.json GITHUB_GRAPHQL_URL:https://api.github.com/graphql GITHUB_HEAD_REF: GITHUB_JOB:interp GITHUB_PATH:/var/run/act/workflow/paths.txt GITHUB_REF:refs/heads/master GITHUB_REF_NAME:master GITHUB_REF_TYPE:branch GITHUB_REPOSITORY:grigorye/act-interp-demo GITHUB_REPOSITORY_OWNER:grigorye GITHUB_RETENTION_DAYS:0 GITHUB_RUN_ID:1 GITHUB_RUN_NUMBER:1 GITHUB_SERVER_URL:https://github.com GITHUB_SHA:aec6e6df6132fe1050d011d083f93817b58b1d4a GITHUB_TOKEN: GITHUB_WORKFLOW:test.yml GITHUB_WORKSPACE:/Users/grigorii.entin/Workbench/act-interp-demo IMAGE_OS:ubuntu20 ImageOS:ubuntu20 LSB_OS_VERSION:2004 LSB_RELEASE:20.04 PATH:/opt/hostedtoolcache/node/16.15.0/arm64/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin RUNNER_PERFLOG:/dev/null RUNNER_TRACKING_ID: RUNNER_USER:root RUN_TOOL_CACHE:/opt/hostedtoolcache USER:root V1:VALUE1 V1_V2:VALUE1_VALUE2 x_V1:x_VALUE1 x_V1_V2:x_VALUE1_VALUE2]
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] evaluating expression ''
[test.yml/interp] [DEBUG] expression '' evaluated to 'true'
[test.yml/interp] ⭐ Run Main Dump environment
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Wrote command

echo ""V1: $V1""
echo ""V1_V2: $V1_V2""
echo ""x_V1: $x_V1""
echo ""x_V1_V2: $x_V1_V2""


 to 'workflow/1'
[test.yml/interp] [DEBUG] Writing entry to tarball workflow/1 len:82
[test.yml/interp] [DEBUG] Extracting content to '/var/run/act'
[test.yml/interp]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /var/run/act/workflow/1] user= workdir=
[test.yml/interp] [DEBUG] Exec command '[bash --noprofile --norc -e -o pipefail /var/run/act/workflow/1]'
[test.yml/interp] [DEBUG] Working directory '/Users/grigorii.entin/Workbench/act-interp-demo'
| V1: VALUE1
| V1_V2: VALUE1_VALUE2
| x_V1: x_VALUE1
| x_V1_V2: x_VALUE1_VALUE2
[test.yml/interp]   ✅  Success - Main Dump environment
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] setupEnv => map[ACT:true AGENT_TOOLSDIRECTORY:/opt/hostedtoolcache CI:true DEBIAN_FRONTEND:noninteractive DEPLOYMENT_BASEPATH:/opt/runner GITHUB_ACTION:2 GITHUB_ACTIONS:true GITHUB_ACTION_PATH: GITHUB_ACTION_REF: GITHUB_ACTION_REPOSITORY: GITHUB_ACTOR:nektos/act GITHUB_API_URL:https://api.github.com GITHUB_BASE_REF: GITHUB_ENV:/var/run/act/workflow/envs.txt GITHUB_EVENT_NAME:push GITHUB_EVENT_PATH:/var/run/act/workflow/event.json GITHUB_GRAPHQL_URL:https://api.github.com/graphql GITHUB_HEAD_REF: GITHUB_JOB:interp GITHUB_PATH:/var/run/act/workflow/paths.txt GITHUB_REF:refs/heads/master GITHUB_REF_NAME:master GITHUB_REF_TYPE:branch GITHUB_REPOSITORY:grigorye/act-interp-demo GITHUB_REPOSITORY_OWNER:grigorye GITHUB_RETENTION_DAYS:0 GITHUB_RUN_ID:1 GITHUB_RUN_NUMBER:1 GITHUB_SERVER_URL:https://github.com GITHUB_SHA:aec6e6df6132fe1050d011d083f93817b58b1d4a GITHUB_TOKEN: GITHUB_WORKFLOW:test.yml GITHUB_WORKSPACE:/Users/grigorii.entin/Workbench/act-interp-demo IMAGE_OS:ubuntu20 ImageOS:ubuntu20 LSB_OS_VERSION:2004 LSB_RELEASE:20.04 PATH:/opt/hostedtoolcache/node/16.15.0/arm64/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin RUNNER_PERFLOG:/dev/null RUNNER_TRACKING_ID: RUNNER_USER:root RUN_TOOL_CACHE:/opt/hostedtoolcache USER:root V1:VALUE1 V1_V2:VALUE1_VALUE2 x_V1:x_VALUE1 x_V1_V2:x_VALUE1_VALUE2]
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] evaluating expression ''
[test.yml/interp] [DEBUG] expression '' evaluated to 'true'
[test.yml/interp] ⭐ Run Main Interpolate in script
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] expression 'echo ""env.V1: ${{ env.V1 }}""
echo ""env.V1_V2: ${{ env.V1_V2 }}""
echo ""env.x_V1: ${{ env.x_V1 }}""
echo ""env.x_V1_V2: ${{ env.x_V1_V2 }}""
' rewritten to 'format('echo ""env.V1: {0}""
echo ""env.V1_V2: {1}""
echo ""env.x_V1: {2}""
echo ""env.x_V1_V2: {3}""
', env.V1, env.V1_V2, env.x_V1, env.x_V1_V2)'
[test.yml/interp] [DEBUG] evaluating expression 'format('echo ""env.V1: {0}""
echo ""env.V1_V2: {1}""
echo ""env.x_V1: {2}""
echo ""env.x_V1_V2: {3}""
', env.V1, env.V1_V2, env.x_V1, env.x_V1_V2)'
[test.yml/interp] [DEBUG] expression 'format('echo ""env.V1: {0}""
echo ""env.V1_V2: {1}""
echo ""env.x_V1: {2}""
echo ""env.x_V1_V2: {3}""
', env.V1, env.V1_V2, env.x_V1, env.x_V1_V2)' evaluated to '%!t(string=echo ""env.V1: VALUE1""
echo ""env.V1_V2: VALUE1_VALUE2""
echo ""env.x_V1: x_VALUE1""
echo ""env.x_V1_V2: x_VALUE1_VALUE2""
)'
[test.yml/interp] [DEBUG] Wrote command

echo ""env.V1: VALUE1""
echo ""env.V1_V2: VALUE1_VALUE2""
echo ""env.x_V1: x_VALUE1""
echo ""env.x_V1_V2: x_VALUE1_VALUE2""


 to 'workflow/2'
[test.yml/interp] [DEBUG] Writing entry to tarball workflow/2 len:118
[test.yml/interp] [DEBUG] Extracting content to '/var/run/act'
[test.yml/interp]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /var/run/act/workflow/2] user= workdir=
[test.yml/interp] [DEBUG] Exec command '[bash --noprofile --norc -e -o pipefail /var/run/act/workflow/2]'
[test.yml/interp] [DEBUG] Working directory '/Users/grigorii.entin/Workbench/act-interp-demo'
| env.V1: VALUE1
| env.V1_V2: VALUE1_VALUE2
| env.x_V1: x_VALUE1
| env.x_V1_V2: x_VALUE1_VALUE2
[test.yml/interp]   ✅  Success - Main Interpolate in script
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] expression '${{ env.x_V1_V2 }}' rewritten to 'format('{0}', env.x_V1_V2)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.x_V1_V2)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.x_V1_V2)' evaluated to '%!t(string=x_VALUE1_VALUE2)'
[test.yml/interp] [DEBUG] expression '${{ env.V1_V2 }}' rewritten to 'format('{0}', env.V1_V2)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.V1_V2)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.V1_V2)' evaluated to '%!t(string=VALUE1_VALUE2)'
[test.yml/interp] [DEBUG] expression '${{ env.x_V1 }}' rewritten to 'format('{0}', env.x_V1)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.x_V1)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.x_V1)' evaluated to '%!t(string=x_VALUE1)'
[test.yml/interp] [DEBUG] expression '${{ env.V1 }}' rewritten to 'format('{0}', env.V1)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.V1)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.V1)' evaluated to '%!t(string=VALUE1)'
[test.yml/interp] [DEBUG] setupEnv => map[ACT:true AGENT_TOOLSDIRECTORY:/opt/hostedtoolcache CI:true DEBIAN_FRONTEND:noninteractive DEPLOYMENT_BASEPATH:/opt/runner GITHUB_ACTION:3 GITHUB_ACTIONS:true GITHUB_ACTION_PATH: GITHUB_ACTION_REF: GITHUB_ACTION_REPOSITORY: GITHUB_ACTOR:nektos/act GITHUB_API_URL:https://api.github.com GITHUB_BASE_REF: GITHUB_ENV:/var/run/act/workflow/envs.txt GITHUB_EVENT_NAME:push GITHUB_EVENT_PATH:/var/run/act/workflow/event.json GITHUB_GRAPHQL_URL:https://api.github.com/graphql GITHUB_HEAD_REF: GITHUB_JOB:interp GITHUB_PATH:/var/run/act/workflow/paths.txt GITHUB_REF:refs/heads/master GITHUB_REF_NAME:master GITHUB_REF_TYPE:branch GITHUB_REPOSITORY:grigorye/act-interp-demo GITHUB_REPOSITORY_OWNER:grigorye GITHUB_RETENTION_DAYS:0 GITHUB_RUN_ID:1 GITHUB_RUN_NUMBER:1 GITHUB_SERVER_URL:https://github.com GITHUB_SHA:aec6e6df6132fe1050d011d083f93817b58b1d4a GITHUB_TOKEN: GITHUB_WORKFLOW:test.yml GITHUB_WORKSPACE:/Users/grigorii.entin/Workbench/act-interp-demo IMAGE_OS:ubuntu20 INPUT_V1:VALUE1 INPUT_V1_V2:VALUE1_VALUE2 INPUT_X_V1:x_VALUE1 INPUT_X_V1_V2:x_VALUE1_VALUE2 ImageOS:ubuntu20 LSB_OS_VERSION:2004 LSB_RELEASE:20.04 PATH:/opt/hostedtoolcache/node/16.15.0/arm64/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin RUNNER_PERFLOG:/dev/null RUNNER_TRACKING_ID: RUNNER_USER:root RUN_TOOL_CACHE:/opt/hostedtoolcache USER:root V1:VALUE1 V1_V2:VALUE1_VALUE2 x_V1:x_VALUE1 x_V1_V2:x_VALUE1_VALUE2]
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] evaluating expression ''
[test.yml/interp] [DEBUG] expression '' evaluated to 'true'
[test.yml/interp] ⭐ Run Main Interpolate in composite action
[test.yml/interp] [DEBUG] Read action &{X  Y map[v1:{. true } v1_v2:{. true } x_v1:{. true } x_v1_v2:{. true }] map[] {composite map[]   always()  always()   [] [{ {0 0    <nil> []    0 0} Show inputs  set +e
echo ""inputs.v1: ${{ inputs.v1 }}""
echo ""inputs.v1_v2: ${{ inputs.v1_v2 }}""
echo ""inputs.x_v1: ${{ inputs.x_v1 }}""
echo ""inputs.x_v1_v2: ${{ inputs.x_v1_v2 }}""
  bash {0 0    <nil> []    0 0} map[] false }]} { }} from 'Unknown'
[test.yml/interp] [DEBUG] About to run action &{X  Y map[v1:{. true } v1_v2:{. true } x_v1:{. true } x_v1_v2:{. true }] map[] {composite map[]   always()  always()   [] [{ {0 0    <nil> []    0 0} Show inputs  set +e
echo ""inputs.v1: ${{ inputs.v1 }}""
echo ""inputs.v1_v2: ${{ inputs.v1_v2 }}""
echo ""inputs.x_v1: ${{ inputs.x_v1 }}""
echo ""inputs.x_v1_v2: ${{ inputs.x_v1_v2 }}""
  bash {0 0    <nil> []    0 0} map[] false }]} { }}
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] type=2 actionDir=/Users/grigorii.entin/Workbench/act-interp-demo/.github/actions/composite-action actionPath= workdir=/Users/grigorii.entin/Workbench/act-interp-demo actionCacheDir=/Users/grigorii.entin/.cache/act actionName=./.github/actions/composite-action containerActionDir=/Users/grigorii.entin/Workbench/act-interp-demo/.github/actions/composite-action
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] expression '${{ env.x_V1_V2 }}' rewritten to 'format('{0}', env.x_V1_V2)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.x_V1_V2)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.x_V1_V2)' evaluated to '%!t(string=x_VALUE1_VALUE2)'
[test.yml/interp] [DEBUG] expression '${{ env.V1 }}' rewritten to 'format('{0}', env.V1)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.V1)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.V1)' evaluated to '%!t(string=VALUE1)'
[test.yml/interp] [DEBUG] expression '${{ env.V1_V2 }}' rewritten to 'format('{0}', env.V1_V2)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.V1_V2)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.V1_V2)' evaluated to '%!t(string=VALUE1_VALUE2)'
[test.yml/interp] [DEBUG] expression '${{ env.x_V1 }}' rewritten to 'format('{0}', env.x_V1)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.x_V1)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.x_V1)' evaluated to '%!t(string=x_VALUE1)'
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] expression '${{ env.x_V1_V2 }}' rewritten to 'format('{0}', env.x_V1_V2)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.x_V1_V2)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.x_V1_V2)' evaluated to '%!t(string=x_VALUE1_VALUE2)'
[test.yml/interp] [DEBUG] expression '${{ env.V1 }}' rewritten to 'format('{0}', env.V1)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.V1)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.V1)' evaluated to '%!t(string=VALUE1)'
[test.yml/interp] [DEBUG] expression '${{ env.V1_V2 }}' rewritten to 'format('{0}', env.V1_V2)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.V1_V2)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.V1_V2)' evaluated to '%!t(string=VALUE1_VALUE2)'
[test.yml/interp] [DEBUG] expression '${{ env.x_V1 }}' rewritten to 'format('{0}', env.x_V1)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.x_V1)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.x_V1)' evaluated to '%!t(string=x_VALUE1)'
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] setupEnv => map[ACT:true AGENT_TOOLSDIRECTORY:/opt/hostedtoolcache CI:true DEBIAN_FRONTEND:noninteractive DEPLOYMENT_BASEPATH:/opt/runner GITHUB_ACTION:0 GITHUB_ACTIONS:true GITHUB_ACTION_PATH:/Users/grigorii.entin/Workbench/act-interp-demo/.github/actions/composite-action GITHUB_ACTION_REF: GITHUB_ACTION_REPOSITORY: GITHUB_ACTOR:nektos/act GITHUB_API_URL:https://api.github.com GITHUB_BASE_REF: GITHUB_ENV:/var/run/act/workflow/envs.txt GITHUB_EVENT_NAME:push GITHUB_EVENT_PATH:/var/run/act/workflow/event.json GITHUB_GRAPHQL_URL:https://api.github.com/graphql GITHUB_HEAD_REF: GITHUB_JOB:interp GITHUB_PATH:/var/run/act/workflow/paths.txt GITHUB_REF:refs/heads/master GITHUB_REF_NAME:master GITHUB_REF_TYPE:branch GITHUB_REPOSITORY:grigorye/act-interp-demo GITHUB_REPOSITORY_OWNER:grigorye GITHUB_RETENTION_DAYS:0 GITHUB_RUN_ID:1 GITHUB_RUN_NUMBER:1 GITHUB_SERVER_URL:https://github.com GITHUB_SHA:aec6e6df6132fe1050d011d083f93817b58b1d4a GITHUB_TOKEN: GITHUB_WORKFLOW:test.yml GITHUB_WORKSPACE:/Users/grigorii.entin/Workbench/act-interp-demo IMAGE_OS:ubuntu20 ImageOS:ubuntu20 LSB_OS_VERSION:2004 LSB_RELEASE:20.04 PATH:/opt/hostedtoolcache/node/16.15.0/arm64/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin RUNNER_PERFLOG:/dev/null RUNNER_TRACKING_ID: RUNNER_USER:root RUN_TOOL_CACHE:/opt/hostedtoolcache USER:root V1:VALUE1 V1_V2:VALUE1_VALUE2 x_V1:x_VALUE1 x_V1_V2:x_VALUE1_VALUE2]
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] evaluating expression ''
[test.yml/interp] [DEBUG] expression '' evaluated to 'true'
[test.yml/interp] ⭐ Run Main Show inputs
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] expression 'set +e
echo ""inputs.v1: ${{ inputs.v1 }}""
echo ""inputs.v1_v2: ${{ inputs.v1_v2 }}""
echo ""inputs.x_v1: ${{ inputs.x_v1 }}""
echo ""inputs.x_v1_v2: ${{ inputs.x_v1_v2 }}""
' rewritten to 'format('set +e
echo ""inputs.v1: {0}""
echo ""inputs.v1_v2: {1}""
echo ""inputs.x_v1: {2}""
echo ""inputs.x_v1_v2: {3}""
', inputs.v1, inputs.v1_v2, inputs.x_v1, inputs.x_v1_v2)'
[test.yml/interp] [DEBUG] evaluating expression 'format('set +e
echo ""inputs.v1: {0}""
echo ""inputs.v1_v2: {1}""
echo ""inputs.x_v1: {2}""
echo ""inputs.x_v1_v2: {3}""
', inputs.v1, inputs.v1_v2, inputs.x_v1, inputs.x_v1_v2)'
[test.yml/interp] [DEBUG] expression 'format('set +e
echo ""inputs.v1: {0}""
echo ""inputs.v1_v2: {1}""
echo ""inputs.x_v1: {2}""
echo ""inputs.x_v1_v2: {3}""
', inputs.v1, inputs.v1_v2, inputs.x_v1, inputs.x_v1_v2)' evaluated to '%!t(string=set +e
echo ""inputs.v1: VALUE1""
echo ""inputs.v1_v2: VALUE1_VALUE2""
echo ""inputs.x_v1: x_VALUE1""
echo ""inputs.x_v1_v2: x_VALUE1_VALUE2""
)'
[test.yml/interp] [DEBUG] Wrote command

set +e
echo ""inputs.v1: VALUE1""
echo ""inputs.v1_v2: VALUE1_VALUE2""
echo ""inputs.x_v1: x_VALUE1""
echo ""inputs.x_v1_v2: x_VALUE1_VALUE2""


 to 'workflow/0.sh'
[test.yml/interp] [DEBUG] Writing entry to tarball workflow/0.sh len:137
[test.yml/interp] [DEBUG] Extracting content to '/var/run/act'
[test.yml/interp]   🐳  docker exec cmd=[bash --noprofile --norc -e -o pipefail /var/run/act/workflow/0.sh] user= workdir=
[test.yml/interp] [DEBUG] Exec command '[bash --noprofile --norc -e -o pipefail /var/run/act/workflow/0.sh]'
[test.yml/interp] [DEBUG] Working directory '/Users/grigorii.entin/Workbench/act-interp-demo'
| inputs.v1: VALUE1
| inputs.v1_v2: VALUE1_VALUE2
| inputs.x_v1: x_VALUE1
| inputs.x_v1_v2: x_VALUE1_VALUE2
[test.yml/interp]   ✅  Success - Main Show inputs
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp]   ✅  Success - Main Interpolate in composite action
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] expression '${{ env.x_V1 }}' rewritten to 'format('{0}', env.x_V1)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.x_V1)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.x_V1)' evaluated to '%!t(string=x_VALUE1)'
[test.yml/interp] [DEBUG] expression '${{ env.V1 }}' rewritten to 'format('{0}', env.V1)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.V1)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.V1)' evaluated to '%!t(string=VALUE1)'
[test.yml/interp] [DEBUG] expression '${{ env.x_V1_V2 }}' rewritten to 'format('{0}', env.x_V1_V2)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.x_V1_V2)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.x_V1_V2)' evaluated to '%!t(string=x_VALUE1_VALUE2)'
[test.yml/interp] [DEBUG] expression '${{ env.V1_V2 }}' rewritten to 'format('{0}', env.V1_V2)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.V1_V2)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.V1_V2)' evaluated to '%!t(string=VALUE1_VALUE2)'
[test.yml/interp] [DEBUG] setupEnv => map[ACT:true AGENT_TOOLSDIRECTORY:/opt/hostedtoolcache CI:true DEBIAN_FRONTEND:noninteractive DEPLOYMENT_BASEPATH:/opt/runner GITHUB_ACTION:post-3 GITHUB_ACTIONS:true GITHUB_ACTION_PATH: GITHUB_ACTION_REF: GITHUB_ACTION_REPOSITORY: GITHUB_ACTOR:nektos/act GITHUB_API_URL:https://api.github.com GITHUB_BASE_REF: GITHUB_ENV:/var/run/act/workflow/envs.txt GITHUB_EVENT_NAME:push GITHUB_EVENT_PATH:/var/run/act/workflow/event.json GITHUB_GRAPHQL_URL:https://api.github.com/graphql GITHUB_HEAD_REF: GITHUB_JOB:interp GITHUB_PATH:/var/run/act/workflow/paths.txt GITHUB_REF:refs/heads/master GITHUB_REF_NAME:master GITHUB_REF_TYPE:branch GITHUB_REPOSITORY:grigorye/act-interp-demo GITHUB_REPOSITORY_OWNER:grigorye GITHUB_RETENTION_DAYS:0 GITHUB_RUN_ID:1 GITHUB_RUN_NUMBER:1 GITHUB_SERVER_URL:https://github.com GITHUB_SHA:aec6e6df6132fe1050d011d083f93817b58b1d4a GITHUB_TOKEN: GITHUB_WORKFLOW:test.yml GITHUB_WORKSPACE:/Users/grigorii.entin/Workbench/act-interp-demo IMAGE_OS:ubuntu20 INPUT_V1:VALUE1 INPUT_V1_V2:VALUE1_VALUE2 INPUT_X_V1:x_VALUE1 INPUT_X_V1_V2:x_VALUE1_VALUE2 ImageOS:ubuntu20 LSB_OS_VERSION:2004 LSB_RELEASE:20.04 PATH:/opt/hostedtoolcache/node/16.15.0/arm64/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin RUNNER_PERFLOG:/dev/null RUNNER_TRACKING_ID: RUNNER_USER:root RUN_TOOL_CACHE:/opt/hostedtoolcache USER:root V1:VALUE1 V1_V2:VALUE1_VALUE2 x_V1:x_VALUE1 x_V1_V2:x_VALUE1_VALUE2]
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] evaluating expression 'always()'
[test.yml/interp] [DEBUG] expression 'always()' evaluated to 'true'
[test.yml/interp] ⭐ Run Post Interpolate in composite action
[test.yml/interp] [DEBUG] run post step for 'Interpolate in composite action'
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] expression '${{ env.V1 }}' rewritten to 'format('{0}', env.V1)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.V1)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.V1)' evaluated to '%!t(string=VALUE1)'
[test.yml/interp] [DEBUG] expression '${{ env.V1_V2 }}' rewritten to 'format('{0}', env.V1_V2)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.V1_V2)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.V1_V2)' evaluated to '%!t(string=VALUE1_VALUE2)'
[test.yml/interp] [DEBUG] expression '${{ env.x_V1 }}' rewritten to 'format('{0}', env.x_V1)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.x_V1)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.x_V1)' evaluated to '%!t(string=x_VALUE1)'
[test.yml/interp] [DEBUG] expression '${{ env.x_V1_V2 }}' rewritten to 'format('{0}', env.x_V1_V2)'
[test.yml/interp] [DEBUG] evaluating expression 'format('{0}', env.x_V1_V2)'
[test.yml/interp] [DEBUG] expression 'format('{0}', env.x_V1_V2)' evaluated to '%!t(string=x_VALUE1_VALUE2)'
[test.yml/interp]   ✅  Success - Post Interpolate in composite action
[test.yml/interp] [DEBUG] skipping post step for 'Checkout': no action model available
[test.yml/interp] [DEBUG] Removed container: ea0b0af44a581bcd3271f3e2990ec3969d9149378817247cd1127bba07047c6f
[test.yml/interp] [DEBUG]   🐳  docker volume rm act-test-yml-interp
[test.yml/interp] [DEBUG]   🐳  docker volume rm act-test-yml-interp-env
[test.yml/interp] 🏁  Job succeeded
[test.yml/interp] [DEBUG] Loading slug from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Loading revision from git directory '/Users/grigorii.entin/Workbench/act-interp-demo/.git'
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a
[test.yml/interp] [DEBUG] HEAD points to 'aec6e6df6132fe1050d011d083f93817b58b1d4a'
[test.yml/interp] [DEBUG] using github ref: refs/heads/master
[test.yml/interp] [DEBUG] Found revision: aec6e6df6132fe1050d011d083f93817b58b1d4a",4,3
1238,2022-07-01T00:46:55Z,2022-07-05T19:05:05Z,2022-07-05T19:05:05Z,1,43,0,"Added documentation on how to pass inputs for workflows that require them in the README file to have better visibility.
Fixes #1237",3,1
1243,2022-07-06T01:14:24Z,2022-07-06T04:38:12Z,2022-07-06T04:38:12Z,1,1,1,"Added pull_request on command to �run it with sample pull_request.json.
#1241 some of the new users can get into trouble like me",3,1
1247,2022-07-07T21:18:09Z,2022-07-08T00:31:20Z,2022-07-08T00:31:20Z,1,1,1,"This change stops act from rejecting valid entries such as
    timeout-minutes: ${{ matrix.runtime == 'v8' && 30 || 15 }}

at the jobs: level.
This change complements the fix that was already in place for the Step struct, done by @catthehacker in #1217. See: 52f5c45",4,1
1249,2022-07-07T22:41:13Z,2022-07-08T00:21:52Z,2022-07-08T00:21:52Z,7,21,21,,2,3
1250,2022-07-08T20:57:37Z,2022-07-08T22:39:42Z,2022-07-08T22:39:42Z,1,6,2,as discussed in #1202 (comment),4,1
1252,2022-07-12T07:58:28Z,2022-07-12T11:36:53Z,2022-07-12T11:36:53Z,2,2,2,"The go %s formattig option outputs the type if the given input value is not of type string.
fmt.Printf(""Number: %s\n"", 123) // -> Number: %!s(int=123)
fmt.Printf(""Number: %d\n"", 123) // -> Number: 123
fmt.Printf(""Number: %.0f\n"", 123.) // -> Number: 123
Update: The parsed type is float64, therefore we should use float formatting",3,3
1260,2022-07-16T15:30:00Z,2022-07-25T12:24:41Z,2022-07-25T12:24:41Z,1,1,1,Github -> GitHub,2,2
1268,2022-07-19T08:08:28Z,2022-07-27T19:56:42Z,2022-07-27T19:56:42Z,2,52,9,"when running nested composite actions, step ids were repeating
leading to errors in parsing the output. this patch adds the
parent step id to ste stepID field.",4,6
1282,2022-07-27T12:17:30Z,2022-07-28T14:16:30Z,2022-07-28T14:16:30Z,1,1,1,"Having submodule located into a different path than submodule name will make walk file to fail.
[submodule ""stable-asset""]
	path = ecosystem-modules/stable-asset
	url = https://github.com/nutsfinance/stable-asset.git

It will walk stable-asset and failing with lstat stable-asset: no such file or directory
This PR will change it and walk the path instead",4,1
1285,2022-07-29T08:09:48Z,2022-08-07T06:07:54Z,2022-08-07T06:07:54Z,1,2,1,"This hides the file already cloesd error as it is
distracting in the output and does not provide any value.",3,5
1286,2022-07-29T09:53:57Z,2022-07-29T19:43:25Z,2022-07-29T19:43:25Z,7,34,2,"This fixes an issue in the chain of post steps introduced
while updating the step-logger for composite actions.
It includes a test case so we make sure this does not happen
again.",2,2
1290,2022-08-04T10:20:14Z,2022-08-29T15:39:31Z,2022-08-29T15:39:31Z,5,26,0,Signed-off-by: Fabian Kammel fk@edgeless.systems,4,11
1292,2022-08-05T16:11:28Z,2022-08-06T22:53:05Z,2022-08-06T22:53:05Z,1,1,1,"Test pinning the version to a less recent one
Upgrade the linter together with code cleanup to pass  with the latest version.
Maybe we want to leave latest for feature requests etc.",3,2
1293,2022-08-05T17:30:10Z,2022-11-16T21:29:45Z,2022-11-16T21:29:45Z,39,1394,185,"This is my refactored implementation of a non docker based executor
To test running actions without docker specify -P ubuntu-latest=-self-hosted
I refactored a larger amount of code

Allow to alter /var/run/act

otherwise concurrent executors on the same host conflict each other
this folder cannot be created on windows


Tweak PATH manipulation to use custom list seperator, while not running in docker
Different runner context if running on host vs. in a container

Fixes #97
I need to look into possible linting violations
Known Issues

windows cmd not working, omitted here to shrink size
Possible escaping problems for default shell, omitted here to shrink size
On windows cmdline needs to be added to the container interface, omitted here to shrink size
Default shell bash not suitable on windows
docker actions are intentionally failing, since window and macos runner doesn't support them officially and some platforms like freebsd, etc. doesn't support docker

I want to know if this design change has a chance to get merged
Some implementation Details

lookpath is mostly copied from the go stdlib, because the original didn't allow to provide a custom PATH variable for lookup and I want to make shure multiple parallel workers don't update PATH env var to use the stdlib directly
Most changes are done by replace operations, API Change
New if conditions to avoid a crash in Tests, these issues don't appear with a well constructed run_context

Commit Message
{{title}} (#1293)",5,26
1326,2022-08-30T23:29:48Z,2022-08-31T18:41:56Z,2022-08-31T18:41:56Z,1,1,1,"I was very confused for awhile trying to figure out how to go from act -l, to ""run a specific job"".
Since the column in act -l is titled ""Job ID"", i figured that adding the literal text ""job ID"" to the help output for -j would have clued me in immediately as to which command I needed to run.
Happy to make whatever changes you like, but I'm hoping this is a trivial enough change :-)",2,1
1328,2022-09-03T16:07:53Z,2022-09-06T20:41:43Z,2022-09-06T20:41:43Z,1,2,1,Additionally close workflow file when a job name is invalid,2,1
1331,2022-09-05T20:51:46Z,2022-09-08T14:20:39Z,2022-09-08T14:20:39Z,3,105,12,,3,5
1335,2022-09-08T23:06:44Z,2022-09-29T05:59:53Z,2022-09-29T05:59:53Z,3,94,31,"To fix listing of workflows in such cases list/graph filtering was split with planning.
Now act supports one of the following list (-l)/graph (-g) cases:

show all jobs of loaded workflows: act -l
show specific job JOBNAME: act -l -j JOBNAME
show jobs of loaded workflows in which event EVENTNAME is set up: act -l EVENTNAME
show jobs of loaded workflows in which first defined workflow event is set up: act -l --detect-event

For planning it supports:

running specific job JOBNAME with triggered event determined from:


CLI argument: act -j JOBNAME EVENTNAME
first defined in loaded workflows event: act -j  JOBNAME --detect-event
only defined in loaded workflows event: act -j JOBNAME
or push event by default: act -j JOBNAME


running jobs of loaded workflows in which event is set up, event is determined from:


CLI argument: act EVENTNAME
first defined in loaded workflows event: act --detect-event
only defined in loaded workflows event: act
or push event by default: act

Except #1329 this PR fixes #1332, #1318",5,7
1345,2022-09-14T09:27:05Z,2022-10-06T21:58:16Z,2022-10-06T21:58:16Z,17,246,149,"This change fixes the composite action setup handling of inputs.
All inputs are taken from the env now. The env is composed of
the 'level above'.
For example:

step env -> taken from run context
action env -> taken from step env
composite env -> taken from action env

Before this change the env setup for steps, actions and composite
run contexts was harder to understand as all parts looked into
one of these: parent run context, step, action, composite run context.
Now the 'data flow' is from higher levels to lower levels which should
make it more clean.
ToDo before merging

 add remote composite action test
 add test for event inputs (e.g. workflow_dispatch) Do not work in act yet. Here are some tests that show the support implemented: #1363
 add proper support for ActionRepository and ActionRef

Fixes #1319",3,27
1348,2022-09-15T16:12:57Z,2022-09-26T06:17:06Z,2022-09-26T06:17:06Z,3,16,4,"We cannot run post steps, if we have no job container.
This change skips post steps, if startContainer() fails.
Before this change see referenced issue
After this change:
Error: failed to handle credentials: failed to interpolate container.credentials.password


 Add Test

Fixes #1306",2,2
1349,2022-09-15T16:22:02Z,2022-09-26T06:08:08Z,2022-09-26T06:08:08Z,3,26,0,"My action sets booleans to default value false, but these value was not provided by act in pre steps.
See action.yml https://github.com/ChristopherHX/script/blob/d2555954ac01dba5ed9a3f79dc11e97f9bfdf731/action.yml#L10
Before this change this fails
[remote-action-composite-js-pre-with-defaults/test] ⭐ Run Pre nektos/act-test-actions/composite-js-pre-with-defaults/js@main
[remote-action-composite-js-pre-with-defaults/test]   🐳  docker cp src=C:\Users\User\.cache\act/nektos-act-test-actions-composite-js-pre-with-defaults-js@main/ dst=/var/run/act/actions/nektos-act-test-actions-composite-js-pre-with-defaults-js@main/
[remote-action-composite-js-pre-with-defaults/test]   🐳  docker exec cmd=[chown -R 1001:1001 /var/run/act/actions/nektos-act-test-actions-composite-js-pre-with-defaults-js@main/] user=0 workdir=
[remote-action-composite-js-pre-with-defaults/test]   🐳  docker exec cmd=[node /var/run/act/actions/nektos-act-test-actions-composite-js-pre-with-defaults-js@main/composite-js-pre-with-defaults/js/check.js] user= workdir=
| Unexpected input value pre: 'undefined' expected 'true' or 'false'
[remote-action-composite-js-pre-with-defaults/test]   💾  ::save-state name=FAILED::1
[remote-action-composite-js-pre-with-defaults/test]   ❌  Failure - Pre nektos/act-test-actions/composite-js-pre-with-defaults/js@main
[remote-action-composite-js-pre-with-defaults/test] 🏁  Job succeeded
Error: exitcode '1': failure


 Add Test",2,2
1351,2022-09-16T06:34:47Z,2022-10-06T22:09:43Z,2022-10-06T22:09:43Z,20,2353,44,"Important note: parsing of CLI options of docker is fetched from docker/cli sources explicitly - see docker_cli.go.
Please confirm it's acceptable.
Fixes #711
Fixes #1022",4,26
1354,2022-09-20T07:29:56Z,2022-09-21T14:02:35Z,2022-09-21T14:02:35Z,1,1,1,"If people leave the value for the secret just blank, they might forget to remove the equals sign.",3,1
1355,2022-09-21T20:37:42Z,2022-09-22T05:38:36Z,2022-09-22T05:38:36Z,1,1,1,ArchWiki/SystemMaintenance,2,1
1362,2022-09-26T08:57:33Z,2022-09-26T22:49:19Z,2022-09-26T22:49:19Z,4,52,7,"The github.ref value should be refs/heads/branch in most cases.
There are a few exceptions handled by the code.
This change prefixes the default case with refs/heads and adds
tests for this and the excpetional cases.",4,3
1363,2022-09-26T13:59:55Z,2022-10-17T16:25:27Z,2022-10-17T16:25:27Z,5,136,14,This changes adds the workflow_dispatch event inputs to the inputs context and maintaining the boolean type.,4,16
1364,2022-09-27T12:14:07Z,2022-09-27T15:49:23Z,2022-09-27T15:49:23Z,3,4,3,"For log processing of the JSON logs, we want to be able to know which
keys/values of the matrices were used.
This commit adds the current matrix map to the job logger.
Co-authored-by: Markus Wolf markus.wolf@new-work.se",3,3
1365,2022-09-27T15:29:45Z,2022-09-27T19:13:32Z,2022-09-27T19:13:32Z,1,1,1,"To be able to tag all log-lines with appropriate fields
after a workflow run is canceled, we need to restore
the JobLogger in the cancelation context.",3,4
1374,2022-10-05T09:42:38Z,2022-10-05T22:13:00Z,2022-10-05T22:13:00Z,1,2,0,Copy the matrix to make it closure aware,2,2
1375,2022-10-07T08:43:58Z,2022-10-12T16:30:56Z,2022-10-12T16:30:56Z,3,63,30,"This test makes sure that the hostname inside of act is resolvable.
This will prevent regressions in the network setup (see #1351, #1022)
Act need to be started with docker network mode host by default. This was changed recently, leading to networking changes. That do break the previous (and expected) behavior.",3,8
1376,2022-10-07T10:31:55Z,2022-10-07T14:51:28Z,2022-10-07T14:51:28Z,2,14,1,"This fixes the regression to interpolate input defaults which contain
expressions.",2,2
1385,2022-10-11T14:10:22Z,2022-10-12T16:19:33Z,2022-10-12T16:19:33Z,2,13,2,"The env for remote composite actions need to be re-evaluated
at every stage (pre, main, post) as it is created during the
pre stage but there might be changes used as input to this
actions main stage (e.g. outputs for another action).
This is not required for local actions as their env is created
for the main stage (there is no pre stage).
Post stages do not need an updated env since they cannot recieve
inputs from other actions.",4,5
1388,2022-10-13T15:03:00Z,2022-10-18T22:27:28Z,2022-10-18T22:27:28Z,2,12,1,"This fixes #1387, or an attempt at it... please let me know if there are any changes required. Thanks!",4,5
1391,2022-10-14T15:25:01Z,2022-11-16T21:42:57Z,2022-11-16T21:42:57Z,6,113,3,"Retargeted to master.
One problem with the GITHUB_ENV logic, seem to be that it is never cleaned or recreated if deleted.
DO NOT MERGE, before ""feat: Host Environment"" has been merged
I don't like merge conflicts due to actpath changes
Resolves #1386, #1442",6,12
1414,2022-10-28T09:34:57Z,2022-11-01T15:58:07Z,2022-11-01T15:58:07Z,2,75,0,"This change does parse the different types of workflow jobs.
It is not much by itself but the start to implement reusable
workflows.
Relates to #826",3,4
1415,2022-10-28T10:51:20Z,,2022-11-16T19:44:32Z,10,72,33,"The conditional executor should be able to handle
an error during conditional evaluation.
Not being able to abort execution in case of an error is a severe limitation which complicates using code by opt-out of executor chaining.",3,10
1416,2022-10-29T00:22:31Z,2022-10-29T05:58:16Z,2022-10-29T05:58:16Z,1,1,0,"In v4.13.0, Docker for Mac stopped providing /var/run/docker.sock, resulting in act failing on macOS. By default, it listens on ~/.docker/run/docker.sock instead.
This was a breaking change in a non-major release and a rollback is planned:
docker/for-mac#6529 (comment)
This PR adds the new socket path to the bugReport output. Hopefully seeing that the user-level socket is available will help users set DOCKER_HOST rather than filing a report.
In the long run, it sounds like Docker wants people to move away from hardcoding a Docker host, default or otherwise, in their clients. docker context list will return the user's configured endpoints.
See #1411",2,1
1417,2022-10-29T09:30:56Z,2022-10-29T17:15:38Z,2022-10-29T17:15:39Z,7,25,30,"The io/ioutil package has been deprecated in Go 1.16 (See https://pkg.go.dev/io/ioutil). This PR replaces the existing io/ioutil functions with their new definitions in io and os packages.

ioutil.Discard => io.Discard
ioutil.NopCloser => io.NopCloser
ioutil.ReadAll => io.ReadAll
ioutil.ReadDir => os.ReadDir
ioutil.TempDir => os.MkdirTemp
ioutil.TempFile => os.CreateTemp
ioutil.WriteFile => os.WriteFile",3,1
1422,2022-11-01T08:40:57Z,2022-11-16T21:55:24Z,2022-11-16T21:55:24Z,7,19,4,"Step names could contain expressions refering to event data.
Fixes #1353",2,10
1423,2022-11-03T15:10:56Z,2022-12-15T16:45:22Z,2022-12-15T16:45:22Z,10,472,139,"This change contains the ability to parse/plan/run a local reusable workflow.
There are still numerous things missing:

 inputs
 secrets
 outputs",3,2
1425,2022-11-04T20:30:23Z,2022-11-16T22:12:00Z,2022-11-16T22:12:00Z,1,0,53,"Remove dead code, relates to #831.",3,3
1428,2022-11-07T15:16:34Z,2022-11-16T17:00:50Z,2022-11-16T17:00:50Z,2,18,1,"The event.json paths need to be copied over, since it the
GithubContext is recreated from the composite RC. And that
does read some value from the event file if available.
Fixes #1401",3,8
1432,2022-11-09T09:36:26Z,2022-11-10T20:16:00Z,2022-11-10T20:16:00Z,5,50,9,"Reason for this change
WorkflowDispatchConfig can return nil and the inputs property can also be nil see bug report.
This happens for example in composite actions.

 Add test

Closes #1430
Commit Message
{{title}}",5,8
1448,2022-11-21T18:02:10Z,,2022-11-26T09:07:51Z,4,18,2,"Hello,
I want to run this with DIND, not DooD, so I don't want to bind the docker socket.
I also want to let the container run its own entrypoint. Can we implement some feature like this?
Thank you!",2,9
1457,2022-11-23T16:35:48Z,2022-12-06T16:19:27Z,2022-12-06T16:19:27Z,7,201,99,"No public interface has been changed.
TODO

 Add tests for bugs of the old docker_run impl.
 Add tests for GITHUB_OUTPUT / GITHUB_STATE",4,2
1458,2022-11-23T20:45:37Z,2022-12-06T16:46:20Z,2022-12-06T16:46:20Z,5,40,2,"Weird inputs and env are both evaluated in the env context. This change delays the evaluation of INPUT_ env vars and makes the step env available. This feels like a hack to make act do what we expect.
Related to #1421, but more bugs are mentioned there",4,4
1462,2022-11-24T20:06:17Z,2022-12-06T15:58:48Z,2022-12-06T15:58:48Z,6,28,1,"This deprecates the following options

--privileged
--container-cap-add
--container-cap-drop
--container-architecture
--userns

If we decide to get rid of the options, we might want to add a warning before removal.",3,6
1463,2022-11-24T20:54:16Z,2022-12-06T15:45:07Z,2022-12-06T15:45:07Z,2,23,41,"breaking: docker container are removed after job exit
In github-act-runner I directly instantiate the RunContext, but I also want to make use of autoremove due to randomized job container name.",3,4
1464,2022-11-25T08:51:30Z,2022-11-25T10:38:50Z,2022-11-25T10:38:50Z,1,1,1,"When running on sh on alpine image, the following error occurs:
[test.yml/test] 🚀  Start image=docker:20.10
[test.yml/test]   🐳  docker pull image=docker:20.10 platform=linux/amd64 username= forcePull=false
[test.yml/test]   🐳  docker create image=docker:20.10 platform=linux/amd64 entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[test.yml/test]   🐳  docker run image=docker:20.10 platform=linux/amd64 entrypoint=[""/usr/bin/tail"" ""-f"" ""/dev/null""] cmd=[]
[test.yml/test] ⭐ Run Main ls
[test.yml/test]   🐳  docker exec cmd=[sh -e -c /var/run/act/workflow/0.sh] user= workdir=..
| 0.sh: applet not found
[test.yml/test]   ❌  Failure - Main ls
[test.yml/test] exitcode '127': command not found, please refer to https://github.com/nektos/act/issues/107 for more information
[test.yml/test] 🏁  Job failed
Error: Job 'test' failed

It seems to be working without any problem on debian. I suspect that it's due to the difference in interpreting a fille passed onto -c option by both the OS.
Since we are passing in a .sh file in this case, I think it's safe to drop that option",3,1
1466,2022-11-26T11:47:39Z,2022-12-15T17:08:31Z,2022-12-15T17:08:31Z,10,90,102,"This now refactores the stepresult code

pre- and post- are no longer in stepresults
stepresults no longer has an invalid state property
IntraActionState now stores the GITHUB_STATE

This uncovers a design problem:
you can create steps with an id prefixed with pre-
Reduced the change to only fix a problem, tests in #1457 needs to be changed to enable checking this bug
Fixes: #1459",3,2
1471,2022-11-27T01:43:47Z,2022-11-27T15:47:43Z,2022-11-27T15:47:43Z,1,3,0,"An example of running a job in a specific workflow.
Refs #1468",2,1
1472,2022-11-27T15:09:42Z,2022-12-09T11:16:16Z,2022-12-09T11:16:16Z,12,95,46,"The existing code applies prepend path for all actions, while it shouldn't do it for docker actions.
Additionally GITHUB_PATH shouldn't update the env directly, instead add to extrapath
Seems like the old ::add-path:: never worked correctly, because the first add-path always wins e.g.

add node12 as node
use node ver 12
add node16
still in version 12, node16 added to a later path component after node12

Duplicated path are now eliminated.
Resolves #1384
Still to complex for get it ready.",3,15
1476,2022-11-28T09:12:31Z,2022-12-06T10:36:40Z,2022-12-06T10:36:40Z,1,1,0,"In order to use act with workflows where any tools, like build tools, depends on the locale being UTF-8, one must pass via command line via the --env option.
However the Github Actions runner already passes LANG=C.UTF-8 by default, which makes the need to explicitly pass this variable via command line un-intuitive.
The PR here aims to make act pass that environment variable by default.
Fixes: #1308
Possibly #639",3,6
1480,2022-11-28T17:00:39Z,2022-12-06T15:09:14Z,2022-12-06T15:09:14Z,1,31,0,"Some people try to use something for step level if on job level. Make it clear that this is not supposed to work.
Fixes #1474",4,4
1493,2022-12-07T11:16:25Z,2022-12-07T15:31:33Z,2022-12-07T15:31:33Z,3,35,10,Closes #1488,4,8
1494,2022-12-07T13:30:30Z,2024-01-30T22:43:52Z,2024-01-30T22:43:52Z,1,1,1,"The toolcache on GitHub Actions need to be in
/opt/hostedtoolcache. This is the case for all
environment variables set by act, but it's not the case for the volume mounted into the container.",5,21
1496,2022-12-08T21:37:07Z,2022-12-09T10:25:32Z,2022-12-09T10:25:32Z,2,62,35,"Remove overriding io.Stdout in TestMaskValues to prevent deadlock in GitHub Actions
Print log of TestMaskValues in Test

captureOutput is unsafe and causes a deadlock in #1472
I tested merging this change into #1472 and it unblocks the failing test.",3,3
1497,2022-12-09T03:16:36Z,2022-12-19T08:37:53Z,2022-12-19T08:37:53Z,5,34,9,"This change adds ""result"" to a job's ""needs"" context, as documented here. act currently tracks the success/failure/cancelled status of a job, but does not include this value the needs context.
Fixes #1367",6,14
1501,2022-12-10T20:00:45Z,2023-01-13T17:52:55Z,2023-01-13T17:52:55Z,1,18,49,"Should I preserve the public ImageExistsLocally signature and make a private helper function?, reverted the new return value.
This uses docker inspect and remove docker list.
You cannot have multiple images of the same name+tag, regardless of platform metadata
Fixes #1390",3,3
1502,2022-12-11T01:27:44Z,,2023-01-31T00:11:04Z,1,1,2,"This PR removes the color red from logging messages as red is typically associated with error messages, and can result in confusion with lots of output from many containers.
Avoiding red text removes the ambiguity of red text that is not an error message.",3,6
1503,2022-12-11T21:02:12Z,2023-02-04T13:35:13Z,2023-02-04T13:35:13Z,18,176,64,"I'm potentially breaking non standard act specfic workflows
With this change are all file commands in a single place again.
Closes #1384
Closes #1421",4,10
1506,2022-12-12T21:25:36Z,2022-12-15T17:31:59Z,2022-12-15T17:31:59Z,1,1,1,"Reason actions/runner doesn't use /usr/bin/tail in the entrypoint, it uses tail without /usr/bin/ prefix.
Fixes #1449",2,2
1510,2022-12-14T19:19:00Z,2022-12-19T14:58:56Z,2022-12-19T14:58:56Z,2,29,6,"This change now also unifies RUNNER_OS with runner.os, I suggest to do the same thing for the github context.
This is a breaking change for github-act-runner, but we should align to actions/runner where possible
Fixes #1509",3,3
1512,2022-12-18T12:18:54Z,,2022-12-19T21:25:45Z,1,1,1,"I updated two PR's and the snapshot fails, because the latest mono-dev fails to find it's dependency in the old alpine base image
This package is not found in v3.16 or older
https://pkgs.alpinelinux.org/packages?name=libgdiplus-dev&branch=v3.17&repo=&arch=&maintainer=",3,6
1514,2022-12-18T15:04:55Z,2022-12-19T21:24:06Z,2022-12-19T21:24:06Z,2,1,4,"This option isn't part of parsed docker cli flags of act.
Nobody protected me doing nonsense, I really expected that the --platform has been parsed.
Even if this flag has been parsed by docker options logic, this flag wouldn't be applied to docker_pull and other parts of act",3,2
1519,2022-12-19T14:11:16Z,2023-01-10T21:31:13Z,2023-01-10T21:31:13Z,3,31,2,"There is just one job field for the job result. This is also true for
matrix jobs. We need to preserve the failure state of a job to
have the whole job failing in case of one permuation of the matrix failed.
Closes #1518",3,2
1520,2022-12-19T14:51:34Z,2023-01-10T21:43:12Z,2023-01-10T21:43:12Z,1,5,0,"Since reusable workflows are defining inputs and ouputs using the
on.workflow_call syntax, this could also be triggered by a workflow_call
event. That event does not exist within GitHub and we should make
sure our worklow is not called by that kind of 'synthetic' event.
See https://github.com/nektos/act/pull/1423/files/74da5b085c0c4d08c5e5bf53501e555cb585b26c#r1042413431",3,2
1521,2022-12-19T16:15:58Z,2023-02-23T22:34:48Z,2023-02-23T22:34:48Z,5,35,4,"This fixes the job outputs for reusable workflows. There is
a required indirection. Before this we took the outputs from
all jobs which is not what users express with the workflow
outputs.",3,7
1524,2022-12-19T20:38:59Z,2023-01-13T19:28:18Z,2023-01-13T19:28:18Z,6,96,11,"Fixes #1021
Added 2 flags --input and --input-file to manually pass inputs
You will notice that in the New function for runner, I only set the inputs if event payload was not defined. IMO, if the user is passing a payload, then they can set their input in that json file itself rather than passing it separately using the flags.",4,3
1525,2022-12-20T13:33:14Z,2023-01-19T20:49:11Z,2023-01-19T20:49:11Z,3,124,16,"This changes adds cloning of a remote repository to
run a workflow included in it.
Closes #826",3,3
1530,2022-12-20T17:43:08Z,2023-01-19T06:29:23Z,2023-01-19T06:29:23Z,2,90,115,"Handle cases where the user uses worktrees and not a regular git clone.
This PR uses some work previously done by @lvlrt and my contribution to make it work in any cases regardless of the type of worktrees.
this PR handle 2 cases:

when the git dir is a regular git clone: so the worktree contains a file .git that contains the path to the git data inside the regular git clone. usually under: /path/to/repo/.git/worktrees/worktre_name
When the git dir is a barre clone (so no actual files, only git data) and so the worktree contains a file .git that contains the path to the git data directly. usually under: /path/to/repo/commondir

This work fine, I tried it using both worktree types (actually both git clone types) and this code was pushed using a worktree and I managed to run act on it.
closes #657
Uses commits from #829",3,21
1531,2022-12-20T18:49:10Z,2023-01-10T21:55:05Z,2023-01-10T21:55:05Z,4,62,0,"I didn't 100% understand how composite actions are working in act today. Therefore I forget that the extrapath have to be passed from a different location than static fields like eventjson.
Fixes #1528",3,8
1532,2022-12-20T19:25:45Z,2023-01-13T17:01:40Z,2023-01-13T17:01:40Z,2,35,29,"This finally avoids failing tests due to add-matcher commands of setup-node on github actions, these tests don't fail if they are not run by actions/runner",3,1
1537,2022-12-27T15:25:27Z,,2023-08-03T00:10:49Z,1,2,0,fixes #1469,2,3
1547,2023-01-05T09:31:18Z,2023-01-16T14:30:11Z,2023-01-16T14:30:11Z,1,1,1,Use the -s (silent) flag so curl does not pass metainformation like downloadspeed etc to bash.,4,2
1557,2023-01-12T10:30:48Z,2023-01-12T21:29:31Z,2023-01-12T21:29:31Z,2,25,3,"This commit adds a new LoadDockerAuthConfigs function, which loads all registry auths that are configured on the host and sends them with the build command to the docker daemon.
This is needed in case act builds a docker action and the images referenced in that docker action are located on private registries or otherwise require authentication (e.g. to get a higher rate limit).
The code is adapted from how the docker cli works: https://github.com/docker/cli/blob/257ff41304bf121bdf1acdf00a1c7a896ed038d1/cli/command/image/build.go#L323-L332",3,3
1560,2023-01-13T16:41:55Z,2023-01-16T14:12:20Z,2023-01-16T14:12:20Z,7,18,12,"Prior to this change, the artifact server always binds to the detected ""outbound IP"", breaks functionality when that IP is unroutable. For example, Zscaler assigns the host a local CGNAT address, 100.64.0.1, which is unreachable from Docker Desktop.
Add the --artifact-server-addr flag to allow override of the address to which the artifact server binds, defaulting to the existing behaviour.

Fixes #1559",3,4
1562,2023-01-14T18:50:03Z,2023-01-15T10:30:41Z,2023-01-15T10:30:41Z,6,121,13,Notify user when a newer version of act is available. Support disabling of version check by setting environment variable ACT_DISABLE_VERSION_CHECK=1,4,9
1569,2023-01-19T19:32:07Z,2023-01-20T15:46:44Z,2023-01-20T15:46:44Z,1,2,2,"#1503 requires that medium and large act images are uptodate.
It has been an issue that docker action images are not rebuild.",3,2
1580,2023-01-23T15:30:07Z,2023-01-25T08:14:52Z,2023-01-25T08:14:52Z,2,86,3,"Examples

https://github.com/nektos/act/actions/runs/3988464133/attempts/1#summary-10827280870
https://github.com/nektos/act/actions/runs/3989524486/attempts/1#summary-10830484825

Logs of each tests are uploaded additionally as an artifact
Closes #1567",4,7
1582,2023-01-24T22:42:08Z,2023-02-03T19:35:50Z,2023-02-03T19:35:50Z,3,199,74,"Fixes #1424
By loading the GITHUB_ env variables before we load the user provided env variables, we can let them override these variables.
I ended up doing a little bit of refactoring as well to keep the linter happy about the cyclomatic complexity of  getGithubContext. I shifted the logic of setting some of the variables to github_context.go",3,4
1585,2023-01-26T22:34:43Z,2023-01-29T14:47:56Z,2023-01-29T14:47:56Z,2,21,1,To prevent merging regressions.,3,2
1587,2023-01-29T14:46:45Z,2023-01-29T16:44:53Z,2023-01-29T16:44:53Z,1,1,1,,3,3
1596,2023-02-01T23:48:35Z,2023-02-03T09:07:16Z,2023-02-03T09:07:16Z,1,1,1,"I had some issues building local action containers, and when the dockerfile path had a relative path.

Don't pull if building locally

I found that pull was failing because an image would get built but not pushed locally. So if building an image, I set pull to false


Join relative path and split dockerfile off to get context

With relative paths to dockerfiles the context wasn't getting created correctly. So instead join the context dir and the dockerfile path and split off the dockerfile to build the context



I could use some advice on testing. It looked like there weren't many docker action tests.
Signed-off-by: Aidan Jensen aidan@artificial.com",3,2
1597,2023-02-02T00:16:07Z,2023-02-03T19:54:19Z,2023-02-03T19:54:19Z,1,10,19,"I think I understood this function correctly. Please chime in if I was wrong. I had an issue when running multiple jobs in parallel with long names, the container names were conflicting.
I think this function is supposed to make sure container names don't get longer than what is allowed. But container names can be up to 128 characters I believe.
Signed-off-by: Aidan Jensen aidan@artificial.com",3,5
1599,2023-02-02T09:19:02Z,2023-02-02T17:24:35Z,2023-02-02T17:24:35Z,1,4,1,"Seems like forePull has been buggy in the past.
Tests should be added at a later time
Fixes #1594",3,2
1603,2023-02-02T17:36:35Z,,2023-11-12T00:10:51Z,1,6,0,"If this would be better off just putting as a comment in the issue, feel free to close. But this stumped me for a bit yesterday while using a custom context with client cert auth.
Signed-off-by: Aidan Jensen aidan@artificial.com",3,2
1606,2023-02-03T15:38:30Z,2023-02-08T17:14:44Z,2023-02-08T17:14:44Z,4,7,2,"This allows testing actions with non standard dockerfile names
This PR is required for the tests I added. The tests also cover my previous relative dockerfile PR changes. Once that PR is in I can update the test workflows to use the normal test repo.
Signed-off-by: Aidan Jensen aidan@artificial.com
Commit Message
{{title}} (#1606)
This allows testing actions with non standard dockerfile names
Signed-off-by: Aidan Jensen aidan@artificial.com",3,1
1607,2023-02-04T16:44:07Z,2023-02-23T15:24:44Z,2023-02-23T15:24:44Z,1,14,3,"Fixes #1533
Commit Message
{{title}} (#1607)",5,5
1616,2023-02-06T17:07:30Z,2023-02-23T22:16:07Z,2023-02-23T22:16:07Z,4,43,2,"This adds some null checking.
Fixes #1605",3,2
1618,2023-02-07T15:42:37Z,2023-02-23T18:21:09Z,2023-02-23T18:21:09Z,3,628,0,"This package can be used to add support for https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#filter-pattern-cheat-sheet
Next steps are to call this package to detect if we should skip the workflow.
Related to

#454
#1586",3,2
1619,2023-02-08T16:55:14Z,2023-02-16T16:41:59Z,2023-02-16T16:41:59Z,9,238,48,"Try to fix #1595...
Commit Message
{{title}} (#1619)
Change planner functions to return errors
This enables createStages to return unable to build dependency graph
Fix PlanEvent to properly report errors relating to events/workflows",3,12
1622,2023-02-10T15:56:25Z,2023-02-11T18:25:23Z,2023-02-11T18:25:23Z,1,8,0,"Closes #1489
#1146

The Winget package is currently outdated, and there is a blocking issue for Winget Releaser: vedantmgoyal9/winget-releaser#82. Will PR the releaser workflow once that is resolved.",2,3
1623,2023-02-12T16:20:50Z,2023-02-13T17:59:19Z,2023-02-13T17:59:19Z,1,9,0,"This action automatically generates manifests for Winget Community Repository (microsoft/winget-pkgs) and submits them.
Before merging this:

Add a classic PAT with public_repo scope as a repository secret named WINGET_TOKEN.



Fork https://github.com/microsoft/winget-pkgs under @nektos. The action will use that fork for making a branch and creating a PR with the upstream winget-pkgs repository on every release.
Install Pull on the winget-pkgs fork to ensure that it is constantly updated.

You can test out the action inputs in this playground.
If you want to see an example of a PR created using this action, see microsoft/winget-pkgs/pulls (Pull request has been automatically created using 🛫 WinGet Releaser).

Resolves #1146",3,9
1629,2023-02-15T09:50:55Z,2023-02-16T15:16:46Z,2023-02-16T15:16:46Z,1,5,3,"If the env has been set in the yaml file, we shouldn't override it with os env.",3,1
1630,2023-02-15T10:39:46Z,2023-02-16T15:34:51Z,2023-02-16T15:34:51Z,12,35,30,"Go 1.13 added the 0o form for octal numbers, like 0o644, it's more readable than 0644.

Just a suggestion, please feel free to close this PR if you think it's unnecessary.",3,1
1631,2023-02-16T10:43:29Z,2023-02-16T16:11:26Z,2023-02-16T16:11:26Z,4,0,63,"I have removed any references to this function in previous PR's, this just removes the unused code.",3,2
1645,2023-02-23T02:50:21Z,2023-03-03T08:16:33Z,2023-03-03T08:16:33Z,2,14,1,fix: compare properties of Invalid types #1643,3,3
1646,2023-02-23T04:25:27Z,2023-02-27T19:10:31Z,2023-02-27T19:10:31Z,3,6,2,"fix: github.job property is empty #1621
fix: GITHUB_JOB should be the id not the name #1473",3,3
1648,2023-02-23T17:37:26Z,2023-02-23T18:51:02Z,2023-02-23T18:51:02Z,1,0,46,Closes #1634,2,4
1651,2023-02-27T10:51:57Z,2023-03-03T08:38:34Z,2023-03-03T08:38:34Z,4,47,13,"See https://stackoverflow.com/questions/1976007/what-characters-are-forbidden-in-windows-and-linux-directory-names
From https://gitea.com/gitea/act/issues/15#issuecomment-731993",3,1
1656,2023-03-01T21:06:57Z,2023-03-03T14:39:02Z,2023-03-03T14:39:02Z,3,15,9,"Switch from direct using of XDG_CONFIG_HOME env variable to adrg/xdg lib.
Now, it will be support xdg across windows/darwin/unix platforms and looks for config file like:
~/.actrc
""${XDG_CONFIG_HOME}/act/actrc""
""${XDG_CONFIG_HOME}/.actrc""
./.actrc",4,2
1660,2023-03-02T16:50:36Z,2023-03-08T14:41:25Z,2023-03-08T14:41:25Z,2,16,1,"Reported here: https://gitea.com/gitea/act_runner/issues/32#issuecomment-732256
Also adds a test that the test case does actually run via user node and can write to the GITHUB_OUTPUT file command.
Commit Message
{{title}} ({{number}})",3,2
1661,2023-03-02T22:03:19Z,2023-03-08T14:57:50Z,2023-03-08T14:57:50Z,1,24,0,"This is the test for #1599
Commit Message
{{title}} ({{number}})",3,2
1667,2023-03-07T05:20:01Z,2023-03-08T15:13:12Z,2023-03-08T15:13:12Z,1,4,0,fi fs.FileInfo will be nil when err error isn't.,3,1
1670,2023-03-08T11:39:36Z,2023-03-20T04:02:11Z,2023-03-20T04:02:11Z,1,1,1,,5,6
1671,2023-03-08T14:47:52Z,2023-03-19T22:47:48Z,2023-03-19T22:47:48Z,1,3,0,"As a beginner with act, it took me some time to find this comment and figure out how to access the artifacts #329 (comment).
I had read --help but it was not clear that an artifact server was included and thought I had to provide an URI to an external service.
So I suggest adding this small example -- alternatively add a note to the wiki",3,4
1672,2023-03-09T13:41:48Z,2023-03-09T20:03:13Z,2023-03-09T20:03:13Z,3,20,7,"The ref in the GitHub context is always full qualified (e.g. refs/heads/branch, refs/tags/v1).
The ref_name is the ref with the stripped prefix.
In case of pull_requests, this is the merge commit ref (e.g. refs/pull/123/merge -> 123/merge).",3,3
1675,2023-03-10T17:41:24Z,2023-03-19T17:25:55Z,2023-03-19T17:25:55Z,5,144,35,"Fixes #114
You can selectively choose a subset of matrix options to run by specifying the --matrix flag. It will only run those matrix configurations which include your specified values.
Example workflow file
name: matrix-with-user-inclusions
on: push

jobs:
  build:
    name: Matrix
    runs-on: ubuntu-latest
    steps:
      - run: echo ${NODE_VERSION}
        env:
          NODE_VERSION: ${{ matrix.node }}
    strategy:
      matrix:
        os: [ubuntu-18.04, macos-latest]
        node: [4, 6, 8, 10]
        exclude:
          - os: macos-latest
            node: 4
        include:
          - os: ubuntu-16.04
            node: 10
In this case if we only wanted to run this workflow for node 8, then we would run act push --matrix node:8
This will trigger the workflow to use the following matrix configurations only:

os: ubuntu-18.04, node 8
os: macos-latest, node 8

Similarly if we just wanted to trigger this workflow for node 10 and macos-latest then we would run act push --matrix node:10 --matrix os:macos-latest.
This will trigger the workflow to use the following matrix configurations only:

os: macos-latest, node 10

Note that using the --matrix flag you can't add new values (for e.g. running the above workflow for node 20). It will simply ignore it. Moreover, the exclude field in the workflow will take precedance over the --matrix flag (for e.g. running the above workflow for only macos-latest and node 4 will result in no matrix configuration being used)",4,3
1686,2023-03-17T14:13:05Z,2023-03-28T12:24:03Z,2023-03-28T12:24:04Z,2,24,10,fixes #1685,3,6
1691,2023-03-20T22:17:01Z,2023-04-19T03:46:00Z,2023-04-19T03:46:00Z,2,0,15,"We removed the comment-out code, which relates to #831.",3,2
1693,2023-03-22T12:23:19Z,2023-04-19T03:00:34Z,2023-04-19T03:00:34Z,1,1,1,"Apple has more than 1 model in its M-series chip, so I think this warning should be changed a little bit?
WARN  ⚠ You are using Apple M1 chip and you have not specified container architecture, you might encounter issues while running act. If so, try running it with '--container-architecture linux/amd64'. ⚠

Apple M1 chip -> Apple M-series chip",3,2
1705,2023-03-28T07:52:56Z,2023-04-18T14:17:37Z,2023-04-18T14:17:37Z,4,53,32,"Although act is a command line tool, it is also a bad idea to use log.Fatal in packages.
To be clear, only packages which are used as libraries. It's fine to use fatal in cmd.",4,13
1706,2023-03-28T08:15:35Z,2023-03-31T13:08:47Z,2023-03-31T13:08:47Z,4,4,7,"github.com/mitchellh/go-homedir is made for the old version. After go 1.12, there's os.UserHomeDir.",4,4
1707,2023-03-28T09:41:14Z,2023-03-31T13:28:09Z,2023-03-31T13:28:09Z,1,63,9,"If the machine cannot access the internet, it returns a preferred IP address from network interfaces.",3,1
1709,2023-04-02T22:57:01Z,,2024-02-27T18:26:12Z,4,546,0,"Description
This is a followup to #1618 by @ChristopherHX - which added in a package to accommodate filtering. This PR works to invoke the filtering when the act command is executed.
This PR is in a draft state - there are a number of questions that I'm not in a position to answer (which are outlined in the ""Questions"" section below), and I can't complete this PR without these questions being answered. Feedback/answers to my questions are much appreciated.
Changes Thusfar

Add a FindFilterPatterns() function to the Workflow struct.

This function checks to see if the specified event supports filtering (i.e. pull_request or push), it then traverses the nodes in WorkFlow.RawOn and builds up a struct (FilterPatterns) containing slices of filters.


Add a ShouldFilterWorkflow() function to the Workflow struct.

This function calls FindFilterPatterns() to get the filters patterns (relating to the specified event) on the workflow, it then compiles these patterns into Regex, and compares the provided event against the patterns (to determine whether the workflow should be added to the plan).


Define a function signature (workflowpattern.FilterInputsFunc)

this is the signature that both workflowpattern.Skip() and workflowpattern.Filter() implement.



Notes

I had initially looked at changing RawOn to a struct, so that we could directly unmarshal any filters found in the workflow into this struct.

I decided against this as it would require refactoring/regression testing anything that already makes use of RawOn.


There are a number of TODO comments in my code - some of these are the basis for questions below.

Questions

How should I provide the Github event to the ShouldFilterWorkflow() function? Since I will probably call ShouldFilterWorkflow() within the functions on model.workflowPlanner struct, should I store a copy of the event on this struct?

The runner.runnerImpl.configure() function builds up an eventJson attribute, but none of these functions/structs are exported.

At the time that we plan events/jobs (in cmd.newRunCommand()), we haven't called r, err := runner.New(config), so this structure wouldn't be available to the planner - even if the attribute was exported.


The model.GithubContext struct appears to relate to the Github event, but there's no function to unmarshal a JSON file into the struct.


Do we need to check the workflow filters when calling workflowPlanner.PlanJob()? Filters are a workflow-level attribute (and a Job exists as a component of a workflow file) but some users may wish to invoke a job without the context of its wider workflow.
Should I alter my existing functions (FindFilterPatterns() and ShouldFilterWorkflow()) to return errors instead of calling log.Fatal()?

I used log.Fatal() in line with the other functions in the model package, as I saw very few error return values on function signatures.
Personally, I prefer returning errors from packages as they're easier to test. I also saw a PR (#1705) which is working on replacing log.Fatal()


If users provide events (using the -e flag) that don't satisfy the conditions on their workflow file, the addition of filtering may break the workflows for those users. Is there a preferred way to communicate this change to those users?",2,7
1713,2023-04-03T15:50:55Z,,2023-05-03T09:07:04Z,1,10,4,"Fix #610
In the issues, secrets are displayed but environment variables are not when using the --insecure-secrets option.
On investigating the cause, we found that the option was only being used for the secrets display and not for the environment variables.
Therefore, we fixed it so that the option is also used for environment variables.",2,2
1725,2023-04-11T18:33:12Z,2023-04-11T21:39:37Z,2023-04-11T21:39:37Z,2,70,40,Closes #1698,3,2
1732,2023-04-16T16:02:56Z,2023-04-18T18:09:58Z,2023-04-18T18:09:58Z,12,107,17,"Why?
Currently we merge env variables with case sensitive key, this is problematic on windows where PATH and Path are the same key.
Other Changes considered:
Create a custom env type
type Map[K comparable, V any] interface {
	Set(key K, val V)
	Get(key K) V
	TryGet(key K) (V, bool)
	AsNative() map[K]V
}

type CaseInsensitiveMap[V any] struct {
	lookUp map[string]string
	Native map[string]V
}

func (m *CaseInsensitiveMap[V]) getKey(key string) string {
	return strings.Map(func(r rune) rune {
		for {
			next := unicode.SimpleFold(r)
			if next <= r {
				return r
			}
			r = next
		}
	}, key)
}

func (m *CaseInsensitiveMap[V]) Set(key string, val V) {
	foldkey := m.getKey(key)
	if m.Native == nil {
		m.Native = map[string]V{}
	}
	if fk, ok := m.lookUp[foldkey]; ok {
		m.Native[fk] = val
	} else {
		if m.lookUp == nil {
			m.lookUp = map[string]string{}
		}
		m.lookUp[foldkey] = key
		m.Native[key] = val
	}
}

func (m *CaseInsensitiveMap[V]) Get(key string) V {
	v, _ := m.TryGet(key)
	return v
}

func (m *CaseInsensitiveMap[V]) TryGet(key string) (V, bool) {
	foldkey := m.getKey(key)
	if m.Native == nil {
		m.Native = map[string]V{}
	}
	if fk, ok := m.lookUp[foldkey]; ok {
		return m.Native[fk], true
	}
	return m.Native[key], false
}

func (m *CaseInsensitiveMap[V]) AsNative() map[string]V {
	return m.Native
}

type RegularMap[K comparable, V any] struct {
	Native map[K]V
}

func (m *RegularMap[K, V]) Set(key K, val V) {
	if m.Native == nil {
		m.Native = map[K]V{}
	}
	m.Native[key] = val
}

func (m *RegularMap[K, V]) Get(key K) V {
	return m.Native[key]
}

func (m *RegularMap[K, V]) TryGet(key K) (V, bool) {
	v, ok := m.Native[key]
	return v, ok
}

func (m *RegularMap[K, V]) AsNative() map[K]V {
	return m.Native
}
However this would require a lot of changes across the codebase.
Next steps:

make the env expressions context case sensitive again for non windows, because the env keys can be duplucated in the map",3,3
1733,2023-04-16T18:24:56Z,2023-04-18T13:35:31Z,2023-04-18T13:35:31Z,1,19,1,"Why?
I don't like the godotfile syntax.
Proposal:
Let us support yaml if the user specify a .yml or .yaml file.
This has been added to my other github actions local runner tool, since a while. Act should support it too.
Multiline secrets with ease
MYSECRET: |
  l1
  l2
  l3

without a newline after the last line of the secret
MYSECRET: |-
  l1
  l2
  l3",3,4
1739,2023-04-18T12:35:05Z,2023-04-18T14:37:59Z,2023-04-18T14:37:59Z,1,6,0,"act defaults network mode to ""host"", but when --container-options are passed on the CLI, it uses the docker CLI options parser, which fills empty values with defaults, in which case network mode is set to ""default"".
Unless the user explicitly sets --container-options=""--network=xxx"", we should always default to ""host"", to keep act's behaviour.",3,4
1740,2023-04-18T14:10:21Z,,2023-09-12T17:14:54Z,1,5,3,"This PR allows for command line options passed through --container-options to override any specified in the workflow file. It fixes #1696 which is needed for situations where you need to override a container option just in act and not in the GHA themselves.
In the GIthubs section on Container Options they call out they do not support the --network option for containers because they run containers explicitly in the bridge network and you cannot specify the --network flag twice in an invocation. With this change, ACT users can run both GHA and ACT runs from the same workflow file with the same network type.",4,16
1743,2023-04-19T02:38:18Z,2023-04-19T04:19:40Z,2023-04-19T04:19:40Z,1,28,26,Fix #1741,2,1
1745,2023-04-19T22:06:10Z,2023-04-23T19:02:57Z,2023-04-23T19:02:57Z,2,50,21,Fixes #1658,4,2
1751,2023-04-21T17:11:14Z,2023-04-23T19:18:38Z,2023-04-23T19:18:38Z,1,4,0,,3,2
1757,2023-04-24T08:40:50Z,,2023-04-25T16:31:20Z,1,1,1,"Docker cannot receive socket uri parameters in a bind mount.
This change makes sure a possible uri preifx is stripped from
the path.
Fixes #1756",4,6
1758,2023-04-24T08:48:51Z,2023-04-25T17:32:35Z,2023-04-25T17:32:35Z,1,2,0,"To prevent issues like #1756 in the future, we need to
run act from the cli through all the root setup code.
This ensures that the basic CLI setup can succeed.",4,4
1759,2023-04-24T09:35:19Z,2023-04-25T02:09:55Z,2023-04-25T02:09:55Z,1,14,21,"Follow up #1705
Replace some log.Fatal with decodeNode in pkg/model/workflow.go.",4,2
1761,2023-04-24T13:54:29Z,2023-05-03T17:26:29Z,2023-05-03T17:26:29Z,1,90,29,"Using EvaluateYamlNode for evaluating job properties of matrix jobs has been problematic, it altered the nested yaml.Node structures in place.
EvaluateYamlNode now clones the modified yaml.Node to preserve the original yaml structure for evaluation in another yaml node.
To make it possible to implement the following, which works in GitHub Actions. This is allowed via the official GitHub Actions schema file: https://github.com/actions/languageservices/blob/main/workflow-parser/src/workflow-v1.0.json. This file is much newer than the one of actions/runner.
on: push
jobs:
  _:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        include:
        - key: a
          env:
            myenv: v0
            anothervar: v1
        - key: b
          env:
            myenv2: v0
            anothervar2: v1
    env: # can also be directly assigned to ${{ matrix.env }}
      ${{ insert }}: ${{ matrix.env }}
      env1: val0
      ${{ matrix.key }}: ${{ tojson(matrix.env) }}
    steps:
    - run: env",3,3
1763,2023-04-24T18:24:14Z,2023-04-25T16:31:17Z,2023-04-25T16:31:17Z,2,56,15,"Also allow disabling mounting the docker socket via -
Closes #1756
Closes #1757, more handling
Changes

Prefer DOCKER_HOST, don't override it. (BREAKING change of a previous change)
update input.containerDaemonSocket to the found socket and pass it to the config instead of socketPath
bind mount /var/run/docker.sock on windows and ssh or other protocols, strip protocol of unix socketPath",4,3
1774,2023-04-27T10:05:41Z,2023-05-03T16:44:26Z,2023-05-03T16:44:26Z,1,10,1,"This change adds more verbose logging regarding reading docker auth store and tries an unauthenticated pull
Fixes #1769
Fixes #1165",3,3
1776,2023-04-28T18:47:18Z,2023-05-03T18:08:12Z,2023-05-03T18:08:12Z,1,15,1,Via ChristopherHX/github-act-runner#106,3,4
1777,2023-04-28T21:17:15Z,2023-05-03T19:12:36Z,2023-05-03T19:12:36Z,1,5,1,Closes #1766,3,2
1783,2023-05-01T18:55:58Z,2023-05-03T17:49:18Z,2023-05-03T17:49:18Z,1,18,3,"Currently act will accept jobs like
container: -self-hosted
I suggest to to block this syntax and require to write -P freebsd=-self-hosted.
An empty container name will now use the platform image of the runs-on label, just like actions/runner",3,3
1784,2023-05-01T21:18:44Z,2023-05-03T15:46:29Z,2023-05-03T15:46:29Z,2,21,16,"fixes #1588
By removing reference to the hardcoded github.com and instead using serverURL from github context, we can start controlling where we clone these actions/workflows from. So for example if we want act to use ssh then we can simply pass the following option:
--env GITHUB_SERVER_URL=ssh://git@github.com

Moreover, I noticed that for reusable workflows we are cloning the repositories in a directory named - {owner}-{repo}-.github-workflows-{filename}@{ref}.  However if we change this directory name to be {owner}-{repo}@{ref}, we will be able to reduce the number of clones act will make when using multiple reusable workflows from the same repository.",3,3
1804,2023-05-13T00:34:23Z,2023-07-11T04:27:44Z,2023-07-11T04:27:44Z,4,123,30,"Originally I thought the path checks were too specific, and the a reusable workflow didn't need to be stored under .github/workflows/. I believe I was confusing actions with workflows while reading the docs. So in the end, this PR ends up being simply to throw/exit in the case that an invalid uses is provided.",4,14
1818,2023-05-22T19:40:39Z,2023-05-23T12:26:47Z,2023-05-23T12:26:47Z,2,6,4,"Summary of Changes
According to https://github.com/github/docs/blob/main/data/reusables/actions/runner-arch-description.md the ARCH values used in actions are uppercase. This is affecting testing actions that depend on https://github.com/sigstore/cosign-installer because they are using ARM64 instead of arm64.
Closes #1819",2,3
1831,2023-05-30T05:22:02Z,2023-05-31T14:24:25Z,2023-05-31T14:24:25Z,1,6,0,,2,1
1833,2023-05-31T03:36:54Z,2023-06-10T18:09:28Z,2023-06-10T18:09:28Z,7,38,0,"Adding support for GitHub actions variables. eg. vars.ExampleVar in workflows.
#1558",6,6
1834,2023-06-01T21:55:16Z,2023-06-06T03:00:55Z,2023-06-06T03:00:55Z,4,56,8,"The container.GetHostInfo() struct is returned empty on hosts without docker and this results in passing zero parallelism to the parallel executor.
Use Golang's inbuilt runtime.NumCPU() instead. This should be safe on Docker too.
I've also added a fair bit of debug logging to assist with debugging the struct passed to the runner. This is leftover from my original line of inquiry, but it seemed like useful code so I kept it in the change.",3,2
1845,2023-06-05T06:47:49Z,2023-06-27T17:32:05Z,2023-06-27T17:32:05Z,4,60,0,"Fixes #1542
There's likely room to deduplicate some code in the future with generics once golang/go#48522 gets in a better spot since WorkflowDispatchConfig and WorkflowCallConfig is iterating through inputs on shared fields. Embedding is also possible here although it would require a much larger refactor also not much gained imo.",3,4
1854,2023-06-10T13:07:44Z,2023-06-10T18:42:55Z,2023-06-10T18:42:55Z,1,1,1,Simple spelling mistake that I couldn't find an issue for.,2,1
1863,2023-06-12T18:39:09Z,2023-06-15T01:16:01Z,2023-06-15T01:16:01Z,4,7,0,"Adds an option to specify the directory below which actions and host workspaces will be stored. If left empty the previous location at $XDG_CACHE_HOME/act or $HOME/.cache/act will be used respectively.
Closes #1862.",3,6
1864,2023-06-13T05:55:35Z,2023-06-13T21:24:31Z,2023-06-13T21:24:32Z,2,11,12,"Reported by #1863 (comment)
wei/curl@v1 is gone. See https://github.com/wei/curl
Fortunately, I found a fork of the repo, and I'm sure it's just a wrapper of curl command. So we can use curl command directly.",2,1
1879,2023-06-25T12:51:44Z,2023-07-10T16:57:06Z,2023-07-10T16:57:06Z,2,83,42,"I don't know anything about boltdb, but running two act instances with the same bolt database returns after 5s with error timeout.
My proposal is open the db on demand. Additionally close the db during download, upload and commit to reduce hitting a 5s timeout due to large caches.
Do you know any other solution?
This might have a negative impact for a single act instance, due to additional open and close calls.
Does boltdb have any problem when calling Close() twice? If so we need to disable the defered Close() after calling it.
Timeout is now 50s to allow using cache in parallel on slower devices, since database locks might take longer.
Closes #1825",3,5
1895,2023-07-05T06:42:58Z,2023-07-10T17:15:16Z,2023-07-10T17:15:16Z,4,10,10,"Fix #1894 and other CI failures.
archives.replacements has been removed since goreleaser v1.19.0. See https://goreleaser.com/deprecations/#archivesreplacements
Use an equivalent replacement to handle it.
To ensure that it is indeed equivalent, there's the archives of v0.2.46:

And the CI outputs of this PR:",3,2
1898,2023-07-07T19:53:01Z,2023-07-10T23:19:30Z,2023-07-10T23:19:30Z,1,5,1,fixes #1897,2,4
1912,2023-07-16T18:15:37Z,2023-08-08T15:18:26Z,2023-08-08T15:18:26Z,3,36,0,"Prepare for new process and thread safe action cache.
RE

#1785
Maintainer Only (Private): (nektos/act-maintainers#6)
others...
Changing the origin from GitHub to GHES and Gitea corrupts the cache
Full clone of all refs/tags takes long on a microsd via raspberry pi4
Concurrency issues if multiple actions try to use the same action the first time on slow machines
#1873 (comment)

See public proposal in: #1785 (comment), it is also in the private discussions.
Known Issues in tests, due to missing mocks
Further issues in tests, will appear due to missing calls to copydir etc.",2,3
1913,2023-07-16T18:36:50Z,2023-08-08T16:07:23Z,2023-08-08T16:07:23Z,2,214,0,"This is a sample implementation of ActionCache.
See also #1912 and it's description for further links.",2,5
1914,2023-07-16T19:12:59Z,2023-08-08T15:02:11Z,2023-08-08T15:02:11Z,3,18,14,"The old Container input parameter was not flexible enough. This allows to use an arbitary build context like ActionCache source.
See also #1912 and it's description for further links.",2,3
1920,2023-07-19T13:27:48Z,2023-07-19T21:45:45Z,2023-07-19T21:45:45Z,5,30,10,"Log messages can already be fairly long which is exacerbated by the prefix, however the prefix is useful when running multiple jobs within a single act pipeline. The compromise in this PR is to allow for a shorter prefix using just the job ID, which is user configurable.
The flag chosen is intentionally verbose.
--log-prefix-job-id
Sample output without the flag
[call-workflow/Run In Container/run-in-container] [DEBUG] evaluating expression 'success()'
[call-workflow/Run In Container/run-in-container] [DEBUG] expression 'success()' evaluated to 'true'
[call-workflow/Run In Container/run-in-container] [DEBUG] Loading revision from git directory
Sample output with the flag
[run-in-container] [DEBUG] evaluating expression 'success()'
[run-in-container] [DEBUG] expression 'success()' evaluated to 'true'
[run-in-container] [DEBUG] Loading revision from git directory
Closes #1821",3,7
1939,2023-08-01T19:24:48Z,2023-08-08T14:30:14Z,2023-08-08T14:30:14Z,1,5,10,Fixes #1746,3,3
1940,2023-08-01T19:26:32Z,2023-10-03T22:56:18Z,2023-10-03T22:56:18Z,3,5200,20,"Previously hashfiles ran on the host,
this don't work for container generated content
Primary for github-act-runner and act_runner downstream projects, because they don't have a checkout on the host.
The src of hashfiles can be found in actions/runner. I don't see any legal issues both act and actions/runner use the same type of license.
Fixes #2014",3,10
1941,2023-08-01T19:33:40Z,2023-08-08T15:44:25Z,2023-08-08T15:44:25Z,5,22,3,"The cmd seem to be not compatible with shellquote / golang argv handling. Also remove comspec from the shell template for cmd.
Related #1608",3,5
1942,2023-08-01T19:59:55Z,2023-08-08T14:14:46Z,2023-08-08T14:14:46Z,2,37,10,"prefer bash over sh if found
One windows test no longer defines a default shell to test if it's pwsh
Related #1608",3,3
1949,2023-08-07T02:04:44Z,2023-10-19T09:24:53Z,2023-10-19T09:24:53Z,14,469,100,"Closes #173
This PR cherry picks:

https://gitea.com/gitea/act/pulls/42
https://gitea.com/gitea/act/pulls/45
https://gitea.com/gitea/act/pulls/47
https://gitea.com/gitea/act/pulls/51
https://gitea.com/gitea/act/pulls/56
https://gitea.com/gitea/act/pulls/60

https://gitea.com/gitea/act/pulls/50 is not moved over as it does not exist as a Github Action feature.
Gitea specific features such as createSimpleContainerName and the AutoRemove flag was removed during this process. In addition, ContainerMaxLifetime is also removed as since running /bin/sleep 0 by default can be confusing and doesn't seem to have a use case outside of usage as an sdk.",7,24
1954,2023-08-08T18:56:04Z,2024-01-19T23:49:35Z,2024-01-19T23:49:35Z,10,211,16,"This is my initial code to switch the action cache over to my new implementation
Until all tests are migrated this will be kept as draft to avoid mergify spam.
I would be careful to test this change, to detect known issues of my previous PR's and this change.
Checklist

 Test symlinked action.yml file in remote actions
 Test symlinked action.yml file in local actions
 Test remote docker actions
 Test using images with a non root container (I expect we still need to fix permissions)
 Test error messages like

 action.yml not found
 Clone failed


 Make Tests Green (If I add a Feature Toggle for this change the test don't need to change)

Do you prefer to add a Feature Toggle for this change? Then we can merge this while iron out remaining bugs later and make it possible to make use of this change for people affected by the current problems.",3,6
1955,2023-08-09T02:14:17Z,2023-08-09T12:41:13Z,2023-08-09T12:41:14Z,1,9,11,"From the Go docs:

""For a nil slice, the number of iterations is 0"" https://go.dev/ref/spec#For_range

Therefore, an additional nil check for job.RunsOn() before the loop is unnecessary because job.RunsOn() returns a []string. Example: https://go.dev/play/p/cmcRrMJ6Mb4",3,1
1958,2023-08-09T19:05:55Z,2023-09-12T13:35:26Z,2023-09-12T13:35:26Z,1,4,4,"Desired functionality
Seems that act does not support variable interpolation in the --device option:
jobs:
  build:
    container:
      options: -uroot --device=${{ inputs.device }}
Results in:
Error: Cannot process container options: '-uroot --device=${{ inputs.device }}': '${{ is not an absolute path'

Seems that variable interpolation is not enabled anywhere in the options field, since it's doing the same for the -u flag:
-u${{inputs.user }}

Results in:
Error: failed to start container: Error response from daemon: unable to find user ${{inputs.user}}: no matching entries in passwd file

These are supported in the live GitHub Actions runner.
Approach
Adapted options method in run_context.go to be in the same style as containerImage which already has support for variable interpolation:
func (rc *RunContext) containerImage(ctx context.Context) string {
	job := rc.Run.Job()

	c := job.Container()
	if c != nil {
		return rc.ExprEval.Interpolate(ctx, c.Image)
	}

	return """"
}",4,1
1959,2023-08-10T04:47:29Z,2023-08-11T06:14:42Z,2023-08-11T06:14:42Z,1,6,9,"Winget Releaser now supports non-Windows runners, and ubuntu-latest is generally faster.",2,1
1961,2023-08-10T20:06:13Z,2023-08-11T05:33:53Z,2023-08-11T05:33:53Z,1,2,1,"add podman user socket path
fixes #1944",3,1
1970,2023-08-15T01:33:56Z,2023-08-21T17:53:47Z,2023-08-21T17:53:47Z,2,24,4,"Adds a warning message if act is cannot find any stages to run with the filters provided.
Reproduction:

run act -j gibberish

Desired behavior: some indication I did something silly
Actual behavior: no output, just exit with success.
As a human who often makes spelling mistakes,
it would be nice if act warned me what I was doing that was silly rather than exiting apparently doing
nothing with no obvious indication
I did something wrong.
Alternative solutions:

Do nothing, it's the user's fault: True it is, would be nice to give them a hint where to resolve their issue
Exit with error rather than warn: Reasonable behavior as well, not knowledgeable enough with the code base to know for sure this is enough justification to exit",3,2
1973,2023-08-16T20:20:34Z,2023-08-17T14:43:18Z,2023-08-17T14:43:18Z,2,5,1,"We should mention where to find the act user guide and that documentation updates should target https://github.com/nektos/act-docs.
Please help me to improve the wording.
Maintainer see also nektos/act-maintainers#16",4,3
1988,2023-08-31T14:13:04Z,2023-09-15T02:24:46Z,2023-09-15T02:24:46Z,503,160201,7,Closes #1967,4,10
2015,2023-09-21T04:11:00Z,2023-11-12T17:21:41Z,2023-11-12T17:21:41Z,1,1,1,"Use unique name for reusable workflows.
Fixes #2003 - act does not create separate containers for matrix builds with reusable workflows.",3,2
2018,2023-09-22T00:45:09Z,2023-10-13T20:01:04Z,2023-10-13T20:01:04Z,2,2,1,"Format floats the same way as actions/runner (precision 15, remove trailing zeroes)
See: https://github.com/actions/runner/blob/67d70803a95fca2fc86d89231acbc319f9a9be2a/src/Sdk/DTObjectTemplating/ObjectTemplating/Tokens/NumberToken.cs#L34
Fixes #2017",3,7
2022,2023-09-23T20:11:05Z,2023-10-03T22:39:49Z,2023-10-03T22:39:49Z,1,2,2,"ubuntu 22.04 based large image is now available
ubuntu-latest did use the 20.04 tag, due to a broken default config
medium images no longer aims to be compatible with all actions, use large image",2,3
2023,2023-09-24T20:54:37Z,2024-01-08T19:26:03Z,2024-01-08T19:26:03Z,10,10,10,"NetBSD can run Docker CLI and then use Docker on some remote machine via DOCKER_HOST.
(This can be probably extended to all other Unix-es capable of running just Docker CLI.)

This was done mechanically via:
sed -i -e 's;linux || darwin || windows;linux || darwin || windows || netbsd;' **/*.go

I have tested it only on NetBSD/amd64 via Lima VM and DOCKER_HOST set to unix:///${HOME}/.lima/docker/sock/docker.sock.
I think that the same method will probably works on several other Unix-es (dragonfly, freebsd, illumos, openbsd, solaris and maybe others that I could not think of!) as long as they support at least Docker CLI. I have being conservative here to only what I was able to test though, sorry!",3,4
2032,2023-09-29T18:00:56Z,2023-10-03T22:02:23Z,2023-10-03T22:02:23Z,1,8,0,"As seen in this issue the support for variables was made months ago, but the documentation does not have this information
Why update this: at least for me, the only way to discover this functionality existed was searching and finding the mentioned issue above
Reference for the updated section:",2,1
2054,2023-10-19T14:15:47Z,2023-11-12T18:30:21Z,2023-11-12T18:30:21Z,1,13,4,Continuation from #1949 (comment),3,5
2062,2023-10-24T08:39:08Z,2023-11-12T19:46:38Z,2023-11-12T19:46:38Z,2,61,2,"Current situation
act does not work with our worklfow declarations which are as follow:
  build:
    runs-on:
      labels:
        - generic-v2
acts runs-on only supports a string or or a string slice. However the github workflow schema does support group and labels keys.
See https://github.com/SchemaStore/schemastore/blob/master/src/schemas/json/github-workflow.json#L703-L721 for reference.
Proposal
This pr actually supports this use case. It will just combine labels and optional group declarations in the runs on output slice. This should be suitable for cover use cases for custom images targeting these labels.",3,2
2063,2023-10-24T12:23:07Z,2023-12-17T08:59:13Z,2023-12-17T08:59:13Z,1,2,1,"Current situation
Using an .actrc config it is not possible to utilize envs as there is no env expansion since its not invoked from a shell.
I'd like to have a config like this which is currently not working:
--detect-event
-s GITUB_TOKEN=$GITHUB_TOKEN
-s GH_ACTIONS=$GITHUB_TOKEN
--container-options --privileged --mount type=bind,source=/home/$USER/.docker-act,target=/home/runner/.docker

Proposal
Expand any envs while appending the caller args.",3,3
2071,2023-10-31T14:41:48Z,2023-11-04T14:10:53Z,2023-11-04T14:10:53Z,1,14,11,"Panic log:
[Build and Publish Docs site/build-docs] Get ""http://%2Fvar%2Frun%2Fdocker.sock/v1.42/images/node:16-bullseye/json"": context deadline exceeded
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x48 pc=0xb5e0e1]
goroutine 617134 [running]:
github.com/nektos/act/pkg/container.(*containerReference).UpdateFromImageEnv.(*containerReference).extractFromImageEnv.func1({0xefd3a8, 0xc000a315f0})
        github.com/nektos/act@v0.2.51/pkg/container/docker_run.go:528 +0x1e1
github.com/nektos/act/pkg/container.(*containerReference).UpdateFromImageEnv.Executor.IfNot.func2({0xefd3a8, 0xc000a315f0})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:166 +0x4f
github.com/nektos/act/pkg/runner.(*RunContext).ApplyExtraPath(0xc000334b40, {0xefd3a8, 0xc000a315f0}, 0xc000292f38)
        github.com/nektos/act@v0.2.51/pkg/runner/run_context.go:416 +0x204
github.com/nektos/act/pkg/runner.(*stepActionRemote).post.runPostStep.func1({0xefd3a8, 0xc000a315f0})
        github.com/nektos/act@v0.2.51/pkg/runner/action.go:656 +0x891
github.com/nektos/act/pkg/runner.(*stepActionRemote).post.runStepExecutor.func2({0xefd3a8, 0xc000a315f0})
        github.com/nektos/act@v0.2.51/pkg/runner/step.go:141 +0xd83
github.com/nektos/act/pkg/runner.(*stepActionRemote).post.Executor.If.func4({0xefd3a8, 0xc000a315f0})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:156 +0x45
github.com/nektos/act/pkg/runner.(*stepActionRemote).post.Executor.If.func6({0xefd3a8, 0xc000a315f0})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:156 +0x45
github.com/nektos/act/pkg/runner.newJobExecutor.useStepLogger.func12({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/runner/job_executor.go:225 +0x2e2
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func13({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:183 +0x4f
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func13({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:183 +0x4f
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func13({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:183 +0x4f
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func13({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:183 +0x4f
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func13({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:183 +0x4f
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func13({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:183 +0x4f
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func13({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:183 +0x4f
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func13({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:183 +0x4f
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func13({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:183 +0x4f
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func13({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:183 +0x4f
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func14({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:182 +0x31
github.com/nektos/act/pkg/runner.newJobExecutor.func7({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/runner/job_executor.go:159 +0xe2
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func16({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:183 +0x4f
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func17({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:182 +0x31
github.com/nektos/act/pkg/runner.newJobExecutor.Executor.Finally.func18({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:182 +0x31
github.com/nektos/act/pkg/runner.newJobExecutor.NewPipelineExecutor.Executor.Then.func21({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:148 +0x142
github.com/nektos/act/pkg/runner.(*RunContext).Executor.func1({0xefd3a8, 0xc0020baa20})
        github.com/nektos/act@v0.2.51/pkg/runner/run_context.go:595 +0x50
github.com/nektos/act/pkg/runner.(*runnerImpl).NewPlanExecutor.func1.1({0xefd3a8, 0xc00009d890})
        github.com/nektos/act@v0.2.51/pkg/runner/runner.go:214 +0x19a
github.com/nektos/act/pkg/runner.(*runnerImpl).NewPlanExecutor.func1.NewParallelExecutor.func2.1(0x8f4ba5?, 0xc000126c60?)
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:107 +0x52
created by github.com/nektos/act/pkg/runner.(*runnerImpl).NewPlanExecutor.func1.NewParallelExecutor.func2 in goroutine 617133
        github.com/nektos/act@v0.2.51/pkg/common/executor.go:105 +0xf7",3,1
2075,2023-11-02T16:58:39Z,2023-11-12T18:09:25Z,2023-11-12T18:09:25Z,1,3,1,"This Windows only issue is caused by the missing !n.IsHost() in the n.IsUserDefined() function for windows. Act sends the network alias for the host network on windows, linux sees that and calls the same IsUserDefined (but uses the unix definition on the server side), which detects the host network as non user defined network.
On linux and macOS it is impossible to reproduce at the time of creating this change. I don't get why windows has it's own definition, but bad maintained.
The actual code uses IsUserDefined to detect if network aliases are supported, which didn't work on windows due to the mess in the docker client go library.
Thank you docker client.
go\pkg\mod\github.com\docker\docker@v24.0.7+incompatible\api\types\container\hostconfig_unix.go
// IsUserDefined indicates user-created network
func (n NetworkMode) IsUserDefined() bool {
	return !n.IsDefault() && !n.IsBridge() && !n.IsHost() && !n.IsNone() && !n.IsContainer()
}

go\pkg\mod\github.com\docker\docker@v24.0.7+incompatible\api\types\container\hostconfig_windows.go
// IsUserDefined indicates user-created network
func (n NetworkMode) IsUserDefined() bool {
	return !n.IsDefault() && !n.IsNone() && !n.IsBridge() && !n.IsContainer()
}

Why did docker this?
Seems like we have to replace the convenience function with it's unix definition
Important bug fix, I don't have the power",6,5
2087,2023-11-10T17:24:23Z,2023-11-12T20:01:32Z,2023-11-12T20:01:32Z,2,15,2,"Ensure we evaluate the if condition if the job calls a reusable workflow, rather than always assuming it should run.
Fixes #2085",3,4
2088,2023-11-11T00:49:11Z,2023-11-12T17:40:06Z,2023-11-12T17:40:06Z,3,66,17,"Ensure array expressions in runs-on are handled correctly. Also fix -P to work case-insensitively, since labels are not case sensitive.
There is still one outstanding issue with runs-on and expressions, but that is not new to this PR: a matrix with a templated runs-on (e.g. runs-on: ${{ matrix.label }}). That feels like a bigger fix/refactor, so I was thinking of filing a new issue issue/PR for that, but if you'd prefer I can incorporate it into this one.
Fixes #2080",3,1
2089,2023-11-11T20:40:39Z,2023-11-12T17:52:08Z,2023-11-12T17:52:08Z,2,0,2,"This needs to be explicitly set in the job/step/etc env to be consistent with GitHub.
Fixes #2081",3,1
2102,2023-11-23T00:50:44Z,2023-12-16T23:04:54Z,2023-12-16T23:04:55Z,1,4,1,"Move the logging back up a level to fix a minor logging issue introduced in #2088
The RunContext for a composite action has a dummy/blank Job with no runs-on, meaning its calls to withGithubEnv would result in an inaccurate log message complaining that 'runs-on' key not defined in ...",3,4
2123,2023-12-12T06:00:13Z,2024-01-20T14:07:36Z,2024-01-20T14:07:36Z,2,135,13,"I was working on PR go-gitea/gitea#28163 . and found that the workflow.WorkflowDispatchConfig() method cannot be parsed correctly when the yaml node is not a mapping type
on: workflow_dispatch

on: [push, workflow_dispatch]

on:
    - push
    - workflow_dispatch

on:
    push:
    pull_request:
    workflow_dispatch:
        inputs:
            logLevel:
                description: 'Log level'
                required: true
                default: 'warning'
                type: choice
                options:
                - info
                - warning
                - debug",3,10
2128,2023-12-16T04:49:22Z,2024-01-20T00:20:16Z,2024-01-20T00:20:16Z,6,31,19,"In some regions, connecting to github.com may not be as smooth.
So every time we using uses: method, it is not a good way to fetch and pull the current action content, and I think the action tag will also be rarely updated.
We can add a configurable option in OfflineMode to control it, setting the default value to false, so this will not affect other users.
PS: This feature is mainly intended for use by Gitea act_runner. If possible, I will also create a pull request over there.",4,11
2133,2023-12-18T02:26:35Z,2024-01-20T00:32:39Z,2024-01-20T00:32:39Z,1,11,11,"Bumps actions/upload-artifact from 3 to 4.

Release notes
Sourced from actions/upload-artifact's releases.

v4.0.0
What's Changed
The release of upload-artifact@v4 and download-artifact@v4 are major changes to the backend architecture of Artifacts. They have numerous performance and behavioral improvements.
For more information, see the @​actions/artifact documentation.
New Contributors

@​vmjoseph made their first contribution in actions/upload-artifact#464

Full Changelog: actions/upload-artifact@v3...v4.0.0
v3.1.3
What's Changed

chore(github): remove trailing whitespaces by @​ljmf00 in actions/upload-artifact#313
Bump @​actions/artifact version to v1.1.2 by @​bethanyj28 in actions/upload-artifact#436

Full Changelog: actions/upload-artifact@v3...v3.1.3
v3.1.2

Update all @actions/* NPM packages to their latest versions- #374
Update all dev dependencies to their most recent versions - #375

v3.1.1

Update actions/core package to latest version to remove set-output deprecation warning #351

v3.1.0
What's Changed

Bump @​actions/artifact to v1.1.0 (actions/upload-artifact#327)

Adds checksum headers on artifact upload (actions/toolkit#1095) (actions/toolkit#1063)






Commits

c7d193f Merge pull request #466 from actions/v4-beta
13131bb licensed cache
4a6c273 Merge branch 'main' into v4-beta
f391bb9 Merge pull request #465 from actions/robherley/v4-documentation
9653d03 Apply suggestions from code review
875b630 add limitations section
ecb2146 add compression example
5e7604f trim some repeated info
d6437d0 naming
1b56155 s/v4-beta/v4/g
Additional commits viewable in compare view




You can trigger a rebase of this PR by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot show <dependency name> ignore conditions will show all of the ignore conditions of the specified dependency
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)



Note
Automatic rebases have been disabled on this pull request as it has been open for over 30 days.",1,3
2140,2023-12-28T20:18:34Z,2024-01-21T20:16:06Z,2024-01-21T20:16:06Z,1,3,1,,4,8
2153,2024-01-15T09:49:04Z,2024-01-20T12:11:50Z,2024-01-20T12:11:50Z,1,7,1,"Fixes #1823
Will now return from cache in the order mentioned in GitHub Actions cache docs:

When a key doesn't match directly, the action searches for keys prefixed with the restore key. If there are multiple partial matches for a restore key, the action returns the most recently created cache.",3,4
2155,2024-01-18T16:28:13Z,2024-02-23T07:40:14Z,2024-02-23T07:40:14Z,6,144,1,"How to test
Usage: ./act --local-repository ""https://github.com/test/test@v0=$PWD"" -W test.yml -P self-hosted=-self-hosted -v
Now also possible ./act --local-repository ""test/test@v0=$PWD"" -W test.yml -P self-hosted=-self-hosted -v
on: push
jobs:
  _:
    runs-on: self-hosted
    steps:
    - uses: test/test@v0
action.yml in cwd
runs:
  using: composite
  steps:
  - run: echo Test
Why?
Local actions cannot have pre steps and use a different syntax in the uses key",3,3
2156,2024-01-18T22:44:55Z,2024-01-19T15:04:05Z,2024-01-19T15:04:05Z,1,4,0,ci: automatic merge PRs created by a maintainer and approved by 1 other maintainer,2,2
2162,2024-01-20T09:32:44Z,2024-01-24T03:06:32Z,2024-01-24T03:06:32Z,1,11,15,"Currently parseEnvs accept two parameters:

env []string
envs map[string]string

parseEnvs then do a safety nil check for env.

  
    
      act/cmd/root.go
    
    
        Lines 299 to 312
      in
      15bb54f
    
  
  
    

        
          
           func parseEnvs(env []string, envs map[string]string) bool { 
        

        
          
           	if env != nil { 
        

        
          
           		for _, envVar := range env { 
        

        
          
           			e := strings.SplitN(envVar, `=`, 2) 
        

        
          
           			if len(e) == 2 { 
        

        
          
           				envs[e[0]] = e[1] 
        

        
          
           			} else { 
        

        
          
           				envs[e[0]] = """" 
        

        
          
           			} 
        

        
          
           		} 
        

        
          
           		return true 
        

        
          
           	} 
        

        
          
           	return false 
        

        
          
           } 
        
    
  


However, we never pass a nil env to parseEnvs in newRunCommand.

  
    
      act/cmd/root.go
    
    
        Lines 417 to 418
      in
      15bb54f
    
  
  
    

        
          
           envs := make(map[string]string) 
        

        
          
           _ = parseEnvs(input.envs, envs) 
        
    
  



  
    
      act/cmd/root.go
    
    
        Lines 422 to 423
      in
      15bb54f
    
  
  
    

        
          
           inputs := make(map[string]string) 
        

        
          
           _ = parseEnvs(input.inputs, inputs) 
        
    
  


This commit simplify the parseEnvs function to accept just one env []string parameter and return the result as map[string]string instead.",3,3
2163,2024-01-22T02:09:09Z,2024-04-10T12:55:24Z,2024-04-10T12:55:24Z,3,4,4,"Bumps actions/cache from 3 to 4.

Release notes
Sourced from actions/cache's releases.

v4.0.0
What's Changed

Update action to node20 by @​takost in actions/cache#1284
feat: save-always flag by @​to-s in actions/cache#1242

New Contributors

@​takost made their first contribution in actions/cache#1284
@​to-s made their first contribution in actions/cache#1242

Full Changelog: actions/cache@v3...v4.0.0
v3.3.3
What's Changed

Cache v3.3.3 by @​robherley in actions/cache#1302

New Contributors

@​robherley made their first contribution in actions/cache#1302

Full Changelog: actions/cache@v3...v3.3.3
v3.3.2
What's Changed

Fixed readme with new segment timeout values by @​kotewar in actions/cache#1133
Readme fixes by @​kotewar in actions/cache#1134
Updated description of the lookup-only input for main action by @​kotewar in actions/cache#1130
Change two new actions mention as quoted text by @​bishal-pdMSFT in actions/cache#1131
Update Cross-OS Caching tips by @​pdotl in actions/cache#1122
Bazel example (Take #2️⃣) by @​vorburger in actions/cache#1132
Remove actions to add new PRs and issues to a project board by @​jorendorff in actions/cache#1187
Consume latest toolkit and fix dangling promise bug by @​chkimes in actions/cache#1217
Bump action version to 3.3.2 by @​bethanyj28 in actions/cache#1236

New Contributors

@​vorburger made their first contribution in actions/cache#1132
@​jorendorff made their first contribution in actions/cache#1187
@​chkimes made their first contribution in actions/cache#1217
@​bethanyj28 made their first contribution in actions/cache#1236

Full Changelog: actions/cache@v3...v3.3.2
v3.3.1
What's Changed

Reduced download segment size to 128 MB and timeout to 10 minutes by @​kotewar in actions/cache#1129

Full Changelog: actions/cache@v3...v3.3.1
v3.3.0
What's Changed

Bug: Permission is missing in cache delete example by @​kotokaze in actions/cache#1123



... (truncated)


Changelog
Sourced from actions/cache's changelog.

Releases
3.0.0

Updated minimum runner version support from node 12 -> node 16

3.0.1

Added support for caching from GHES 3.5.
Fixed download issue for files > 2GB during restore.

3.0.2

Added support for dynamic cache size cap on GHES.

3.0.3

Fixed avoiding empty cache save when no files are available for caching. (issue)

3.0.4

Fixed tar creation error while trying to create tar with path as ~/ home folder on ubuntu-latest. (issue)

3.0.5

Removed error handling by consuming actions/cache 3.0 toolkit, Now cache server error handling will be done by toolkit. (PR)

3.0.6

Fixed #809 - zstd -d: no such file or directory error
Fixed #833 - cache doesn't work with github workspace directory

3.0.7

Fixed #810 - download stuck issue. A new timeout is introduced in the download process to abort the download if it gets stuck and doesn't finish within an hour.

3.0.8

Fix zstd not working for windows on gnu tar in issues #888 and #891.
Allowing users to provide a custom timeout as input for aborting download of a cache segment using an environment variable SEGMENT_DOWNLOAD_TIMEOUT_MINS. Default is 60 minutes.

3.0.9

Enhanced the warning message for cache unavailablity in case of GHES.

3.0.10

Fix a bug with sorting inputs.
Update definition for restore-keys in README.md



... (truncated)


Commits

13aacd8 Merge pull request #1242 from to-s/main
53b35c5 Merge branch 'main' into main
65b8989 Merge pull request #1284 from takost/update-to-node-20
d0be34d Fix dist
66cf064 Merge branch 'main' into update-to-node-20
1326563 Merge branch 'main' into main
e718767 Fix format
0122982 Apply workaround for earlyExit
3185ecf Update ""only-"" actions to node20
25618a0 Bump version
Additional commits viewable in compare view




You can trigger a rebase of this PR by commenting @dependabot rebase.


Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot show <dependency name> ignore conditions will show all of the ignore conditions of the specified dependency
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)



Note
Automatic rebases have been disabled on this pull request as it has been open for over 30 days.",3,2
2168,2024-01-22T19:21:05Z,2024-01-24T02:44:49Z,2024-01-24T02:44:49Z,1,2,0,"While Docker gets its architecture property from utsname.machine, Podman uses containerd's normalizeArch function which returns an architecture not in act's archMapper map, leading to the architecture to be passed through to the runner. This causes some runners to fail if they expect the architecture to only be in GitHub's format.
I added the two missing entries from normalizearch, amd64 and arm64, to archMapper.",3,1
2169,2024-01-28T03:59:25Z,2024-01-28T19:21:21Z,2024-01-28T19:21:21Z,1,1,1,fixes #1546,3,5
2170,2024-01-28T14:46:29Z,2024-01-28T16:49:47Z,2024-01-28T16:49:47Z,2,10,9,"This bug is behind a feature flag, which is good so no impact for regular users of act.
readfile have always read from action.yml and didn't passed the absolute path inside the action repo. This is fixed now, so readfile applies the subpath as prefix
Additionally the repo content has been copied into the subpath, so I applied a fix to use the trimmed actionContainer path as the code used without the feature toggle
To verify
on: push
jobs:
  _:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/cache/save@v4
using vscode debug config
        {
            ""name"": ""Launch Package"",
            ""type"": ""go"",
            ""request"": ""launch"",
            ""mode"": ""auto"",
            ""program"": ""${workspaceFolder}"",
            ""args"": [
                ""-W"",
                ""w.yml"",
                ""-P"",
                ""ubuntu-latest=-self-hosted"",
                ""--use-new-action-cache""
            ]
        }
After this fix we get
[w.yml/_] ⭐ Run Main actions/cache/save@v4
[w.yml/_]   | [warning]Key is not specified.
[w.yml/_]   ✅  Success - Main actions/cache/save@v4
[w.yml/_] Cleaning up container for job _
[w.yml/_] 🏁  Job succeeded",2,2
2171,2024-01-28T15:14:37Z,2024-01-28T16:37:19Z,2024-01-28T16:37:19Z,1,18,6,"This change now adds information about what has not been found
on: push
jobs:
  _:
    runs-on: ubuntu-latest
    steps:
    - uses: ChristopherHX/ChristopherHX/test@main
    # - uses: ./test # uncomment for local action error
remote action error in host mode after change (new action cache)
[w.yml/_] Cleaning up container for job _
[w.yml/_] 🏁  Job succeeded
Error: failed to read 'action.yml' from action 'ChristopherHX/ChristopherHX/test@main' with path 'test' of step file does not exist
failed to read 'action.yaml' from action 'ChristopherHX/ChristopherHX/test@main' with path 'test' of step file does not exist
failed to read 'Dockerfile' from action 'ChristopherHX/ChristopherHX/test@main' with path 'test' of step file does not exist

local action error in host mode after change
[w.yml/_] ⭐ Run Main ./test
[w.yml/_]   ❌  Failure - Main ./test
[w.yml/_] failed to read 'action.yml' from action './test' with path '' of step lstat /home/christopher/.cache/act/932a1fabcd53bbac/hostexecutor/test/action.yml: no such file or directory
failed to read 'action.yaml' from action './test' with path '' of step lstat /home/christopher/.cache/act/932a1fabcd53bbac/hostexecutor/test/action.yaml: no such file or directory
failed to read 'Dockerfile' from action './test' with path '' of step lstat /home/christopher/.cache/act/932a1fabcd53bbac/hostexecutor/test/Dockerfile: no such file or directory
[w.yml/_] 🏁  Job failed
Error: Job '_' failed

vscode launch config
        {
            ""name"": ""Launch Package"",
            ""type"": ""go"",
            ""request"": ""launch"",
            ""mode"": ""auto"",
            ""program"": ""${workspaceFolder}"",
            ""args"": [
                ""-W"",
                ""w.yml"",
                ""-P"",
                ""ubuntu-latest=-self-hosted"",
                ""--use-new-action-cache""
            ]
        }",2,2
2173,2024-01-28T19:32:17Z,2024-02-12T12:51:37Z,2024-02-12T12:51:37Z,2,51,2,"Currently --action-offline-mode is ignored with new-action-cache

Try fetch update of the action, otherwise use cached version",2,5
2174,2024-01-28T20:15:51Z,2024-01-30T00:46:45Z,2024-01-30T00:46:45Z,6,160,35,"To be able to reuse this logic across packages it makes sense for me to export it and move this into a new package.
This helps to remove the copy of filecollector in #2155",2,4
2180,2024-01-30T10:35:56Z,,2024-02-15T13:57:28Z,5,88,71,"Depends on #2179
Attempt at moving all logic regarding the docker socket location to a single place, to prevent duplication and human error when needing to edit in multiple places.",2,1
2181,2024-01-30T12:24:39Z,2024-02-06T17:18:11Z,2024-02-06T17:18:12Z,3,292,63,"Fixes #724
Fixes #2016",3,13
2195,2024-02-01T19:53:13Z,2024-02-01T21:57:17Z,2024-02-01T21:57:17Z,1,12,14,"Fixes: #2193
It worked before my PR merge commit, and does not after... I guess it's my fault 😄.
Fix
The os.Create call in defaultImageSurvey errors in case we could not create the file, like in the situation the parent folder wasn't created.
Also configLocations would set actrcXdg only if a file was actually found. So the path would be empty on first launch.
Instead of manually creating the parent folder, I went the way of modifying configLocations to include the correct xdg lib calls that takes cares of creating the folder and returning the right path.
Thanks and sorry again",3,4
2198,2024-02-03T20:49:25Z,2024-02-06T16:22:01Z,2024-02-06T16:22:01Z,1,0,450,"nektosact.com should become the single source of truth.
Migrating old content done.",2,4
2208,2024-02-06T13:08:07Z,2024-02-18T03:53:22Z,2024-02-18T03:53:22Z,2,59,48,"Doing a refs/*/ fetch seems unnecassary, short shas are rejected by the git protocol.
This fixes using HEAD as action version and let git decide to prefer tag over branch name using short form
Also reduces complexity.
Fixes #2206
Includes extended test cases and no longer fetches a repository from my account.",2,3
